/*! For license information please see main.js.LICENSE.txt */
(()=>{var e,t,r={148:(e,t,r)=>{"use strict";r.d(t,{z8:()=>s,tt:()=>l,Zv:()=>i.Z,EM:()=>u.E,RF:()=>n.RF,JX:()=>n.JX,ds:()=>n.ds});const s={interpolate(e,t,r){if(2!==e.length||2!==t.length)throw new Error("inputRange and outputRange must be an array of length 2");const s=e[0]||0,n=e[1]||0,i=t[0]||0,o=t[1]||0;return r<s?i:r>n?o:(o-i)/(n-s)*(r-s)+i}};var n=r(6109),i=r(3612),o=r(8169);const a=["receive","deposit","borrow","claim"],c=["withdraw","repay","burn"],l={getTransactionGroupTitle(e,t){const r=o.r.getYear(),s=o.r.getMonthNameByIndex(t);return e===r?s:`${s} ${e}`},getTransactionImages(e){const[t,r]=e,s=Boolean(t)&&e?.every((e=>Boolean(e.nft_info))),n=e?.length>1;return 2!==e?.length||s?n?e.map((e=>this.getTransactionImage(e))):[this.getTransactionImage(t)]:[this.getTransactionImage(t),this.getTransactionImage(r)]},getTransactionImage:e=>({type:l.getTransactionTransferTokenType(e),url:l.getTransactionImageURL(e)}),getTransactionImageURL(e){let t;const r=Boolean(e?.nft_info),s=Boolean(e?.fungible_info);return e&&r?t=e?.nft_info?.content?.preview?.url:e&&s&&(t=e?.fungible_info?.icon?.url),t},getTransactionTransferTokenType:e=>e?.fungible_info?"FUNGIBLE":e?.nft_info?"NFT":void 0,getTransactionDescriptions(e){const t=e?.metadata?.operationType,r=e?.transfers,s=e?.transfers?.length>0,n=e?.transfers?.length>1,o=s&&r?.every((e=>Boolean(e?.fungible_info))),[l,u]=r;let h=this.getTransferDescription(l),d=this.getTransferDescription(u);if(!s)return"send"!==t&&"receive"!==t||!o?[e.metadata.status]:(h=i.Z.getTruncateString({string:e?.metadata.sentFrom,charsStart:4,charsEnd:6,truncate:"middle"}),d=i.Z.getTruncateString({string:e?.metadata.sentTo,charsStart:4,charsEnd:6,truncate:"middle"}),[h,d]);if(n)return r.map((e=>this.getTransferDescription(e)));let p="";return a.includes(t)?p="+":c.includes(t)&&(p="-"),h=p.concat(h),[h]},getTransferDescription(e){let t="";return e?(e?.nft_info?t=e?.nft_info?.name||"-":e?.fungible_info&&(t=this.getFungibleTransferDescription(e)||"-"),t):t},getFungibleTransferDescription(e){return e?[this.getQuantityFixedValue(e?.quantity.numeric),e?.fungible_info?.symbol].join(" ").trim():null},getQuantityFixedValue:e=>e?parseFloat(e).toFixed(3):null};var u=r(3494)},152:(e,t,r)=>{"use strict";r.d(t,{OH:()=>n,Vl:()=>a,gS:()=>i,hy:()=>s,s1:()=>o});const s=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||"https://secure.walletconnect.org/sdk",n=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",i=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",o={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},a={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}},184:(e,t,r)=>{"use strict";r.d(t,{E:()=>g});var s=r(9073),n=r(4376),i=r(6036),o=r(6742),a=r(5905),c=r(3450),l=r(1655),u=r(2733);const h=o.w.getAnalyticsUrl(),d=new a.Z({baseUrl:h,clientId:null}),p=["MODAL_CREATED"],f=(0,s.BX)({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),g={state:f,subscribe:e=>(0,s.B1)(f,(()=>e(f))),getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:r}=u.H.state;return{projectId:e,st:t,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(e){try{const t=c.U.state.address;if(p.includes(e.data.event)||"undefined"==typeof window)return;await d.post({path:"/e",params:g.getSdkProperties(),body:{eventId:o.w.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t}}}),f.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===n.o.HTTP_STATUS_CODES.FORBIDDEN&&!f.reportedErrors.FORBIDDEN&&(l.h.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${(0,i.IP)()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),f.reportedErrors.FORBIDDEN=!0)}},sendEvent(e){f.timestamp=Date.now(),f.data=e,u.H.state.features?.analytics&&g._sendAnalyticsEvent(f)}}},221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const s=r(9026);t.toMiliseconds=function(e){return e*s.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/s.ONE_THOUSAND)}},793:e=>{"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,s){var n=s&&s.stringify||t;if("object"==typeof e&&null!==e){var i=r.length+1;if(1===i)return e;var o=new Array(i);o[0]=n(e);for(var a=1;a<i;a++)o[a]=n(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var l="",u=0,h=-1,d=e&&e.length||0,p=0;p<d;){if(37===e.charCodeAt(p)&&p+1<d){switch(h=h>-1?h:0,e.charCodeAt(p+1)){case 100:case 102:if(u>=c)break;if(null==r[u])break;h<p&&(l+=e.slice(h,p)),l+=Number(r[u]),h=p+2,p++;break;case 105:if(u>=c)break;if(null==r[u])break;h<p&&(l+=e.slice(h,p)),l+=Math.floor(Number(r[u])),h=p+2,p++;break;case 79:case 111:case 106:if(u>=c)break;if(void 0===r[u])break;h<p&&(l+=e.slice(h,p));var f=typeof r[u];if("string"===f){l+="'"+r[u]+"'",h=p+2,p++;break}if("function"===f){l+=r[u].name||"<anonymous>",h=p+2,p++;break}l+=n(r[u]),h=p+2,p++;break;case 115:if(u>=c)break;h<p&&(l+=e.slice(h,p)),l+=String(r[u]),h=p+2,p++;break;case 37:h<p&&(l+=e.slice(h,p)),l+="%",h=p+2,p++,u--}++u}++p}return-1===h?e:(h<d&&(l+=e.slice(h)),l)}},842:(e,t,r)=>{"use strict";r.d(t,{mN:()=>I,AH:()=>l,W3:()=>C,Ec:()=>_,iz:()=>c});const s=globalThis,n=s.ShadowRoot&&(void 0===s.ShadyCSS||s.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),o=new WeakMap;class a{constructor(e,t,r){if(this._$cssResult$=!0,r!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o.set(t,e))}return e}toString(){return this.cssText}}const c=e=>new a("string"==typeof e?e:e+"",void 0,i),l=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,s)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[s+1]),e[0]);return new a(r,e,i)},u=(e,t)=>{if(n)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const r of t){const t=document.createElement("style"),n=s.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=r.cssText,e.appendChild(t)}},h=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return c(t)})(e):e,{is:d,defineProperty:p,getOwnPropertyDescriptor:f,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:y}=Object,w=globalThis,b=w.trustedTypes,v=b?b.emptyScript:"",E=w.reactiveElementPolyfillSupport,A=(e,t)=>e,C={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},_=(e,t)=>!d(e,t),N={attribute:!0,type:String,converter:C,reflect:!1,useDefault:!1,hasChanged:_};Symbol.metadata??=Symbol("metadata"),w.litPropertyMetadata??=new WeakMap;class I extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=N){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,t);void 0!==s&&p(this.prototype,e,s)}}static getPropertyDescriptor(e,t,r){const{get:s,set:n}=f(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:s,set(t){const i=s?.call(this);n?.call(this,t),this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??N}static _$Ei(){if(this.hasOwnProperty(A("elementProperties")))return;const e=y(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(A("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(A("properties"))){const e=this.properties,t=[...g(e),...m(e)];for(const r of t)this.createProperty(r,e[r])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,r]of t)this.elementProperties.set(e,r)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(h(e))}else void 0!==e&&t.push(h(e));return t}static _$Eu(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return u(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(void 0!==s&&!0===r.reflect){const n=(void 0!==r.converter?.toAttribute?r.converter:C).toAttribute(t,r.type);this._$Em=e,null==n?this.removeAttribute(s):this.setAttribute(s,n),this._$Em=null}}_$AK(e,t){const r=this.constructor,s=r._$Eh.get(e);if(void 0!==s&&this._$Em!==s){const e=r.getPropertyOptions(s),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:C;this._$Em=s,this[s]=n.fromAttribute(t,e.type)??this._$Ej?.get(s)??null,this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){const s=this.constructor,n=this[e];if(r??=s.getPropertyOptions(e),!((r.hasChanged??_)(n,t)||r.useDefault&&r.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:s,wrapped:n},i){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,i??t??this[e]),!0!==n||void 0!==i)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===s&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,r]of e){const{wrapped:e}=r,s=this[t];!0!==e||this._$AL.has(t)||void 0===s||this.C(t,void 0,r,s)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((e=>this._$ET(e,this[e]))),this._$EM()}updated(e){}firstUpdated(e){}}I.elementStyles=[],I.shadowRootOptions={mode:"open"},I[A("elementProperties")]=new Map,I[A("finalized")]=new Map,E?.({ReactiveElement:I}),(w.reactiveElementVersions??=[]).push("2.1.0")},1089:(e,t)=>{"use strict";function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=r,t.isNode=s,t.isBrowser=function(){return!r()&&!s()}},1122:(e,t,r)=>{"use strict";r.d(t,{U:()=>g}),r(4013);var s=r(4376),n=r(152),i=r(3450),o=r(7388),a=r(9177),c=r(9088),l=r(184),u=r(6396),h=r(2733),d=r(8508),p=r(1871),f=r(6742);const g={getSIWX:()=>h.H.state.siwx,async initializeIfEnabled(){const e=h.H.state.siwx,t=o.W.getActiveCaipAddress();if(!e||!t)return;const[r,s,n]=t.split(":");if(o.W.checkIfSupportedNetwork(r))try{if((await e.getSessions(`${r}:${s}`,n)).length)return;await u.W.open({view:"SIWXSignMessage"})}catch(e){console.error("SIWXUtil:initializeIfEnabled",e),l.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await(a.x._getClient()?.disconnect().catch(console.error)),d.I.reset("Connect"),p.P.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const e=h.H.state.siwx,t=f.w.getPlainAddress(o.W.getActiveCaipAddress()),r=o.W.getActiveCaipNetwork(),n=a.x._getClient();if(!e)throw new Error("SIWX is not enabled");if(!t)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const i=await e.createMessage({chainId:r.caipNetworkId,accountAddress:t}),o=i.toString();c.a.getConnectorId(r.chainNamespace)===s.o.CONNECTOR_ID.AUTH&&d.I.pushTransactionStack({});const a=await n.signMessage(o);await e.addSession({data:i,message:o,signature:a}),u.W.close(),l.E.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(e){const t=this.getSIWXEventProperties();u.W.state.open&&"ApproveTransaction"!==d.I.state.view||await u.W.open({view:"SIWXSignMessage"}),t.isSmartAccount?p.P.showError("This application might not support Smart Accounts"):p.P.showError("Signature declined"),l.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:t}),console.error("SWIXUtil:requestSignMessage",e)}},async cancelSignMessage(){try{const e=this.getSIWX(),t=e?.getRequired?.();t?await a.x.disconnect():u.W.close(),d.I.reset("Connect"),l.E.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const e=h.H.state.siwx,t=f.w.getPlainAddress(o.W.getActiveCaipAddress()),r=o.W.getActiveCaipNetwork();return e&&t&&r?e.getSessions(r.caipNetworkId,t):[]},async isSIWXCloseDisabled(){const e=this.getSIWX();if(e){const t="ApproveTransaction"===d.I.state.view,r="SIWXSignMessage"===d.I.state.view;if(t||r)return e.getRequired?.()&&0===(await this.getSessions()).length}return!1},async universalProviderAuthenticate({universalProvider:e,chains:t,methods:r}){const s=g.getSIWX(),n=new Set(t.map((e=>e.split(":")[0])));if(!s||1!==n.size||!n.has("eip155"))return!1;const a=await s.createMessage({chainId:o.W.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),c=await e.authenticate({nonce:a.nonce,domain:a.domain,uri:a.uri,exp:a.expirationTime,iat:a.issuedAt,nbf:a.notBefore,requestId:a.requestId,version:a.version,resources:a.resources,statement:a.statement,chainId:a.chainId,methods:r,chains:[a.chainId,...t.filter((e=>e!==a.chainId))]});if(p.P.showLoading("Authenticating...",{autoClose:!1}),i.U.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(n)[0]),c?.auths?.length){const t=c.auths.map((t=>{const r=e.client.formatAuthMessage({request:t.p,iss:t.p.iss});return{data:{...t.p,accountAddress:t.p.iss.split(":").slice(-1).join(""),chainId:t.p.iss.split(":").slice(2,4).join(":"),uri:t.p.aud,version:t.p.version||a.version,expirationTime:t.p.exp,issuedAt:t.p.iat,notBefore:t.p.nbf},message:r,signature:t.s.s,cacao:t}}));try{await s.setSessions(t),l.E.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:g.getSIWXEventProperties()})}catch(t){throw console.error("SIWX:universalProviderAuth - failed to set sessions",t),l.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:g.getSIWXEventProperties()}),await e.disconnect().catch(console.error),t}finally{p.P.hide()}}return!0},getSIWXEventProperties(){const e=o.W.state.activeChain;return{network:o.W.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:i.U.state.preferredAccountTypes?.[e]===n.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const e=this.getSIWX();e&&await e.setSessions([])}}},1307:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});const s=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const s=e.charAt(r),n=s.charCodeAt(0);if(255!==t[n])throw new TypeError(s+" is ambiguous");t[n]=r}const r=e.length,s=e.charAt(0),n=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let i=0,o=0,a=0;for(;e[i]===s;)o++,i++;const c=(e.length-i)*n+1>>>0,l=new Uint8Array(c);for(;i<e.length;){const s=e.charCodeAt(i);if(s>255)return;let n=t[s];if(255===n)return;let o=0;for(let e=c-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*l[e]>>>0,l[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");a=o,i++}let u=c-a;for(;u!==c&&0===l[u];)u++;const h=new Uint8Array(o+(c-u));let d=o;for(;u!==c;)h[d++]=l[u++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,n++;const l=(c-a)*i+1>>>0,u=new Uint8Array(l);for(;a!==c;){let e=t[a],s=0;for(let t=l-1;(0!==e||s<o)&&-1!==t;t--,s++)e+=256*u[t]>>>0,u[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");o=s,a++}let h=l-o;for(;h!==l&&0===u[h];)h++;let d=s.repeat(n);for(;h<l;++h)d+=e.charAt(u[h]);return d},decodeUnsafe:o,decode:function(e){const t=o(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},1482:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});const s={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}}},1591:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},1655:(e,t,r)=>{"use strict";r.d(t,{h:()=>l});var s=r(9073),n=r(4707),i=r(5940),o=r(2733);const a=(0,s.BX)({message:"",variant:"info",open:!1}),c={state:a,subscribeKey:(e,t)=>(0,n.u$)(a,e,t),open(e,t){const{debug:r}=o.H.state,{shortMessage:s,longMessage:n}=e;r&&(a.message=s,a.variant=t,a.open=!0),n&&console.error("function"==typeof n?n():n)},close(){a.open=!1,a.message="",a.variant="info"}},l=(0,i.X)(c)},1785:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});const s={EmbeddedWalletAbortController:new AbortController,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${"undefined"!=typeof window?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}}},1861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},1871:(e,t,r)=>{"use strict";r.d(t,{P:()=>c});var s=r(9073),n=r(4707),i=r(6742);const o=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),a=(0,s.BX)({...o}),c={state:a,subscribeKey:(e,t)=>(0,n.u$)(a,e,t),showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){const t=i.w.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){a.message=o.message,a.variant=o.variant,a.svg=o.svg,a.open=o.open,a.autoClose=o.autoClose},_showMessage({message:e,svg:t,variant:r="success",autoClose:s=o.autoClose}){a.open?(a.open=!1,setTimeout((()=>{a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=s}),150)):(a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=s)}}},2010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5215).__exportStar(r(3093),t)},2063:(e,t,r)=>{"use strict";t.g=void 0;const s=r(8196);t.g=function(){let e,t;try{e=s.getDocumentOrThrow(),t=s.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const s=r[e],n=["itemprop","property","name"].map((e=>s.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(n.length&&n){const e=s.getAttribute("content");if(e)return e}}return""}const n=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),s=[];for(let e=0;e<r.length;e++){const n=r[e],i=n.getAttribute("rel");if(i&&i.toLowerCase().indexOf("icon")>-1){const e=n.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const s=t.pathname.split("/");s.pop(),r+=s.join("/")+"/"+e}s.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;s.push(r)}else s.push(e)}}return s}(),name:n}}},2618:(e,t,r)=>{"use strict";r.d(t,{WF:()=>o,AH:()=>s.AH,qy:()=>n.qy,JW:()=>n.JW,iz:()=>s.iz});var s=r(842),n=r(6752);const i=globalThis;class o extends s.mN{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,n.XX)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return n.c0}}o._$litElement$=!0,o.finalized=!0,i.litElementHydrateSupport?.({LitElement:o});const a=i.litElementPolyfillSupport;a?.({LitElement:o}),(i.litElementVersions??=[]).push("4.2.0")},2733:(e,t,r)=>{"use strict";r.d(t,{H:()=>l});var s=r(9073),n=r(4707),i=r(2944),o=r(6742);const a={getFeatureValue(e,t){const r=t?.[e];return void 0===r?i.oU.DEFAULT_FEATURES[e]:r},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(o.w.isTelegram()){if(o.w.isIos())return e.filter((e=>"google"!==e));if(o.w.isMac())return e.filter((e=>"x"!==e));if(o.w.isAndroid())return e.filter((e=>!["facebook","x"].includes(e)))}return e}},c=(0,s.BX)({features:i.oU.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:i.oU.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),l={state:c,subscribeKey:(e,t)=>(0,n.u$)(c,e,t),setOptions(e){Object.assign(c,e)},setRemoteFeatures(e){if(!e)return;const t={...c.remoteFeatures,...e};c.remoteFeatures=t,c.remoteFeatures?.socials&&(c.remoteFeatures.socials=a.filterSocialsByPlatform(c.remoteFeatures.socials))},setFeatures(e){if(!e)return;c.features||(c.features=i.oU.DEFAULT_FEATURES);const t={...c.features,...e};c.features=t},setProjectId(e){c.projectId=e},setCustomRpcUrls(e){c.customRpcUrls=e},setAllWallets(e){c.allWallets=e},setIncludeWalletIds(e){c.includeWalletIds=e},setExcludeWalletIds(e){c.excludeWalletIds=e},setFeaturedWalletIds(e){c.featuredWalletIds=e},setTokens(e){c.tokens=e},setTermsConditionsUrl(e){c.termsConditionsUrl=e},setPrivacyPolicyUrl(e){c.privacyPolicyUrl=e},setCustomWallets(e){c.customWallets=e},setIsSiweEnabled(e){c.isSiweEnabled=e},setIsUniversalProvider(e){c.isUniversalProvider=e},setSdkVersion(e){c.sdkVersion=e},setMetadata(e){c.metadata=e},setDisableAppend(e){c.disableAppend=e},setEIP6963Enabled(e){c.enableEIP6963=e},setDebug(e){c.debug=e},setEnableWalletConnect(e){c.enableWalletConnect=e},setEnableWalletGuide(e){c.enableWalletGuide=e},setEnableAuthLogger(e){c.enableAuthLogger=e},setEnableWallets(e){c.enableWallets=e},setPreferUniversalLinks(e){c.experimental_preferUniversalLinks=e},setHasMultipleAddresses(e){c.hasMultipleAddresses=e},setSIWX(e){c.siwx=e},setConnectMethodsOrder(e){c.features={...c.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){c.features={...c.features,walletFeaturesOrder:e}},setSocialsOrder(e){c.remoteFeatures={...c.remoteFeatures,socials:e}},setCollapseWallets(e){c.features={...c.features,collapseWallets:e}},setEnableEmbedded(e){c.enableEmbedded=e},setAllowUnsupportedChain(e){c.allowUnsupportedChain=e},setManualWCControl(e){c.manualWCControl=e},setEnableNetworkSwitch(e){c.enableNetworkSwitch=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach((([e,t])=>{t&&(c.defaultAccountTypes[e]=t)}))},setUniversalProviderConfigOverride(e){c.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:()=>c.universalProviderConfigOverride,getSnapshot:()=>(0,s.P9)(c)}},2944:(e,t,r)=>{"use strict";r.d(t,{Db:()=>i,oU:()=>o,tM:()=>n});const s=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",n=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],i="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",o={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:s,SECURE_SITE_DASHBOARD:`${s}/dashboard`,SECURE_SITE_FAVICON:`${s}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}}},2985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},3011:(e,t,r)=>{"use strict";function s(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function n(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");s(e.outputLen),s(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){n(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>o,DO:()=>n,Fe:()=>s,Ht:()=>a,sd:()=>i})},3093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0,t.IWatch=class{}},3096:(e,t,r)=>{"use strict";function s(e,t){return"light"===t?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}r.d(t,{o:()=>s})},3326:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});var s=r(3450),n=r(5595),i=r(7388),o=r(9177),a=r(7135);const c={createBalance(e,t){const r={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance:({hex:e,decimals:t})=>(0,a.J)(BigInt(e),t),convertAddressToCAIP10Address:(e,t)=>`${t}:${e}`,createCAIP2ChainId:(e,t)=>`${t}:${parseInt(e,16)}`,getChainIdHexFromCAIP2ChainId(e){const t=e.split(":");if(t.length<2||!t[1])return"0x0";const r=t[1],s=parseInt(r,10);return isNaN(s)?"0x0":`0x${s.toString(16)}`},isWalletGetAssetsResponse(e){return"object"==typeof e&&null!==e&&Object.values(e).every((e=>Array.isArray(e)&&e.every((e=>this.isValidAsset(e)))))},isValidAsset:e=>"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl},l={async getMyTokensWithBalance(e){const t=s.U.state.address,r=i.W.state.activeCaipNetwork;if(!t||!r)return[];if("eip155"===r.chainNamespace){const e=await this.getEIP155Balances(t,r);if(e)return this.filterLowQualityTokens(e)}const o=await n.T.getBalance(t,r.caipNetworkId,e);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(e,t){try{const r=c.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),s=await o.x.getCapabilities(e);if(!s?.[r]?.assetDiscovery?.supported)return null;const n=await o.x.walletGetAssets({account:e,chainFilter:[r]});return c.isWalletGetAssetsResponse(n)?(n[r]||[]).map((e=>c.createBalance(e,t.caipNetworkId))):null}catch(e){return null}},filterLowQualityTokens:e=>e.filter((e=>"0"!==e.quantity.decimals)),mapBalancesToSwapTokens:e=>e?.map((e=>({...e,address:e?.address?e.address:i.W.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},3337:(e,t,r)=>{"use strict";r.d(t,{j:()=>c});var s=r(9073),n=r(4707),i=r(5940);const o=(0,s.BX)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),a={state:o,subscribeNetworkImages:e=>(0,s.B1)(o.networkImages,(()=>e(o.networkImages))),subscribeKey:(e,t)=>(0,n.u$)(o,e,t),subscribe:e=>(0,s.B1)(o,(()=>e(o))),setWalletImage(e,t){o.walletImages[e]=t},setNetworkImage(e,t){o.networkImages[e]=t},setChainImage(e,t){o.chainImages[e]=t},setConnectorImage(e,t){o.connectorImages={...o.connectorImages,[e]:t}},setTokenImage(e,t){o.tokenImages[e]=t},setCurrencyImage(e,t){o.currencyImages[e]=t}},c=(0,i.X)(a)},3450:(e,t,r)=>{"use strict";r.d(t,{U:()=>d});var s=r(9073),n=r(2944),i=r(6742),o=r(5940),a=r(5595),c=r(7388),l=r(1871);const u=(0,s.BX)({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),h={state:u,replaceState(e){e&&Object.assign(u,(0,s.KR)(e))},subscribe:e=>c.W.subscribeChainProp("accountState",(t=>{if(t)return e(t)})),subscribeKey(e,t,r){let s;return c.W.subscribeChainProp("accountState",(r=>{if(r){const n=r[e];s!==n&&(s=n,t(n))}}),r)},setStatus(e,t){c.W.setAccountProp("status",e,t)},getCaipAddress:e=>c.W.getAccountProp("caipAddress",e),setCaipAddress(e,t){const r=e?i.w.getPlainAddress(e):void 0;t===c.W.state.activeChain&&(c.W.state.activeCaipAddress=e),c.W.setAccountProp("caipAddress",e,t),c.W.setAccountProp("address",r,t)},setBalance(e,t,r){c.W.setAccountProp("balance",e,r),c.W.setAccountProp("balanceSymbol",t,r)},setProfileName(e,t){c.W.setAccountProp("profileName",e,t)},setProfileImage(e,t){c.W.setAccountProp("profileImage",e,t)},setUser(e,t){c.W.setAccountProp("user",e,t)},setAddressExplorerUrl(e,t){c.W.setAccountProp("addressExplorerUrl",e,t)},setSmartAccountDeployed(e,t){c.W.setAccountProp("smartAccountDeployed",e,t)},setCurrentTab(e){c.W.setAccountProp("currentTab",e,c.W.state.activeChain)},setTokenBalance(e,t){e&&c.W.setAccountProp("tokenBalance",e,t)},setShouldUpdateToAddress(e,t){c.W.setAccountProp("shouldUpdateToAddress",e,t)},setAllAccounts(e,t){c.W.setAccountProp("allAccounts",e,t)},addAddressLabel(e,t,r){const s=c.W.getAccountProp("addressLabels",r)||new Map;s.set(e,t),c.W.setAccountProp("addressLabels",s,r)},removeAddressLabel(e,t){const r=c.W.getAccountProp("addressLabels",t)||new Map;r.delete(e),c.W.setAccountProp("addressLabels",r,t)},setConnectedWalletInfo(e,t){c.W.setAccountProp("connectedWalletInfo",e,t,!1)},setPreferredAccountType(e,t){c.W.setAccountProp("preferredAccountTypes",{...u.preferredAccountTypes,[t]:e},t)},setPreferredAccountTypes(e){u.preferredAccountTypes=e},setSocialProvider(e,t){e&&c.W.setAccountProp("socialProvider",e,t)},setSocialWindow(e,t){c.W.setAccountProp("socialWindow",e?(0,s.KR)(e):void 0,t)},setFarcasterUrl(e,t){c.W.setAccountProp("farcasterUrl",e,t)},async fetchTokenBalance(e){u.balanceLoading=!0;const t=c.W.state.activeCaipNetwork?.caipNetworkId,r=c.W.state.activeCaipNetwork?.chainNamespace,s=c.W.state.activeCaipAddress,o=s?i.w.getPlainAddress(s):void 0;if(u.lastRetry&&!i.w.isAllowedRetry(u.lastRetry,30*n.oU.ONE_SEC_MS))return u.balanceLoading=!1,[];try{if(o&&t&&r){const e=(await a.T.getBalance(o,t)).balances.filter((e=>"0"!==e.quantity.decimals));return d.setTokenBalance(e,r),u.lastRetry=void 0,u.balanceLoading=!1,e}}catch(t){u.lastRetry=Date.now(),e?.(t),l.P.showError("Token Balance Unavailable")}finally{u.balanceLoading=!1}return[]},resetAccount(e){c.W.resetAccount(e)}},d=(0,o.X)(h)},3494:(e,t,r)=>{"use strict";function s(e){return function(t){return"function"==typeof t?function(e,t){return customElements.get(e)||customElements.define(e,t),t}(e,t):function(e,t){const{kind:r,elements:s}=t;return{kind:r,elements:s,finisher(t){customElements.get(e)||customElements.define(e,t)}}}(e,t)}}r.d(t,{E:()=>s})},3495:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});var s=r(4376);const n={caipNetworkIdToNumber:e=>e?Number(e.split(":")[1]):void 0,parseEvmChainId(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:(e,t)=>e?.filter((e=>e.chainNamespace===t))||[],getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]},getNetworkNameByCaipNetworkId(e,t){if(!t)return;const r=e.find((e=>e.caipNetworkId===t));if(r)return r.name;const[n]=t.split(":");return s.o.CHAIN_NAME_MAP?.[n]||void 0}}},3554:(e,t,r)=>{"use strict";r.d(t,{h:()=>o,j:()=>i});const s=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),n=e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))};function i(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return n(e)}catch(t){return e}}function o(e){return"string"==typeof e?e:s(e)||""}},3581:function(e){e.exports=function(){"use strict";return function(e,t,r){r.updateLocale=function(e,t){var s=r.Ls[e];if(s)return(t?Object.keys(t):[]).forEach((function(e){s[e]=t[e]})),s}}}()},3612:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s={getSpacingStyles:(e,t)=>Array.isArray(e)?e[t]?`var(--wui-spacing-${e[t]})`:void 0:"string"==typeof e?`var(--wui-spacing-${e})`:void 0,getFormattedDate:e=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e),getHostName(e){try{return new URL(e).hostname}catch(e){return""}},getTruncateString:({string:e,charsStart:t,charsEnd:r,truncate:s})=>e.length<=t+r?e:"end"===s?`${e.substring(0,t)}...`:"start"===s?`...${e.substring(e.length-r)}`:`${e.substring(0,Math.floor(t))}...${e.substring(e.length-Math.floor(r))}`,generateAvatarColors(e){const t=e.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(t),s=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),n=100-3*Number(s?.replace("px","")),i=`${n}% ${n}% at 65% 40%`,o=[];for(let e=0;e<5;e+=1){const t=this.tintColor(r,.15*e);o.push(`rgb(${t[0]}, ${t[1]}, ${t[2]})`)}return`\n    --local-color-1: ${o[0]};\n    --local-color-2: ${o[1]};\n    --local-color-3: ${o[2]};\n    --local-color-4: ${o[3]};\n    --local-color-5: ${o[4]};\n    --local-radial-circle: ${i}\n   `},hexToRgb(e){const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},tintColor(e,t){const[r,s,n]=e;return[Math.round(r+(255-r)*t),Math.round(s+(255-s)*t),Math.round(n+(255-n)*t)]},isNumber:e=>/^[0-9]+$/u.test(e),getColorTheme:e=>e||("undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark"),splitBalance(e){const t=e.split(".");return 2===t.length?[t[0],t[1]]:["0","00"]},roundNumber:(e,t,r)=>e.toString().length>=t?Number(e).toFixed(r):e,formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})}},3768:(e,t,r)=>{"use strict";r.d(t,{S:()=>g});var s=1e6,n="[big.js] ",i=n+"Invalid ",o=i+"decimal places",a=i+"rounding mode",c=n+"Division by zero",l={},u=void 0,h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function d(e,t,r,s){var n=e.c;if(r===u&&(r=e.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(a);if(t<1)s=3===r&&(s||!!n[0])||0===t&&(1===r&&n[0]>=5||2===r&&(n[0]>5||5===n[0]&&(s||n[1]!==u))),n.length=1,s?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(s=1===r&&n[t]>=5||2===r&&(n[t]>5||5===n[t]&&(s||n[t+1]!==u||1&n[t-1]))||3===r&&(s||!!n[0]),n.length=t,s)for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}for(t=n.length;!n[--t];)n.pop()}return e}function p(e,t,r){var s=e.e,n=e.c.join(""),i=n.length;if(t)n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)n="0"+n;n="0."+n}else if(s>0)if(++s>i)for(s-=i;s--;)n+="0";else s<i&&(n=n.slice(0,s)+"."+n.slice(s));else i>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&r?"-"+n:n}l.abs=function(){var e=new this.constructor(this);return e.s=1,e},l.cmp=function(e){var t,r=this,s=r.c,n=(e=new r.constructor(e)).c,i=r.s,o=e.s,a=r.e,c=e.e;if(!s[0]||!n[0])return s[0]?i:n[0]?-o:0;if(i!=o)return i;if(t=i<0,a!=c)return a>c^t?1:-1;for(o=(a=s.length)<(c=n.length)?a:c,i=-1;++i<o;)if(s[i]!=n[i])return s[i]>n[i]^t?1:-1;return a==c?0:a>c^t?1:-1},l.div=function(e){var t=this,r=t.constructor,n=t.c,i=(e=new r(e)).c,a=t.s==e.s?1:-1,l=r.DP;if(l!==~~l||l<0||l>s)throw Error(o);if(!i[0])throw Error(c);if(!n[0])return e.s=a,e.c=[e.e=0],e;var h,p,f,g,m,y=i.slice(),w=h=i.length,b=n.length,v=n.slice(0,h),E=v.length,A=e,C=A.c=[],_=0,N=l+(A.e=t.e-e.e)+1;for(A.s=a,a=N<0?0:N,y.unshift(0);E++<h;)v.push(0);do{for(f=0;f<10;f++){if(h!=(E=v.length))g=h>E?1:-1;else for(m=-1,g=0;++m<h;)if(i[m]!=v[m]){g=i[m]>v[m]?1:-1;break}if(!(g<0))break;for(p=E==h?i:y;E;){if(v[--E]<p[E]){for(m=E;m&&!v[--m];)v[m]=9;--v[m],v[E]+=10}v[E]-=p[E]}for(;!v[0];)v.shift()}C[_++]=g?f:++f,v[0]&&g?v[E]=n[w]||0:v=[n[w]]}while((w++<b||v[0]!==u)&&a--);return C[0]||1==_||(C.shift(),A.e--,N--),_>N&&d(A,N,r.RM,v[0]!==u),A},l.eq=function(e){return 0===this.cmp(e)},l.gt=function(e){return this.cmp(e)>0},l.gte=function(e){return this.cmp(e)>-1},l.lt=function(e){return this.cmp(e)<0},l.lte=function(e){return this.cmp(e)<1},l.minus=l.sub=function(e){var t,r,s,n,i=this,o=i.constructor,a=i.s,c=(e=new o(e)).s;if(a!=c)return e.s=-c,i.plus(e);var l=i.c.slice(),u=i.e,h=e.c,d=e.e;if(!l[0]||!h[0])return h[0]?e.s=-c:l[0]?e=new o(i):e.s=1,e;if(a=u-d){for((n=a<0)?(a=-a,s=l):(d=u,s=h),s.reverse(),c=a;c--;)s.push(0);s.reverse()}else for(r=((n=l.length<h.length)?l:h).length,a=c=0;c<r;c++)if(l[c]!=h[c]){n=l[c]<h[c];break}if(n&&(s=l,l=h,h=s,e.s=-e.s),(c=(r=h.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;r>a;){if(l[--r]<h[r]){for(t=r;t&&!l[--t];)l[t]=9;--l[t],l[r]+=10}l[r]-=h[r]}for(;0===l[--c];)l.pop();for(;0===l[0];)l.shift(),--d;return l[0]||(e.s=1,l=[d=0]),e.c=l,e.e=d,e},l.mod=function(e){var t,r=this,s=r.constructor,n=r.s,i=(e=new s(e)).s;if(!e.c[0])throw Error(c);return r.s=e.s=1,t=1==e.cmp(r),r.s=n,e.s=i,t?new s(r):(n=s.DP,i=s.RM,s.DP=s.RM=0,r=r.div(e),s.DP=n,s.RM=i,this.minus(r.times(e)))},l.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},l.plus=l.add=function(e){var t,r,s,n=this,i=n.constructor;if(e=new i(e),n.s!=e.s)return e.s=-e.s,n.minus(e);var o=n.e,a=n.c,c=e.e,l=e.c;if(!a[0]||!l[0])return l[0]||(a[0]?e=new i(n):e.s=n.s),e;if(a=a.slice(),t=o-c){for(t>0?(c=o,s=l):(t=-t,s=a),s.reverse();t--;)s.push(0);s.reverse()}for(a.length-l.length<0&&(s=l,l=a,a=s),t=l.length,r=0;t;a[t]%=10)r=(a[--t]=a[t]+l[t]+r)/10|0;for(r&&(a.unshift(r),++c),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=c,e},l.pow=function(e){var t=this,r=new t.constructor("1"),s=r,n=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(i+"exponent");for(n&&(e=-e);1&e&&(s=s.times(t)),e>>=1;)t=t.times(t);return n?r.div(s):s},l.prec=function(e,t){if(e!==~~e||e<1||e>s)throw Error(i+"precision");return d(new this.constructor(this),e,t)},l.round=function(e,t){if(e===u)e=0;else if(e!==~~e||e<-s||e>s)throw Error(o);return d(new this.constructor(this),e+this.e+1,t)},l.sqrt=function(){var e,t,r,s=this,i=s.constructor,o=s.s,a=s.e,c=new i("0.5");if(!s.c[0])return new i(s);if(o<0)throw Error(n+"No square root");0===(o=Math.sqrt(+p(s,!0,!0)))||o===1/0?((t=s.c.join("")).length+a&1||(t+="0"),a=((a+1)/2|0)-(a<0||1&a),e=new i(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+a)):e=new i(o+""),a=e.e+(i.DP+=4);do{r=e,e=c.times(r.plus(s.div(r)))}while(r.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return d(e,(i.DP-=4)+e.e+1,i.RM)},l.times=l.mul=function(e){var t,r=this,s=r.constructor,n=r.c,i=(e=new s(e)).c,o=n.length,a=i.length,c=r.e,l=e.e;if(e.s=r.s==e.s?1:-1,!n[0]||!i[0])return e.c=[e.e=0],e;for(e.e=c+l,o<a&&(t=n,n=i,i=t,l=o,o=a,a=l),t=new Array(l=o+a);l--;)t[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=t[l]+i[c]*n[l-c-1]+a,t[l--]=a%10,a=a/10|0;t[l]=a}for(a?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},l.toExponential=function(e,t){var r=this,n=r.c[0];if(e!==u){if(e!==~~e||e<0||e>s)throw Error(o);for(r=d(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return p(r,!0,!!n)},l.toFixed=function(e,t){var r=this,n=r.c[0];if(e!==u){if(e!==~~e||e<0||e>s)throw Error(o);for(e=e+(r=d(new r.constructor(r),e+r.e+1,t)).e+1;r.c.length<e;)r.c.push(0)}return p(r,!1,!!n)},l[Symbol.for("nodejs.util.inspect.custom")]=l.toJSON=l.toString=function(){var e=this,t=e.constructor;return p(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},l.toNumber=function(){var e=+p(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(n+"Imprecise conversion");return e},l.toPrecision=function(e,t){var r=this,n=r.constructor,o=r.c[0];if(e!==u){if(e!==~~e||e<1||e>s)throw Error(i+"precision");for(r=d(new n(r),e,t);r.c.length<e;)r.c.push(0)}return p(r,e<=r.e||r.e<=n.NE||r.e>=n.PE,!!o)},l.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(n+"valueOf disallowed");return p(e,e.e<=t.NE||e.e>=t.PE,!0)};const f=function e(){function t(r){var s=this;if(!(s instanceof t))return r===u?e():new t(r);if(r instanceof t)s.s=r.s,s.e=r.e,s.c=r.c.slice();else{if("string"!=typeof r){if(!0===t.strict&&"bigint"!=typeof r)throw TypeError(i+"value");r=0===r&&1/r<0?"-0":String(r)}!function(e,t){var r,s,n;if(!h.test(t))throw Error(i+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),n=t.length,s=0;s<n&&"0"==t.charAt(s);)++s;if(s==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=r-s-1,e.c=[],r=0;s<=n;)e.c[r++]=+t.charAt(s++)}}(s,r)}s.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),g={bigNumber:e=>new f(e||0),multiply(e,t){if(void 0===e||void 0===t)return new f(0);const r=new f(e),s=new f(t);return r.times(s)},formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}),parseLocalStringToNumber:e=>void 0===e?0:parseFloat(e.replace(/,/gu,""))}},4013:(e,t,r)=>{"use strict";r.d(t,{A:()=>Aw});var s={};r.r(s),r.d(s,{identity:()=>ci});var n={};r.r(n),r.d(n,{base2:()=>li});var i={};r.r(i),r.d(i,{base8:()=>ui});var o={};r.r(o),r.d(o,{base10:()=>hi});var a={};r.r(a),r.d(a,{base16:()=>di,base16upper:()=>pi});var c={};r.r(c),r.d(c,{base32:()=>fi,base32hex:()=>wi,base32hexpad:()=>vi,base32hexpadupper:()=>Ei,base32hexupper:()=>bi,base32pad:()=>mi,base32padupper:()=>yi,base32upper:()=>gi,base32z:()=>Ai});var l={};r.r(l),r.d(l,{base36:()=>Ci,base36upper:()=>_i});var u={};r.r(u),r.d(u,{base58btc:()=>Ni,base58flickr:()=>Ii});var h={};r.r(h),r.d(h,{base64:()=>Si,base64pad:()=>Ti,base64url:()=>Pi,base64urlpad:()=>Oi});var d={};r.r(d),r.d(d,{base256emoji:()=>Ui});var p={};r.r(p),r.d(p,{sha256:()=>ro,sha512:()=>so});var f={};r.r(f),r.d(f,{identity:()=>io});var g={};r.r(g),r.d(g,{code:()=>ao,decode:()=>lo,encode:()=>co,name:()=>oo});var m={};r.r(m),r.d(m,{code:()=>fo,decode:()=>mo,encode:()=>go,name:()=>po});var y=r(7007),w=r.n(y),b=r(8900);class v{}class E extends v{constructor(e){super()}}const A=b.FIVE_SECONDS,C="heartbeat_pulse";class _ extends E{constructor(e){super(e),this.events=new y.EventEmitter,this.interval=A,this.interval=e?.interval||A}static async init(e){const t=new _(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,b.toMiliseconds)(this.interval))}pulse(){this.events.emit(C)}}const N=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,I=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,S=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function T(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function P(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!S.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(N.test(e)||I.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,T)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function O(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function x(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return x(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const k="base64:";function R(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function U(...e){return R(e.join(":"))}function D(e){return(e=R(e))?e+":":""}const B=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function L(e={}){const t={mounts:{"":e.driver||B()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},s=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),n=(e,r)=>{if(t.watching){r=R(r);for(const s of t.watchListeners)s(e,r)}},i=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,s)=>{const n=new Map,i=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(const s of e){const e="string"==typeof s,n=R(e?s:s.key),o=e?void 0:s.value,a=e||!s.options?t:{...t,...s.options},c=r(n);i(c).items.push({key:n,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...n.values()].map((e=>s(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=R(e);const{relativeKey:s,driver:n}=r(e);return O(n.hasItem,s,t)},getItem(e,t={}){e=R(e);const{relativeKey:s,driver:n}=r(e);return O(n.getItem,s,t).then((e=>P(e)))},getItems:(e,t={})=>o(e,t,(e=>e.driver.getItems?O(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:U(e.base,t.key),value:P(t.value)}))))):Promise.all(e.items.map((t=>O(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:P(e)})))))))),getItemRaw(e,t={}){e=R(e);const{relativeKey:s,driver:n}=r(e);return n.getItemRaw?O(n.getItemRaw,s,t):O(n.getItem,s,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(k)?(t=e.slice(7),globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),(e=>e.codePointAt(0)))):e;var t}(e)))},async setItem(e,t,s={}){if(void 0===t)return a.removeItem(e);e=R(e);const{relativeKey:i,driver:o}=r(e);o.setItem&&(await O(o.setItem,i,x(t),s),o.watch||n("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return O(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:x(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>O(e.driver.setItem,t.relativeKey,x(t.value),t.options))))}))},async setItemRaw(e,t,s={}){if(void 0===t)return a.removeItem(e,s);e=R(e);const{relativeKey:i,driver:o}=r(e);if(o.setItemRaw)await O(o.setItemRaw,i,t,s);else{if(!o.setItem)return;await O(o.setItem,i,function(e){return"string"==typeof e?e:k+(t=e,globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t)));var t}(t),s)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=R(e);const{relativeKey:s,driver:i}=r(e);i.removeItem&&(await O(i.removeItem,s,t),(t.removeMeta||t.removeMata)&&await O(i.removeItem,s+"$",t),i.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=R(e);const{relativeKey:s,driver:n}=r(e),i=Object.create(null);if(n.getMeta&&Object.assign(i,await O(n.getMeta,s,t)),!t.nativeOnly){const e=await O(n.getItem,s+"$",t).then((e=>P(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(i,e))}return i},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=D(e);const r=s(e,!0);let n=[];const i=[];let o=!0;for(const e of r){e.driver.flags?.maxDepth||(o=!1);const r=await O(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+R(t);n.some((e=>r.startsWith(e)))||i.push(r)}n=[e.mountpoint,...n.filter((t=>!t.startsWith(e.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return i.filter((r=>(!a||function(e,t){if(void 0===t)return!0;let r=0,s=e.indexOf(":");for(;s>-1;)r++,s=e.indexOf(":",s+1);return r<=t}(r,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(r,e)))},async clear(e,t={}){e=D(e),await Promise.all(s(e,!1).map((async e=>{if(e.driver.clear)return O(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>j(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await M(t.mounts[e],n,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await i()}),async unwatch(){t.watchListeners=[],await i()},mount(e,r){if((e=D(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(M(r,n,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=D(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await j(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=R(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>(e=R(e),s(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))),keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,r={})=>a.setItem(e,t,r),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function M(e,t,r){return e.watch?e.watch(((e,s)=>t(e,r+s))):()=>{}}async function j(e){"function"==typeof e.dispose&&await O(e.dispose)}function F(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function H(e,t){let r;return(s,n)=>(()=>{if(r)return r;const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(t),r=F(s),r.then((e=>{e.onclose=()=>r=void 0}),(()=>{})),r})().then((e=>n(e.transaction(t,s).objectStore(t))))}let $;function W(){return $||($=H("keyval-store","keyval")),$}function z(e,t=W()){return t("readonly",(t=>F(t.get(e))))}var q=r(3554),V=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let s;return e.dbName&&e.storeName&&(s=H(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await z(r(e),s)>"u"),getItem:async e=>await z(r(e),s)??null,setItem:(e,t)=>function(e,t,r=W()){return r("readwrite",(r=>(r.put(t,e),F(r.transaction))))}(r(e),t,s),removeItem:e=>function(e,t=W()){return t("readwrite",(t=>(t.delete(e),F(t.transaction))))}(r(e),s),getKeys:()=>function(e=W()){return e("readonly",(e=>{if(e.getAllKeys)return F(e.getAllKeys());const t=[];return function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},F(e.transaction)}(e,(e=>t.push(e.key))).then((()=>t))}))}(s),clear:()=>function(e=W()){return e("readwrite",(e=>(e.clear(),F(e.transaction))))}(s)}};class G{constructor(){this.indexedDb=L({driver:V({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,q.h)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var K=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{},J={exports:{}};function Q(e){var t;return[e[0],(0,q.j)(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof K<"u"&&K.localStorage?J.exports=K.localStorage:typeof window<"u"&&window.localStorage?J.exports=window.localStorage:J.exports=new t}();class Z{constructor(){this.localStorage=J.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Q)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return(0,q.j)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,q.h)(t))}async removeItem(e){this.localStorage.removeItem(e)}}class Y{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new Z;this.storage=e;try{(async(e,t,r)=>{const s="wc_storage_version",n=await t.getItem(s);if(n&&n>=1)return void r(t);const i=await e.getKeys();if(!i.length)return void r(t);const o=[];for(;i.length;){const r=i.shift();if(!r)continue;const s=r.toLowerCase();if(s.includes("wc@")||s.includes("walletconnect")||s.includes("wc_")||s.includes("wallet_connect")){const s=await e.getItem(r);await t.setItem(r,s),o.push(r)}}await t.setItem(s,1),r(t),(async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))})(e,o)})(e,new G,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var X=r(9838),ee=Object.defineProperty,te=(e,t,r)=>((e,t,r)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class re extends v{constructor(e){super(),this.opts=e,te(this,"protocol","wc"),te(this,"version",2)}}var se=Object.defineProperty;class ne extends v{constructor(e,t){super(),this.core=e,this.logger=t,((e,t,r)=>{((e,t,r)=>{t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"records",new Map)}}class ie{constructor(e,t){this.logger=e,this.core=t}}class oe extends v{constructor(e,t){super(),this.relayer=e,this.logger=t}}class ae extends v{constructor(e){super()}}class ce{constructor(e,t,r,s){this.core=e,this.logger=t,this.name=r}}Object.defineProperty;class le extends v{constructor(e,t){super(),this.relayer=e,this.logger=t}}class ue extends v{constructor(e,t){super(),this.core=e,this.logger=t}}class he{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class de{constructor(e,t){this.projectId=e,this.logger=t}}class pe{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var fe=Object.defineProperty,ge=(e,t,r)=>((e,t,r)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);w();class me{constructor(e){this.opts=e,ge(this,"protocol","wc"),ge(this,"version",2)}}y.EventEmitter;class ye{constructor(e){this.client=e}}function we(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function be(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const ve="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Ee=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Ae(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),we(e),e}class Ce{clone(){return this._cloneInto()}}function _e(e=32){if(ve&&"function"==typeof ve.getRandomValues)return ve.getRandomValues(new Uint8Array(e));if(ve&&"function"==typeof ve.randomBytes)return ve.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class Ne extends Ce{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ee(this.buffer)}update(e){be(this);const{view:t,buffer:r,blockLen:s}=this,n=(e=Ae(e)).length;for(let i=0;i<n;){const o=Math.min(s-this.pos,n-i);if(o!==s)r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=Ee(e);for(;s<=n-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){be(this),function(e,t){we(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:n}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let e=i;e<s;e++)t[e]=0;(function(e,t,r,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,s);const n=BigInt(32),i=BigInt(4294967295),o=Number(r>>n&i),a=Number(r&i),c=s?4:0,l=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+l,a,s)})(r,s-8,BigInt(8*this.length),n),this.process(r,0);const o=Ee(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:n,destroyed:i,pos:o}=this;return e.length=s,e.pos=o,e.finished=n,e.destroyed=i,s%t&&e.buffer.set(r),e}}const Ie=BigInt(2**32-1),Se=BigInt(32);function Te(e,t=!1){return t?{h:Number(e&Ie),l:Number(e>>Se&Ie)}:{h:0|Number(e>>Se&Ie),l:0|Number(e&Ie)}}const Pe=function(e,t=!1){let r=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:i,l:o}=Te(e[n],t);[r[n],s[n]]=[i,o]}return[r,s]},Oe=(e,t,r)=>e>>>r,xe=(e,t,r)=>e<<32-r|t>>>r,ke=(e,t,r)=>e>>>r|t<<32-r,Re=(e,t,r)=>e<<32-r|t>>>r,Ue=(e,t,r)=>e<<64-r|t>>>r-32,De=(e,t,r)=>e>>>r-32|t<<64-r,Be=function(e,t,r,s){const n=(t>>>0)+(s>>>0);return{h:e+r+(n/2**32|0)|0,l:0|n}},Le=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Me=(e,t,r,s)=>t+r+s+(e/2**32|0)|0,je=(e,t,r,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),Fe=(e,t,r,s,n)=>t+r+s+n+(e/2**32|0)|0,He=(e,t,r,s,n,i)=>t+r+s+n+i+(e/2**32|0)|0,$e=(e,t,r,s,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0)+(n>>>0),[We,ze]=Pe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),qe=new Uint32Array(80),Ve=new Uint32Array(80);class Ge extends Ne{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:n,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,s,n,i,o,a,c,l,u,h,d,p,f,g]}set(e,t,r,s,n,i,o,a,c,l,u,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|s,this.Ch=0|n,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)qe[r]=e.getUint32(t),Ve[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|qe[e-15],r=0|Ve[e-15],s=ke(t,r,1)^ke(t,r,8)^Oe(t,r,7),n=Re(t,r,1)^Re(t,r,8)^xe(t,r,7),i=0|qe[e-2],o=0|Ve[e-2],a=ke(i,o,19)^Ue(i,o,61)^Oe(i,o,6),c=Re(i,o,19)^De(i,o,61)^xe(i,o,6),l=je(n,c,Ve[e-7],Ve[e-16]),u=Fe(l,s,a,qe[e-7],qe[e-16]);qe[e]=0|u,Ve[e]=0|l}let{Ah:r,Al:s,Bh:n,Bl:i,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:p,Gh:f,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=ke(u,h,14)^ke(u,h,18)^Ue(u,h,41),w=Re(u,h,14)^Re(u,h,18)^De(u,h,41),b=u&d^~u&f,v=$e(y,w,h&p^~h&g,ze[e],Ve[e]),E=He(v,m,t,b,We[e],qe[e]),A=0|v,C=ke(r,s,28)^Ue(r,s,34)^Ue(r,s,39),_=Re(r,s,28)^De(r,s,34)^De(r,s,39),N=r&n^r&o^n&o,I=s&i^s&a^i&a;m=0|f,y=0|g,f=0|d,g=0|p,d=0|u,p=0|h,({h:u,l:h}=Be(0|c,0|l,0|E,0|A)),c=0|o,l=0|a,o=0|n,a=0|i,n=0|r,i=0|s;const S=Le(A,_,I);r=Me(S,E,C,N),s=0|S}({h:r,l:s}=Be(0|this.Ah,0|this.Al,0|r,0|s)),({h:n,l:i}=Be(0|this.Bh,0|this.Bl,0|n,0|i)),({h:o,l:a}=Be(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=Be(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Be(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:p}=Be(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:g}=Be(0|this.Gh,0|this.Gl,0|f,0|g)),({h:m,l:y}=Be(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,s,n,i,o,a,c,l,u,h,d,p,f,g,m,y)}roundClean(){qe.fill(0),Ve.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ke=function(e){const t=t=>e().update(Ae(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new Ge)),Je=BigInt(0),Qe=BigInt(1),Ze=BigInt(2);function Ye(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Xe(e){if(!Ye(e))throw new Error("Uint8Array expected")}function et(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const tt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function rt(e){Xe(e);let t="";for(let r=0;r<e.length;r++)t+=tt[e[r]];return t}function st(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Je:BigInt("0x"+e)}function nt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function it(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){const r=nt(e.charCodeAt(n)),i=nt(e.charCodeAt(n+1));if(void 0===r||void 0===i){const t=e[n]+e[n+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+n)}s[t]=16*r+i}return s}function ot(e){return Xe(e),st(rt(Uint8Array.from(e).reverse()))}function at(e,t){return it(e.toString(16).padStart(2*t,"0"))}function ct(e,t){return at(e,t).reverse()}function lt(e,t,r){let s;if("string"==typeof t)try{s=it(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Ye(t))throw new Error(e+" must be hex string or Uint8Array");s=Uint8Array.from(t)}const n=s.length;if("number"==typeof r&&n!==r)throw new Error(e+" of length "+r+" expected, got "+n);return s}function ut(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Xe(s),t+=s.length}const r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r}const ht=e=>"bigint"==typeof e&&Je<=e;function dt(e,t,r,s){if(!function(e,t,r){return ht(e)&&ht(t)&&ht(r)&&t<=e&&e<r}(t,r,s))throw new Error("expected valid "+e+": "+r+" <= n < "+s+", got "+t)}const pt=e=>(Ze<<BigInt(e-1))-Qe,ft={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Ye(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function gt(e,t,r={}){const s=(t,r,s)=>{const n=ft[r];if("function"!=typeof n)throw new Error("invalid validator function");const i=e[t];if(!(s&&void 0===i||n(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(const[e,r]of Object.entries(t))s(e,r,!1);for(const[e,t]of Object.entries(r))s(e,t,!0);return e}function mt(e){const t=new WeakMap;return(r,...s)=>{const n=t.get(r);if(void 0!==n)return n;const i=e(r,...s);return t.set(r,i),i}}const yt=BigInt(0),wt=BigInt(1),bt=BigInt(2),vt=BigInt(3),Et=BigInt(4),At=BigInt(5),Ct=BigInt(8);function _t(e,t){const r=e%t;return r>=yt?r:t+r}function Nt(e,t,r){if(t<yt)throw new Error("invalid exponent, negatives unsupported");if(r<=yt)throw new Error("invalid modulus");if(r===wt)return yt;let s=wt;for(;t>yt;)t&wt&&(s=s*e%r),e=e*e%r,t>>=wt;return s}function It(e,t,r){let s=e;for(;t-- >yt;)s*=s,s%=r;return s}function St(e,t){if(e===yt)throw new Error("invert: expected non-zero number");if(t<=yt)throw new Error("invert: expected positive modulus, got "+t);let r=_t(e,t),s=t,n=yt,i=wt;for(;r!==yt;){const e=s%r,t=n-i*(s/r);s=r,r=e,n=i,i=t}if(s!==wt)throw new Error("invert: does not exist");return _t(n,t)}const Tt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pt(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ot(e,t,r=!1,s={}){if(e<=yt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:n,nByteLength:i}=Pt(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:n,BYTES:i,MASK:pt(n),ZERO:yt,ONE:wt,create:t=>_t(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return yt<=t&&t<e},is0:e=>e===yt,isOdd:e=>(e&wt)===wt,neg:t=>_t(-t,e),eql:(e,t)=>e===t,sqr:t=>_t(t*t,e),add:(t,r)=>_t(t+r,e),sub:(t,r)=>_t(t-r,e),mul:(t,r)=>_t(t*r,e),pow:(e,t)=>function(e,t,r){if(r<yt)throw new Error("invalid exponent, negatives unsupported");if(r===yt)return e.ONE;if(r===wt)return t;let s=e.ONE,n=t;for(;r>yt;)r&wt&&(s=e.mul(s,n)),n=e.sqr(n),r>>=wt;return s}(a,e,t),div:(t,r)=>_t(t*St(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>St(t,e),sqrt:s.sqrt||(t=>(o||(o=function(e){if(e%Et===vt){const t=(e+wt)/Et;return function(e,r){const s=e.pow(r,t);if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}if(e%Ct===At){const t=(e-At)/Ct;return function(e,r){const s=e.mul(r,bt),n=e.pow(s,t),i=e.mul(r,n),o=e.mul(e.mul(i,bt),n),a=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-wt)/bt;let r,s,n;for(r=e-wt,s=0;r%bt===yt;r/=bt,s++);for(n=bt;n<e&&Nt(n,t,e)!==e-wt;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===s){const t=(e+wt)/Et;return function(e,r){const s=e.pow(r,t);if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}const i=(r+wt)/bt;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=s,c=e.pow(e.mul(e.ONE,n),r),l=e.pow(o,i),u=e.pow(o,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,wt<<BigInt(a-t-1));c=e.sqr(r),l=e.mul(l,r),u=e.mul(u,c),a=t}return l}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),s=t.reduce(((t,s,n)=>e.is0(s)?t:(r[n]=t,e.mul(t,s))),e.ONE),n=e.inv(s);return t.reduceRight(((t,s,n)=>e.is0(s)?t:(r[n]=e.mul(t,r[n]),e.mul(t,s))),n),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?ct(e,i):at(e,i),fromBytes:e=>{if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);return r?ot(e):function(e){return st(rt(e))}(e)}});return Object.freeze(a)}const xt=BigInt(0),kt=BigInt(1);function Rt(e,t){const r=t.negate();return e?r:t}function Ut(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Dt(e,t){return Ut(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Bt=new WeakMap,Lt=new WeakMap;function Mt(e){return Lt.get(e)||1}const jt=BigInt(0),Ft=BigInt(1),Ht=BigInt(2),$t=BigInt(8),Wt={zip215:!0};BigInt(0),BigInt(1);const zt=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),qt=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Vt=BigInt(1),Gt=BigInt(2);BigInt(3);const Kt=BigInt(5),Jt=BigInt(8);const Qt=Ot(zt,void 0,!0),Zt=function(e){const t=function(e){const t=function(e){return function(e){gt(e,Tt.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),gt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pt(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}(e);return gt(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:s,prehash:n,hash:i,randomBytes:o,nByteLength:a,h:c}=t,l=Ht<<BigInt(8*a)-Ft,u=r.create,h=Ot(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch{return{isValid:!1,value:jt}}}),p=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if(et("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){dt("coordinate "+e,t,jt,l)}function m(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const y=mt(((e,t)=>{const{ex:s,ey:n,ez:i}=e,o=e.is0();null==t&&(t=o?$t:r.inv(i));const a=u(s*t),c=u(n*t),l=u(i*t);if(o)return{x:jt,y:Ft};if(l!==Ft)throw new Error("invZ was invalid");return{x:a,y:c}})),w=mt((e=>{const{a:r,d:s}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:n,ey:i,ez:o,et:a}=e,c=u(n*n),l=u(i*i),h=u(o*o),d=u(h*h),p=u(c*r);if(u(h*u(p+l))!==u(d+u(s*u(c*l))))throw new Error("bad point: equation left != right (1)");if(u(n*i)!==u(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,r,s){this.ex=e,this.ey=t,this.ez=r,this.et=s,g("x",e),g("y",t),g("z",r),g("t",s),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,Ft,u(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static msm(e,t){return function(e,t,r,s){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(s,t),r.length!==s.length)throw new Error("arrays of points and scalars must have equal length");const n=e.ZERO,i=function(e){let t;for(t=0;e>Je;e>>=Qe,t+=1);return t}(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(n);let l=n;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(n);for(let t=0;t<s.length;t++){const n=s[t],i=Number(n>>BigInt(e)&BigInt(a));c[i]=c[i].add(r[t])}let t=n;for(let e=c.length-1,r=n;e>0;e--)r=r.add(c[e]),t=t.add(r);if(l=l.add(t),0!==e)for(let e=0;e<o;e++)l=l.double()}return l}(b,h,e,t)}_setWindowSize(e){A.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){m(e);const{ex:t,ey:r,ez:s}=this,{ex:n,ey:i,ez:o}=e,a=u(t*o),c=u(n*s),l=u(r*o),h=u(i*s);return a===c&&l===h}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:e}=t,{ex:r,ey:s,ez:n}=this,i=u(r*r),o=u(s*s),a=u(Ht*u(n*n)),c=u(e*i),l=r+s,h=u(u(l*l)-i-o),d=c+o,p=d-a,f=c-o,g=u(h*p),m=u(d*f),y=u(h*f),w=u(p*d);return new b(g,m,w,y)}add(e){m(e);const{a:r,d:s}=t,{ex:n,ey:i,ez:o,et:a}=this,{ex:c,ey:l,ez:h,et:d}=e;if(r===BigInt(-1)){const e=u((i-n)*(l+c)),t=u((i+n)*(l-c)),r=u(t-e);if(r===jt)return this.double();const s=u(o*Ht*d),p=u(a*Ht*h),f=p+s,g=t+e,m=p-s,y=u(f*r),w=u(g*m),v=u(f*m),E=u(r*g);return new b(y,w,E,v)}const p=u(n*c),f=u(i*l),g=u(a*s*d),y=u(o*h),w=u((n+i)*(c+l)-p-f),v=y-g,E=y+g,A=u(f-r*p),C=u(w*v),_=u(E*A),N=u(w*A),I=u(v*E);return new b(C,_,I,N)}subtract(e){return this.add(e.negate())}wNAF(e){return A.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;dt("scalar",t,Ft,s);const{p:r,f:n}=this.wNAF(t);return b.normalizeZ([r,n])[0]}multiplyUnsafe(e,t=b.ZERO){const r=e;return dt("scalar",r,jt,s),r===jt?E:this.is0()||r===Ft?this:A.wNAFCachedUnsafe(this,r,b.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,s).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===Ft?this:this.multiplyUnsafe(e)}static fromHex(e,s=!1){const{d:n,a:i}=t,o=r.BYTES;e=lt("pointHex",e,o),et("zip215",s);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const h=ot(a),p=s?l:r.ORDER;dt("pointHex.y",h,jt,p);const f=u(h*h),g=u(f-Ft),m=u(n*f-i);let{isValid:y,value:w}=d(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const v=(w&Ft)===Ft,E=!!(128&c);if(!s&&w===jt&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==v&&(w=u(-w)),b.fromAffine({x:w,y:h})}static fromPrivateKey(e){return N(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),s=ct(t,r.BYTES);return s[s.length-1]|=e&Ft?128:0,s}toHex(){return rt(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,Ft,u(t.Gx*t.Gy)),b.ZERO=new b(jt,Ft,Ft,jt);const{BASE:v,ZERO:E}=b,A=function(e,t){return{constTimeNegate:Rt,hasPrecomputes:e=>1!==Mt(e),unsafeLadder(t,r,s=e.ZERO){let n=t;for(;r>xt;)r&kt&&(s=s.add(n)),n=n.double(),r>>=kt;return s},precomputeWindow(e,r){const{windows:s,windowSize:n}=Dt(r,t),i=[];let o=e,a=o;for(let e=0;e<s;e++){a=o,i.push(a);for(let e=1;e<n;e++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(r,s,n){const{windows:i,windowSize:o}=Dt(r,t);let a=e.ZERO,c=e.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<i;e++){const t=e*o;let r=Number(n&l);n>>=h,r>o&&(r-=u,n+=kt);const i=t,d=t+Math.abs(r)-1,p=e%2!=0,f=r<0;0===r?c=c.add(Rt(p,s[i])):a=a.add(Rt(f,s[d]))}return{p:a,f:c}},wNAFUnsafe(r,s,n,i=e.ZERO){const{windows:o,windowSize:a}=Dt(r,t),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(n===xt)break;let r=Number(n&c);if(n>>=u,r>a&&(r-=l,n+=kt),0===r)continue;let o=s[t+Math.abs(r)-1];r<0&&(o=o.negate()),i=i.add(o)}return i},getPrecomputes(e,t,r){let s=Bt.get(t);return s||(s=this.precomputeWindow(t,e),1!==e&&Bt.set(t,r(s))),s},wNAFCached(e,t,r){const s=Mt(e);return this.wNAF(s,this.getPrecomputes(s,e,r),t)},wNAFCachedUnsafe(e,t,r,s){const n=Mt(e);return 1===n?this.unsafeLadder(e,t,s):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,s)},setWindowSize(e,r){Ut(r,t),Lt.set(e,r),Bt.delete(e)}}}(b,8*a);function C(e){return _t(e,s)}function _(e){return C(ot(e))}function N(e){const t=r.BYTES;e=lt("private key",e,t);const s=lt("hashed private key",i(e),2*t),n=p(s.slice(0,t)),o=s.slice(t,2*t),a=_(n),c=v.multiply(a),l=c.toRawBytes();return{head:n,prefix:o,scalar:a,point:c,pointBytes:l}}function I(e=new Uint8Array,...t){const r=ut(...t);return _(i(f(r,lt("context",e),!!n)))}const S=Wt;return v._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return N(e).pointBytes},sign:function(e,t,i={}){e=lt("message",e),n&&(e=n(e));const{prefix:o,scalar:a,pointBytes:c}=N(t),l=I(i.context,o,e),u=v.multiply(l).toRawBytes(),h=C(l+I(i.context,u,c,e)*a);return dt("signature.s",h,jt,s),lt("result",ut(u,ct(h,r.BYTES)),2*r.BYTES)},verify:function(e,t,s,i=S){const{context:o,zip215:a}=i,c=r.BYTES;e=lt("signature",e,2*c),t=lt("message",t),s=lt("publicKey",s,c),void 0!==a&&et("zip215",a),n&&(t=n(t));const l=ot(e.slice(c,2*c));let u,h,d;try{u=b.fromHex(s,a),h=b.fromHex(e.slice(0,c),a),d=v.multiplyUnsafe(l)}catch{return!1}if(!a&&u.isSmallOrder())return!1;const p=I(o,h.toRawBytes(),u.toRawBytes(),t);return h.add(u.multiplyUnsafe(p)).subtract(d).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:N,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Qt,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Jt,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ke,randomBytes:_e,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){const r=zt,s=_t(t*t*t,r),n=function(e){const t=BigInt(10),r=BigInt(20),s=BigInt(40),n=BigInt(80),i=zt,o=e*e%i*e%i,a=It(o,Gt,i)*o%i,c=It(a,Vt,i)*e%i,l=It(c,Kt,i)*c%i,u=It(l,t,i)*l%i,h=It(u,r,i)*u%i,d=It(h,s,i)*h%i,p=It(d,n,i)*d%i,f=It(p,n,i)*d%i,g=It(f,t,i)*l%i;return{pow_p_5_8:It(g,Gt,i)*e%i,b2:o}}(e*_t(s*s*t,r)).pow_p_5_8;let i=_t(e*s*n,r);const o=_t(t*i*i,r),a=i,c=_t(i*qt,r),l=o===e,u=o===_t(-e,r),h=o===_t(-e*qt,r);return l&&(i=a),(u||h)&&(i=c),((e,t)=>(_t(e,t)&wt)===wt)(i,r)&&(i=_t(-i,r)),{isValid:l||u,value:i}}}),Yt=".",Xt="base64url",er="utf8",tr="utf8",rr="did",sr="key",nr="base58btc";function ir(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function or(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?ir(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ar(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=or(t);let s=0;for(const t of e)r.set(t,s),s+=t.length;return ir(r)}var cr=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var s=0,n=0;e[t]===c;)s++,t++;for(var i=(e.length-t)*l+1>>>0,o=new Uint8Array(i);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var p=i-n;p!==i&&0===o[p];)p++;for(var f=new Uint8Array(s+(i-p)),g=s;p!==i;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,s=0,n=0,i=t.length;n!==i&&0===t[n];)n++,r++;for(var o=(i-n)*u+1>>>0,l=new Uint8Array(o);n!==i;){for(var h=t[n],d=0,p=o-1;(0!==h||d<s)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,n++}for(var f=o-s;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const lr=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class ur{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hr{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return pr(this,e)}}class dr{constructor(e){this.decoders=e}or(e){return pr(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pr=(e,t)=>new dr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class fr{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new ur(e,t,r),this.decoder=new hr(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const gr=({name:e,prefix:t,encode:r,decode:s})=>new fr(e,t,r,s),mr=({prefix:e,name:t,alphabet:r})=>{const{encode:s,decode:n}=cr(r,t);return gr({prefix:e,name:t,encode:s,decode:e=>lr(n(e))})},yr=({name:e,prefix:t,bitsPerChar:r,alphabet:s})=>gr({prefix:t,name:e,encode:e=>((e,t,r)=>{const s="="===t[t.length-1],n=(1<<r)-1;let i="",o=0,a=0;for(let s=0;s<e.length;++s)for(a=a<<8|e[s],o+=8;o>r;)o-=r,i+=t[n&a>>o];if(o&&(i+=t[n&a<<r-o]),s)for(;i.length*r&7;)i+="=";return i})(e,s,r),decode:t=>((e,t,r,s)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let t=0;t<i;++t){const i=n[e[t]];if(void 0===i)throw new SyntaxError(`Non-${s} character`);c=c<<r|i,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,s,r,e)}),wr=gr({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var br=Object.freeze({__proto__:null,identity:wr});const vr=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Er=Object.freeze({__proto__:null,base2:vr});const Ar=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Cr=Object.freeze({__proto__:null,base8:Ar});const _r=mr({prefix:"9",name:"base10",alphabet:"0123456789"});var Nr=Object.freeze({__proto__:null,base10:_r});const Ir=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sr=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Tr=Object.freeze({__proto__:null,base16:Ir,base16upper:Sr});const Pr=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Or=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xr=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kr=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rr=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ur=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dr=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Br=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lr=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Mr=Object.freeze({__proto__:null,base32:Pr,base32upper:Or,base32pad:xr,base32padupper:kr,base32hex:Rr,base32hexupper:Ur,base32hexpad:Dr,base32hexpadupper:Br,base32z:Lr});const jr=mr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fr=mr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Hr=Object.freeze({__proto__:null,base36:jr,base36upper:Fr});const $r=mr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wr=mr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var zr=Object.freeze({__proto__:null,base58btc:$r,base58flickr:Wr});const qr=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Vr=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Gr=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kr=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Jr=Object.freeze({__proto__:null,base64:qr,base64pad:Vr,base64url:Gr,base64urlpad:Kr});const Qr=Array.from(""),Zr=Qr.reduce(((e,t,r)=>(e[r]=t,e)),[]),Yr=Qr.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Xr=gr({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Zr[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Yr[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var es=Object.freeze({__proto__:null,base256emoji:Xr}),ts=128,rs=-128,ss=Math.pow(2,31),ns=128,is=127,os=Math.pow(2,7),as=Math.pow(2,14),cs=Math.pow(2,21),ls=Math.pow(2,28),us=Math.pow(2,35),hs=Math.pow(2,42),ds=Math.pow(2,49),ps=Math.pow(2,56),fs=Math.pow(2,63),gs={encode:function e(t,r,s){r=r||[];for(var n=s=s||0;t>=ss;)r[s++]=255&t|ts,t/=128;for(;t&rs;)r[s++]=255&t|ts,t>>>=7;return r[s]=0|t,e.bytes=s-n+1,r},decode:function e(t,r){var s,n=0,i=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");s=t[o++],n+=i<28?(s&is)<<i:(s&is)*Math.pow(2,i),i+=7}while(s>=ns);return e.bytes=o-r,n},encodingLength:function(e){return e<os?1:e<as?2:e<cs?3:e<ls?4:e<us?5:e<hs?6:e<ds?7:e<ps?8:e<fs?9:10}},ms=gs;const ys=(e,t,r=0)=>(ms.encode(e,t,r),t),ws=e=>ms.encodingLength(e),bs=(e,t)=>{const r=t.byteLength,s=ws(e),n=s+ws(r),i=new Uint8Array(n+r);return ys(e,i,0),ys(r,i,s),i.set(t,n),new vs(e,r,t,i)};class vs{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const Es=({name:e,code:t,encode:r})=>new As(e,t,r);class As{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?bs(this.code,t):t.then((e=>bs(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Cs=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),_s=Es({name:"sha2-256",code:18,encode:Cs("SHA-256")}),Ns=Es({name:"sha2-512",code:19,encode:Cs("SHA-512")});Object.freeze({__proto__:null,sha256:_s,sha512:Ns});const Is=lr,Ss={code:0,name:"identity",encode:Is,digest:e=>bs(0,Is(e))};Object.freeze({__proto__:null,identity:Ss}),new TextEncoder,new TextDecoder;const Ts={...br,...Er,...Cr,...Nr,...Tr,...Mr,...Hr,...zr,...Jr,...es};function Ps(e,t,r,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:s}}}const Os=Ps("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),xs=Ps("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=or((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ks={utf8:Os,"utf-8":Os,hex:Ts.base16,latin1:xs,ascii:xs,binary:xs,...Ts};function Rs(e,t="utf8"){const r=ks[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Us(e,t="utf8"){const r=ks[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):ir(globalThis.Buffer.from(e,"utf-8"))}function Ds(e){return(0,q.j)(Rs(Us(e,Xt),er))}function Bs(e){return Rs(Us((0,q.h)(e),er),Xt)}function Ls(e){const t="z"+Rs(ar([Us("K36",nr),e]),nr);return[rr,sr,t].join(":")}function Ms(e){return Rs(e,Xt)}function js(e){const t=e.split(Yt),r=Ds(t[0]),s=Ds(t[1]),n=function(e){return Us(e,Xt)}(t[2]);return{header:r,payload:s,signature:n,data:Us(t.slice(0,2).join(Yt),tr)}}function Fs(e=_e(32)){const t=Zt.getPublicKey(e);return{secretKey:ar([e,t]),publicKey:t}}var Hs=function(e,t,r){if(r||2===arguments.length)for(var s,n=0,i=t.length;n<i;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},$s=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},Ws=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},zs=function(e,t,r,s){this.name=e,this.version=t,this.os=r,this.bot=s,this.type="bot-device"},qs=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Vs=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Gs=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ks=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Js=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Qs(e){var t=function(e){return""!==e&&Ks.reduce((function(t,r){var s=r[0],n=r[1];if(t)return t;var i=n.exec(e);return!!i&&[s,i]}),!1)}(e);if(!t)return null;var r=t[0],s=t[1];if("searchbot"===r)return new qs;var n=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);n?n.length<3&&(n=Hs(Hs([],n,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-n.length),!0)):n=[];var i=n.join("."),o=function(e){for(var t=0,r=Js.length;t<r;t++){var s=Js[t],n=s[0];if(s[1].exec(e))return n}return null}(e),a=Gs.exec(e);return a&&a[1]?new zs(r,i,o,a[1]):new $s(r,i,o)}var Zs=r(8196),Ys=r(2063);const Xs="2.23.2";let en=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,tn=`viem@${Xs}`;class rn extends Error{constructor(e,t={}){const r=t.cause instanceof rn?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof rn&&t.cause.docsPath||t.docsPath,n=en?.({...t,docsPath:s});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...tn?[`Version: ${tn}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=Xs}walk(e){return sn(this,e)}}function sn(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?sn(e.cause,t):t?null:e}function nn(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class on extends rn{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function an(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const s=e.replace("0x","");if(s.length>2*r)throw new on({size:Math.ceil(s.length/2),targetSize:r,type:"hex"});return`0x${s["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new on({size:e.length,targetSize:r,type:"bytes"});const s=new Uint8Array(r);for(let n=0;n<r;n++){const i="right"===t;s[i?n:r-n-1]=e[i?n:e.length-n-1]}return s}(e,{dir:t,size:r})}class cn extends rn{constructor({max:e,min:t,signed:r,size:s,value:n}){super(`Number "${n}" is not in safe ${s?`${8*s}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class ln extends rn{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function un(e){return nn(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function hn(e,{size:t}){if(un(e)>t)throw new ln({givenSize:un(e),maxSize:t})}function dn(e,t={}){const{signed:r}=t;t.size&&hn(e,{size:t.size});const s=BigInt(e);if(!r)return s;const n=(e.length-2)/2;return s<=(1n<<8n*BigInt(n)-1n)-1n?s:s-BigInt(`0x${"f".padStart(2*n,"f")}`)-1n}const pn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function fn(e,t={}){return"number"==typeof e||"bigint"==typeof e?mn(e,t):"string"==typeof e?function(e,t={}){return gn(yn.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;return"number"==typeof t.size?(hn(r,{size:t.size}),an(r,{size:t.size})):r}(e,t):gn(e,t)}function gn(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=pn[e[t]];const s=`0x${r}`;return"number"==typeof t.size?(hn(s,{size:t.size}),an(s,{dir:"right",size:t.size})):s}function mn(e,t={}){const{signed:r,size:s}=t,n=BigInt(e);let i;s?i=r?(1n<<8n*BigInt(s)-1n)-1n:2n**(8n*BigInt(s))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof i&&r?-i-1n:0;if(i&&n>i||n<o){const t="bigint"==typeof e?"n":"";throw new cn({max:i?`${i}${t}`:void 0,min:`${o}${t}`,signed:r,size:s,value:`${e}${t}`})}const a=`0x${(r&&n<0?(1n<<BigInt(8*s))+BigInt(n):n).toString(16)}`;return s?an(a,{size:s}):a}const yn=new TextEncoder,wn=new TextEncoder;const bn={zero:48,nine:57,A:65,F:70,a:97,f:102};function vn(e){return e>=bn.zero&&e<=bn.nine?e-bn.zero:e>=bn.A&&e<=bn.F?e-(bn.A-10):e>=bn.a&&e<=bn.f?e-(bn.a-10):void 0}function En(e,t={}){let r=e;t.size&&(hn(r,{size:t.size}),r=an(r,{dir:"right",size:t.size}));let s=r.slice(2);s.length%2&&(s=`0${s}`);const n=s.length/2,i=new Uint8Array(n);for(let e=0,t=0;e<n;e++){const r=vn(s.charCodeAt(t++)),n=vn(s.charCodeAt(t++));if(void 0===r||void 0===n)throw new rn(`Invalid byte sequence ("${s[t-2]}${s[t-1]}" in "${s}").`);i[e]=16*r+n}return i}function An(e,t={}){const r=wn.encode(e);return"number"==typeof t.size?(hn(r,{size:t.size}),an(r,{dir:"right",size:t.size})):r}var Cn=r(3011);const _n=BigInt(2**32-1),Nn=BigInt(32);function In(e,t=!1){return t?{h:Number(e&_n),l:Number(e>>Nn&_n)}:{h:0|Number(e>>Nn&_n),l:0|Number(e&_n)}}function Sn(e,t=!1){let r=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:i,l:o}=In(e[n],t);[r[n],s[n]]=[i,o]}return[r,s]}var Tn=r(5824);const Pn=[],On=[],xn=[],kn=BigInt(0),Rn=BigInt(1),Un=BigInt(2),Dn=BigInt(7),Bn=BigInt(256),Ln=BigInt(113);for(let e=0,t=Rn,r=1,s=0;e<24;e++){[r,s]=[s,(2*r+3*s)%5],Pn.push(2*(5*s+r)),On.push((e+1)*(e+2)/2%64);let n=kn;for(let e=0;e<7;e++)t=(t<<Rn^(t>>Dn)*Ln)%Bn,t&Un&&(n^=Rn<<(Rn<<BigInt(e))-Rn);xn.push(n)}const[Mn,jn]=Sn(xn,!0),Fn=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),Hn=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class $n extends Tn.Vw{constructor(e,t,r,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Cn.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Tn.DH)(this.state)}keccak(){Tn.qv||(0,Tn.Fc)(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,n=(t+2)%10,i=r[n],o=r[n+1],a=Fn(i,o,1)^r[s],c=Hn(i,o,1)^r[s+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){const s=On[r],i=Fn(t,n,s),o=Hn(t,n,s),a=Pn[r];t=e[a],n=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)r[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~r[(s+2)%10]&r[(s+4)%10]}e[0]^=Mn[s],e[1]^=jn[s]}r.fill(0)}(this.state32,this.rounds),Tn.qv||(0,Tn.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Cn.CC)(this);const{blockLen:t,state:r}=this,s=(e=(0,Tn.ZJ)(e)).length;for(let n=0;n<s;){const i=Math.min(t-this.pos,s-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,128&t&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){(0,Cn.CC)(this,!1),(0,Cn.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,n=e.length;s<n;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,n-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Cn.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Cn.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:n,enableXOF:i}=this;return e||(e=new $n(t,r,s,i,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const Wn=((e,t,r)=>(0,Tn.ld)((()=>new $n(t,e,r))))(1,136,32);function zn(e,t){const r=t||"hex",s=Wn(nn(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return En(mn(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const r=new Uint8Array(1);return r[0]=Number(e),"number"==typeof t.size?(hn(r,{size:t.size}),an(r,{size:t.size})):r}(e,t):nn(e)?En(e,t):An(e,t)}(e):e);return"bytes"===r?s:fn(s)}class qn extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Vn=new qn(8192);function Gn(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function Kn({hash:e,signature:t}){return s=await async function({hash:e,signature:t}){const s=nn(e)?e:fn(e),{secp256k1:n}=await r.e(4437).then(r.bind(r,4437)),i=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:r,v:s,yParity:i}=t,o=Gn(Number(i??s));return new n.Signature(dn(e),dn(r)).addRecoveryBit(o)}const e=nn(t)?t:fn(t),r=Gn(function(e,t={}){return Number(dn(e,t))}(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})();return`0x${i.recoverPublicKey(s.substring(2)).toHex(!1)}`}({hash:e,signature:t}),function(e,t){if(Vn.has(`${e}.${t}`))return Vn.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),s=zn(An(r),"bytes"),n=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&s[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());const i=`0x${n.join("")}`;return Vn.set(`${e}.${t}`,i),i}(`0x${zn(`0x${s.substring(4)}`).substring(26)}`);var s}var Jn=r(1307);function Qn(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Zn(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=Qn(t);let s=0;for(const t of e)r.set(t,s),s+=t.length;return r}const Yn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var s=0,n=0;e[t]===c;)s++,t++;for(var i=(e.length-t)*l+1>>>0,o=new Uint8Array(i);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var p=i-n;p!==i&&0===o[p];)p++;for(var f=new Uint8Array(s+(i-p)),g=s;p!==i;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,s=0,n=0,i=t.length;n!==i&&0===t[n];)n++,r++;for(var o=(i-n)*u+1>>>0,l=new Uint8Array(o);n!==i;){for(var h=t[n],d=0,p=o-1;(0!==h||d<s)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,n++}for(var f=o-s;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},Xn=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class ei{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ti{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return si(this,e)}}class ri{constructor(e){this.decoders=e}or(e){return si(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const si=(e,t)=>new ri({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ni{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new ei(e,t,r),this.decoder=new ti(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ii=({name:e,prefix:t,encode:r,decode:s})=>new ni(e,t,r,s),oi=({prefix:e,name:t,alphabet:r})=>{const{encode:s,decode:n}=Yn(r,t);return ii({prefix:e,name:t,encode:s,decode:e=>Xn(n(e))})},ai=({name:e,prefix:t,bitsPerChar:r,alphabet:s})=>ii({prefix:t,name:e,encode:e=>((e,t,r)=>{const s="="===t[t.length-1],n=(1<<r)-1;let i="",o=0,a=0;for(let s=0;s<e.length;++s)for(a=a<<8|e[s],o+=8;o>r;)o-=r,i+=t[n&a>>o];if(o&&(i+=t[n&a<<r-o]),s)for(;i.length*r&7;)i+="=";return i})(e,s,r),decode:t=>((e,t,r,s)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let t=0;t<i;++t){const i=n[e[t]];if(void 0===i)throw new SyntaxError(`Non-${s} character`);c=c<<r|i,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,s,r,e)}),ci=ii({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),li=ai({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ui=ai({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),hi=oi({prefix:"9",name:"base10",alphabet:"0123456789"}),di=ai({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pi=ai({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),fi=ai({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),gi=ai({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),mi=ai({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yi=ai({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wi=ai({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),bi=ai({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vi=ai({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ei=ai({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ai=ai({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ci=oi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_i=oi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ni=oi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ii=oi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Si=ai({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ti=ai({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pi=ai({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Oi=ai({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),xi=Array.from(""),ki=xi.reduce(((e,t,r)=>(e[r]=t,e)),[]),Ri=xi.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Ui=ii({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+ki[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Ri[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Di=128,Bi=-128,Li=Math.pow(2,31),Mi=Math.pow(2,7),ji=Math.pow(2,14),Fi=Math.pow(2,21),Hi=Math.pow(2,28),$i=Math.pow(2,35),Wi=Math.pow(2,42),zi=Math.pow(2,49),qi=Math.pow(2,56),Vi=Math.pow(2,63);const Gi=function e(t,r,s){r=r||[];for(var n=s=s||0;t>=Li;)r[s++]=255&t|Di,t/=128;for(;t&Bi;)r[s++]=255&t|Di,t>>>=7;return r[s]=0|t,e.bytes=s-n+1,r},Ki=function(e){return e<Mi?1:e<ji?2:e<Fi?3:e<Hi?4:e<$i?5:e<Wi?6:e<zi?7:e<qi?8:e<Vi?9:10},Ji=(e,t,r=0)=>(Gi(e,t,r),t),Qi=e=>Ki(e),Zi=(e,t)=>{const r=t.byteLength,s=Qi(e),n=s+Qi(r),i=new Uint8Array(n+r);return Ji(e,i,0),Ji(r,i,s),i.set(t,n),new Yi(e,r,t,i)};class Yi{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const Xi=({name:e,code:t,encode:r})=>new eo(e,t,r);class eo{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Zi(this.code,t):t.then((e=>Zi(this.code,e)))}throw Error("Unknown type, must be binary type")}}const to=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ro=Xi({name:"sha2-256",code:18,encode:to("SHA-256")}),so=Xi({name:"sha2-512",code:19,encode:to("SHA-512")}),no=Xn,io={code:0,name:"identity",encode:no,digest:e=>Zi(0,no(e))},oo="raw",ao=85,co=e=>Xn(e),lo=e=>Xn(e),uo=new TextEncoder,ho=new TextDecoder,po="json",fo=512,go=e=>uo.encode(JSON.stringify(e)),mo=e=>JSON.parse(ho.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const yo={...s,...n,...i,...o,...a,...c,...l,...u,...h,...d};function wo(e,t,r,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:s}}}const bo=wo("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),vo=wo("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Qn((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Eo={utf8:bo,"utf-8":bo,hex:yo.base16,latin1:vo,ascii:vo,binary:vo,...yo};function Ao(e,t="utf8"){const r=Eo[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function Co(e,t="utf8"){const r=Eo[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const _o={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function No(e){const[t,r]=e.split(":");return{namespace:t,reference:r}}function Io(e,t){return e.includes(":")?[e]:t.chains||[]}var So=Object.defineProperty,To=Object.defineProperties,Po=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,xo=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,Ro=(e,t,r)=>t in e?So(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Uo=(e,t)=>{for(var r in t||(t={}))xo.call(t,r)&&Ro(e,r,t[r]);if(Oo)for(var r of Oo(t))ko.call(t,r)&&Ro(e,r,t[r]);return e};const Do="react-native",Bo="browser",Lo="js";function Mo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function jo(){return!(0,Zs.getDocument)()&&!!(0,Zs.getNavigator)()&&"ReactNative"===navigator.product}function Fo(){return!Mo()&&!!(0,Zs.getNavigator)()&&!!(0,Zs.getDocument)()}function Ho(){return jo()?Do:Mo()?"node":Fo()?Bo:"unknown"}function $o(){var e;try{return jo()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Application)<"u"?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function Wo(){return(0,Ys.g)()||{name:"",description:"",url:"",icons:[""]}}function zo(e,t,s){const n=function(){if(Ho()===Do&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"){const{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}const e=t?Qs(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Vs:"undefined"!=typeof navigator?Qs(navigator.userAgent):"undefined"!=typeof process&&process.version?new Ws(process.version.slice(1)):null;var t;if(null===e)return"unknown";const s=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[s,e.name,e.version].join("-"):[s,e.version].join("-")}(),i=function(){var e;const t=Ho();return t===Bo?[t,(null==(e=(0,Zs.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Lo,s].join("-"),n,i].join("/")}function qo(e,t){return e.filter((e=>t.includes(e))).length===e.length}function Vo(e){return Object.fromEntries(e.entries())}function Go(e){return new Map(Object.entries(e))}function Ko(e=b.FIVE_MINUTES,t){const r=(0,b.toMiliseconds)(e||b.FIVE_MINUTES);let s,n,i,o;return{resolve:e=>{i&&s&&(clearTimeout(i),s(e),o=Promise.resolve(e))},reject:e=>{i&&n&&(clearTimeout(i),n(e))},done:()=>new Promise(((e,a)=>{if(o)return e(o);i=setTimeout((()=>{const e=new Error(t);o=Promise.reject(e),a(e)}),r),s=e,n=a}))}}function Jo(e,t,r){return new Promise((async(s,n)=>{const i=setTimeout((()=>n(new Error(r))),t);try{s(await e)}catch(e){n(e)}clearTimeout(i)}))}function Qo(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Zo(e){const[t,r]=e.split(":"),s={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)s.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);s.id=Number(r)}return s}function Yo(e,t){return(0,b.fromMiliseconds)((t||Date.now())+(0,b.toMiliseconds)(e))}function Xo(e){return Date.now()>=(0,b.toMiliseconds)(e)}function ea(e,t){return`${e}${t?`:${t}`:""}`}function ta(e=[],t=[]){return[...new Set([...e,...t])]}function ra(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),s=r.indexOf(t);return r[s+2]}function sa(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function na(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function ia(e){return Buffer.from(e,"base64").toString("utf-8")}function oa(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function aa(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ca(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");oa(e.outputLen),oa(e.blockLen)}function la(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ua(e,t){aa(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const ha=BigInt(2**32-1),da=BigInt(32);function pa(e,t=!1){return t?{h:Number(e&ha),l:Number(e>>da&ha)}:{h:0|Number(e>>da&ha),l:0|Number(e&ha)}}const fa="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function ga(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ma(e,t){return e<<32-t|e>>>t}const ya=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function wa(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function ba(e){for(let t=0;t<e.length;t++)e[t]=wa(e[t])}function va(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),aa(e),e}class Ea{clone(){return this._cloneInto()}}function Aa(e){const t=t=>e().update(va(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Ca(e=32){if(fa&&"function"==typeof fa.getRandomValues)return fa.getRandomValues(new Uint8Array(e));if(fa&&"function"==typeof fa.randomBytes)return fa.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const _a=[],Na=[],Ia=[],Sa=BigInt(0),Ta=BigInt(1),Pa=BigInt(2),Oa=BigInt(7),xa=BigInt(256),ka=BigInt(113);for(let e=0,t=Ta,r=1,s=0;e<24;e++){[r,s]=[s,(2*r+3*s)%5],_a.push(2*(5*s+r)),Na.push((e+1)*(e+2)/2%64);let n=Sa;for(let e=0;e<7;e++)t=(t<<Ta^(t>>Oa)*ka)%xa,t&Pa&&(n^=Ta<<(Ta<<BigInt(e))-Ta);Ia.push(n)}const[Ra,Ua]=function(e,t=!1){let r=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:i,l:o}=pa(e[n],t);[r[n],s[n]]=[i,o]}return[r,s]}(Ia,!0),Da=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),Ba=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class La extends Ea{constructor(e,t,r,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,oa(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){ya||ba(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,n=(t+2)%10,i=r[n],o=r[n+1],a=Da(i,o,1)^r[s],c=Ba(i,o,1)^r[s+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){const s=Na[r],i=Da(t,n,s),o=Ba(t,n,s),a=_a[r];t=e[a],n=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)r[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~r[(s+2)%10]&r[(s+4)%10]}e[0]^=Ra[s],e[1]^=Ua[s]}r.fill(0)}(this.state32,this.rounds),ya||ba(this.state32),this.posOut=0,this.pos=0}update(e){la(this);const{blockLen:t,state:r}=this,s=(e=va(e)).length;for(let n=0;n<s;){const i=Math.min(t-this.pos,s-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,!!(128&t)&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){la(this,!1),aa(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,n=e.length;s<n;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,n-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return oa(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ua(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:n,enableXOF:i}=this;return e||(e=new La(t,r,s,i,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const Ma=Aa((()=>new La(136,1,32)));function ja(e){const t=`Ethereum Signed Message:\n${e.length}`,r=(new TextEncoder).encode(t+e);return"0x"+Buffer.from(Ma(r)).toString("hex")}var Fa=Object.defineProperty,Ha=Object.defineProperties,$a=Object.getOwnPropertyDescriptors,Wa=Object.getOwnPropertySymbols,za=Object.prototype.hasOwnProperty,qa=Object.prototype.propertyIsEnumerable,Va=(e,t,r)=>t in e?Fa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ga=e=>e?.split(":"),Ka=e=>{const t=e&&Ga(e);if(t)return t[2]+":"+t[3]},Ja=e=>{const t=e&&Ga(e);if(t)return t.pop()};async function Qa(e){const{cacao:t,projectId:r}=e,{s,p:n}=t,i=Za(n,n.iss),o=Ja(n.iss);return await async function(e,t,r,s,n,i){switch(r.t){case"eip191":return await async function(e,t,r){return(await Kn({hash:ja(t),signature:r})).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await async function(e,t,r,s,n,i){const o=No(s);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${s}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),u=o+ja(t).substring(2)+a+c+l,h=await fetch(`${i||"https://rpc.walletconnect.org/v1"}/?chainId=${s}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:u},"latest"]})}),{result:d}=await h.json();return!!d&&d.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}(e,t,r.s,s,n,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}(o,i,s,Ka(n.iss),r)}const Za=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,s=Ja(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0;const i=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${(e=>{const t=e&&Ga(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,f=ic(e.resources);return f&&(n=function(e="",t){Ya(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const s=[];let n=0;return Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const i={};r.forEach((e=>{i[e.ability]||(i[e.ability]=[]),i[e.ability].push(e.action)}));const o=Object.keys(i).map((t=>(n++,`(${n}) '${t}': '${i[t].join("', '")}' for '${e}'.`)));s.push(o.join(", ").replace(".,","."))})),`${e?e+" ":""}${r}${s.join(" ")}`}(n,tc(f))),[r,s,"",n,"",i,o,a,c,l,u,h,d,p].filter((e=>null!=e)).join("\n")};function Ya(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function Xa(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const s=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...s)}function ec(e){return Ya(e),`urn:recap:${function(e){return Buffer.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function tc(e){const t=function(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return Ya(t),t}function rc(e,t){const r=function(e,t){Ya(e),Ya(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),s={att:{}};return r.forEach((r=>{var n,i;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(i=t.att)?void 0:i[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((n=>{var i,o;s.att[r]=((e,t)=>Ha(e,$a(t)))(((e,t)=>{for(var r in t||(t={}))za.call(t,r)&&Va(e,r,t[r]);if(Wa)for(var r of Wa(t))qa.call(t,r)&&Va(e,r,t[r]);return e})({},s.att[r]),{[n]:(null==(i=e.att[r])?void 0:i[n])||(null==(o=t.att[r])?void 0:o[n])})}))})),s}(tc(e),tc(t));return ec(r)}function sc(e){var t;const r=tc(e);Ya(r);const s=null==(t=r.att)?void 0:t.eip155;return s?Object.keys(s).map((e=>e.split("/")[1])):[]}function nc(e){const t=tc(e);Ya(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function ic(e){if(!e)return;const t=e?.[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}function oc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ac(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function cc(e,...t){if(!ac(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function lc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function uc(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}const hc=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function dc(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!ac(e))throw new Error("Uint8Array expected, got "+typeof e);e=gc(e)}return e}function pc(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function fc(e,t,r,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,s);const n=BigInt(32),i=BigInt(4294967295),o=Number(r>>n&i),a=Number(r&i),c=s?4:0,l=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+l,a,s)}function gc(e){return Uint8Array.from(e)}function mc(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const yc=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),wc=yc("expand 16-byte k"),bc=yc("expand 32-byte k"),vc=hc(wc),Ec=hc(bc);function Ac(e,t){return e<<t|e>>>32-t}function Cc(e){return e.byteOffset%4==0}const _c=2**32-1,Nc=new Uint32Array,Ic=(e,t)=>255&e[t++]|(255&e[t++])<<8;class Sc{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,cc(e=dc(e),32);const t=Ic(e,0),r=Ic(e,2),s=Ic(e,4),n=Ic(e,6),i=Ic(e,8),o=Ic(e,10),a=Ic(e,12),c=Ic(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|s<<6),this.r[3]=8191&(s>>>7|n<<9),this.r[4]=255&(n>>>4|i<<12),this.r[5]=i>>>1&8190,this.r[6]=8191&(i>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=Ic(e,16+2*t)}process(e,t,r=!1){const s=r?0:2048,{h:n,r:i}=this,o=i[0],a=i[1],c=i[2],l=i[3],u=i[4],h=i[5],d=i[6],p=i[7],f=i[8],g=i[9],m=Ic(e,t+0),y=Ic(e,t+2),w=Ic(e,t+4),b=Ic(e,t+6),v=Ic(e,t+8),E=Ic(e,t+10),A=Ic(e,t+12),C=Ic(e,t+14);let _=n[0]+(8191&m),N=n[1]+(8191&(m>>>13|y<<3)),I=n[2]+(8191&(y>>>10|w<<6)),S=n[3]+(8191&(w>>>7|b<<9)),T=n[4]+(8191&(b>>>4|v<<12)),P=n[5]+(v>>>1&8191),O=n[6]+(8191&(v>>>14|E<<2)),x=n[7]+(8191&(E>>>11|A<<5)),k=n[8]+(8191&(A>>>8|C<<8)),R=n[9]+(C>>>5|s),U=0,D=U+_*o+N*(5*g)+I*(5*f)+S*(5*p)+T*(5*d);U=D>>>13,D&=8191,D+=P*(5*h)+O*(5*u)+x*(5*l)+k*(5*c)+R*(5*a),U+=D>>>13,D&=8191;let B=U+_*a+N*o+I*(5*g)+S*(5*f)+T*(5*p);U=B>>>13,B&=8191,B+=P*(5*d)+O*(5*h)+x*(5*u)+k*(5*l)+R*(5*c),U+=B>>>13,B&=8191;let L=U+_*c+N*a+I*o+S*(5*g)+T*(5*f);U=L>>>13,L&=8191,L+=P*(5*p)+O*(5*d)+x*(5*h)+k*(5*u)+R*(5*l),U+=L>>>13,L&=8191;let M=U+_*l+N*c+I*a+S*o+T*(5*g);U=M>>>13,M&=8191,M+=P*(5*f)+O*(5*p)+x*(5*d)+k*(5*h)+R*(5*u),U+=M>>>13,M&=8191;let j=U+_*u+N*l+I*c+S*a+T*o;U=j>>>13,j&=8191,j+=P*(5*g)+O*(5*f)+x*(5*p)+k*(5*d)+R*(5*h),U+=j>>>13,j&=8191;let F=U+_*h+N*u+I*l+S*c+T*a;U=F>>>13,F&=8191,F+=P*o+O*(5*g)+x*(5*f)+k*(5*p)+R*(5*d),U+=F>>>13,F&=8191;let H=U+_*d+N*h+I*u+S*l+T*c;U=H>>>13,H&=8191,H+=P*a+O*o+x*(5*g)+k*(5*f)+R*(5*p),U+=H>>>13,H&=8191;let $=U+_*p+N*d+I*h+S*u+T*l;U=$>>>13,$&=8191,$+=P*c+O*a+x*o+k*(5*g)+R*(5*f),U+=$>>>13,$&=8191;let W=U+_*f+N*p+I*d+S*h+T*u;U=W>>>13,W&=8191,W+=P*l+O*c+x*a+k*o+R*(5*g),U+=W>>>13,W&=8191;let z=U+_*g+N*f+I*p+S*d+T*h;U=z>>>13,z&=8191,z+=P*u+O*l+x*c+k*a+R*o,U+=z>>>13,z&=8191,U=(U<<2)+U|0,U=U+D|0,D=8191&U,U>>>=13,B+=U,n[0]=D,n[1]=B,n[2]=L,n[3]=M,n[4]=j,n[5]=F,n[6]=H,n[7]=$,n[8]=W,n[9]=z}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=s,s=e[t]>>>13,e[t]&=8191;e[0]+=5*s,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+s,s=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^s)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let i=e[0]+t[0];e[0]=65535&i;for(let r=1;r<8;r++)i=(e[r]+t[r]|0)+(i>>>16)|0,e[r]=65535&i;mc(r)}update(e){lc(this);const{buffer:t,blockLen:r}=this,s=(e=dc(e)).length;for(let n=0;n<s;){const i=Math.min(r-this.pos,s-n);if(i!==r)t.set(e.subarray(n,n+i),this.pos),this.pos+=i,n+=i,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=s-n;n+=r)this.process(e,n)}return this}destroy(){mc(this.h,this.r,this.buffer,this.pad)}digestInto(e){lc(this),function(e,t){cc(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:s}=this;if(s){for(t[s++]=1;s<16;s++)t[s]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const Tc=function(e){const t=(t,r)=>e(r).update(dc(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new Sc(e))),Pc=function(e){const{allowShortKeys:t,extendNonceFn:r,counterLength:s,counterRight:n,rounds:i}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t)}(0,{counterRight:!1,counterLength:4,allowShortKeys:!1});return oc(s),oc(i),uc(n),uc(t),(o,a,c,l,u=0)=>{cc(o),cc(a),cc(c);const h=c.length;if(void 0===l&&(l=new Uint8Array(h)),cc(l),oc(u),u<0||u>=_c)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);const d=[];let p,f,g=o.length;if(32===g)d.push(p=gc(o)),f=Ec;else{if(16!==g||!t)throw new Error(`arx: invalid 32-byte key, got length=${g}`);p=new Uint8Array(32),p.set(o),p.set(o,16),f=vc,d.push(p)}Cc(a)||d.push(a=gc(a));const m=hc(p);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(f,m,hc(a.subarray(0,16)),m),a=a.subarray(16)}const y=16-s;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,n?0:12-a.length),a=e,d.push(a)}const w=hc(a);return function(e,t,r,s,n,i,o,a){const c=n.length,l=new Uint8Array(64),u=hc(l),h=Cc(n)&&Cc(i),d=h?hc(n):Nc,p=h?hc(i):Nc;for(let f=0;f<c;o++){if(e(t,r,s,u,o,a),o>=_c)throw new Error("arx: counter overflow");const g=Math.min(64,c-f);if(h&&64===g){const e=f/4;if(f%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<16;r++)t=e+r,p[t]=d[t]^u[r];f+=64}else{for(let e,t=0;t<g;t++)e=f+t,i[e]=n[e]^l[t];f+=g}}}(e,f,m,w,c,l,u,i),mc(...d),l}}((function(e,t,r,s,n,i=20){let o=e[0],a=e[1],c=e[2],l=e[3],u=t[0],h=t[1],d=t[2],p=t[3],f=t[4],g=t[5],m=t[6],y=t[7],w=n,b=r[0],v=r[1],E=r[2],A=o,C=a,_=c,N=l,I=u,S=h,T=d,P=p,O=f,x=g,k=m,R=y,U=w,D=b,B=v,L=E;for(let e=0;e<i;e+=2)A=A+I|0,U=Ac(U^A,16),O=O+U|0,I=Ac(I^O,12),A=A+I|0,U=Ac(U^A,8),O=O+U|0,I=Ac(I^O,7),C=C+S|0,D=Ac(D^C,16),x=x+D|0,S=Ac(S^x,12),C=C+S|0,D=Ac(D^C,8),x=x+D|0,S=Ac(S^x,7),_=_+T|0,B=Ac(B^_,16),k=k+B|0,T=Ac(T^k,12),_=_+T|0,B=Ac(B^_,8),k=k+B|0,T=Ac(T^k,7),N=N+P|0,L=Ac(L^N,16),R=R+L|0,P=Ac(P^R,12),N=N+P|0,L=Ac(L^N,8),R=R+L|0,P=Ac(P^R,7),A=A+S|0,L=Ac(L^A,16),k=k+L|0,S=Ac(S^k,12),A=A+S|0,L=Ac(L^A,8),k=k+L|0,S=Ac(S^k,7),C=C+T|0,U=Ac(U^C,16),R=R+U|0,T=Ac(T^R,12),C=C+T|0,U=Ac(U^C,8),R=R+U|0,T=Ac(T^R,7),_=_+P|0,D=Ac(D^_,16),O=O+D|0,P=Ac(P^O,12),_=_+P|0,D=Ac(D^_,8),O=O+D|0,P=Ac(P^O,7),N=N+I|0,B=Ac(B^N,16),x=x+B|0,I=Ac(I^x,12),N=N+I|0,B=Ac(B^N,8),x=x+B|0,I=Ac(I^x,7);let M=0;s[M++]=o+A|0,s[M++]=a+C|0,s[M++]=c+_|0,s[M++]=l+N|0,s[M++]=u+I|0,s[M++]=h+S|0,s[M++]=d+T|0,s[M++]=p+P|0,s[M++]=f+O|0,s[M++]=g+x|0,s[M++]=m+k|0,s[M++]=y+R|0,s[M++]=w+U|0,s[M++]=b+D|0,s[M++]=v+B|0,s[M++]=E+L|0})),Oc=new Uint8Array(16),xc=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(Oc.subarray(r))},kc=new Uint8Array(32);function Rc(e,t,r,s,n){const i=e(t,r,kc),o=Tc.create(i);n&&xc(o,n),xc(o,s);const a=new Uint8Array(16),c=(e=>new DataView(e.buffer,e.byteOffset,e.byteLength))(a);fc(c,0,BigInt(n?n.length:0),!0),fc(c,8,BigInt(s.length),!0),o.update(a);const l=o.digest();return mc(i,a),l}const Uc=((e,t)=>{function r(r,...s){if(cc(r),void 0!==e.nonceLength){const t=s[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?cc(t):cc(t,e.nonceLength)}const n=e.tagLength;n&&void 0!==s[1]&&cc(s[1]);const i=t(r,...s),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");cc(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,cc(e),o(i.encrypt.length,t),i.encrypt(e,t)},decrypt(e,t){if(cc(e),n&&e.length<n)throw new Error("invalid ciphertext length: smaller than tagLength="+n);return o(i.decrypt.length,t),i.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(Dc=Pc,(e,t,r)=>({encrypt(s,n){const i=s.length;(n=pc(i+16,n,!1)).set(s);const o=n.subarray(0,-16);Dc(e,t,o,o,1);const a=Rc(Dc,e,t,o,r);return n.set(a,i),mc(a),n},decrypt(s,n){n=pc(s.length-16,n,!1);const i=s.subarray(0,-16),o=s.subarray(-16),a=Rc(Dc,e,t,i,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let s=0;s<e.length;s++)r|=e[s]^t[s];return 0===r}(o,a))throw new Error("invalid tag");return n.set(s.subarray(0,-16)),Dc(e,t,n,n,1),mc(a),n}})));var Dc;class Bc extends Ea{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ca(e);const r=va(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,n=new Uint8Array(s);n.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return la(this),this.iHash.update(e),this}digestInto(e){la(this),aa(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:n,blockLen:i,outputLen:o}=this;return e.finished=s,e.destroyed=n,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Lc=(e,t,r)=>new Bc(e,t).update(r).digest();Lc.create=(e,t)=>new Bc(e,t);const Mc=new Uint8Array([0]),jc=new Uint8Array;function Fc(e,t,r){return e&t^~e&r}function Hc(e,t,r){return e&t^e&r^t&r}class $c extends Ea{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ga(this.buffer)}update(e){la(this);const{view:t,buffer:r,blockLen:s}=this,n=(e=va(e)).length;for(let i=0;i<n;){const o=Math.min(s-this.pos,n-i);if(o!==s)r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=ga(e);for(;s<=n-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){la(this),ua(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:n}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let e=i;e<s;e++)t[e]=0;(function(e,t,r,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,s);const n=BigInt(32),i=BigInt(4294967295),o=Number(r>>n&i),a=Number(r&i),c=s?4:0,l=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+l,a,s)})(r,s-8,BigInt(8*this.length),n),this.process(r,0);const o=ga(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:n,destroyed:i,pos:o}=this;return e.length=s,e.pos=o,e.finished=n,e.destroyed=i,s%t&&e.buffer.set(r),e}}const Wc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qc=new Uint32Array(64);class Vc extends $c{constructor(){super(64,32,8,!1),this.A=0|zc[0],this.B=0|zc[1],this.C=0|zc[2],this.D=0|zc[3],this.E=0|zc[4],this.F=0|zc[5],this.G=0|zc[6],this.H=0|zc[7]}get(){const{A:e,B:t,C:r,D:s,E:n,F:i,G:o,H:a}=this;return[e,t,r,s,n,i,o,a]}set(e,t,r,s,n,i,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|s,this.E=0|n,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)qc[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=qc[e-15],r=qc[e-2],s=ma(t,7)^ma(t,18)^t>>>3,n=ma(r,17)^ma(r,19)^r>>>10;qc[e]=n+qc[e-7]+s+qc[e-16]|0}let{A:r,B:s,C:n,D:i,E:o,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(ma(o,6)^ma(o,11)^ma(o,25))+Fc(o,a,c)+Wc[e]+qc[e]|0,u=(ma(r,2)^ma(r,13)^ma(r,22))+Hc(r,s,n)|0;l=c,c=a,a=o,o=i+t|0,i=n,n=s,s=r,r=t+u|0}r=r+this.A|0,s=s+this.B|0,n=n+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,s,n,i,o,a,c,l)}roundClean(){qc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Gc=Aa((()=>new Vc)),Kc=BigInt(0),Jc=BigInt(1),Qc=BigInt(2);function Zc(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Yc(e){if(!Zc(e))throw new Error("Uint8Array expected")}function Xc(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const el=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function tl(e){Yc(e);let t="";for(let r=0;r<e.length;r++)t+=el[e[r]];return t}function rl(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function sl(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Kc:BigInt("0x"+e)}function nl(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function il(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){const r=nl(e.charCodeAt(n)),i=nl(e.charCodeAt(n+1));if(void 0===r||void 0===i){const t=e[n]+e[n+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+n)}s[t]=16*r+i}return s}function ol(e){return sl(tl(e))}function al(e){return Yc(e),sl(tl(Uint8Array.from(e).reverse()))}function cl(e,t){return il(e.toString(16).padStart(2*t,"0"))}function ll(e,t){return cl(e,t).reverse()}function ul(e,t,r){let s;if("string"==typeof t)try{s=il(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Zc(t))throw new Error(e+" must be hex string or Uint8Array");s=Uint8Array.from(t)}const n=s.length;if("number"==typeof r&&n!==r)throw new Error(e+" of length "+r+" expected, got "+n);return s}function hl(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Yc(s),t+=s.length}const r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r}const dl=e=>"bigint"==typeof e&&Kc<=e;function pl(e,t,r){return dl(e)&&dl(t)&&dl(r)&&t<=e&&e<r}function fl(e,t,r,s){if(!pl(t,r,s))throw new Error("expected valid "+e+": "+r+" <= n < "+s+", got "+t)}function gl(e){let t;for(t=0;e>Kc;e>>=Jc,t+=1);return t}const ml=e=>(Qc<<BigInt(e-1))-Jc,yl=e=>new Uint8Array(e),wl=e=>Uint8Array.from(e);function bl(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let s=yl(e),n=yl(e),i=0;const o=()=>{s.fill(1),n.fill(0),i=0},a=(...e)=>r(n,s,...e),c=(e=yl())=>{n=a(wl([0]),e),s=a(),0!==e.length&&(n=a(wl([1]),e),s=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){s=a();const t=s.slice();r.push(t),e+=s.length}return hl(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(l()));)c();return o(),r}}const vl={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Zc(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function El(e,t,r={}){const s=(t,r,s)=>{const n=vl[r];if("function"!=typeof n)throw new Error("invalid validator function");const i=e[t];if(!(s&&void 0===i||n(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(const[e,r]of Object.entries(t))s(e,r,!1);for(const[e,t]of Object.entries(r))s(e,t,!0);return e}function Al(e){const t=new WeakMap;return(r,...s)=>{const n=t.get(r);if(void 0!==n)return n;const i=e(r,...s);return t.set(r,i),i}}var Cl=Object.freeze({__proto__:null,isBytes:Zc,abytes:Yc,abool:Xc,bytesToHex:tl,numberToHexUnpadded:rl,hexToNumber:sl,hexToBytes:il,bytesToNumberBE:ol,bytesToNumberLE:al,numberToBytesBE:cl,numberToBytesLE:ll,numberToVarBytesBE:function(e){return il(rl(e))},ensureBytes:ul,concatBytes:hl,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let s=0;s<e.length;s++)r|=e[s]^t[s];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},inRange:pl,aInRange:fl,bitLen:gl,bitGet:function(e,t){return e>>BigInt(t)&Jc},bitSet:function(e,t,r){return e|(r?Jc:Kc)<<BigInt(t)},bitMask:ml,createHmacDrbg:bl,validateObject:El,notImplemented:()=>{throw new Error("not implemented")},memoized:Al});const _l=BigInt(0),Nl=BigInt(1),Il=BigInt(2),Sl=BigInt(3),Tl=BigInt(4),Pl=BigInt(5),Ol=BigInt(8);function xl(e,t){const r=e%t;return r>=_l?r:t+r}function kl(e,t,r){if(t<_l)throw new Error("invalid exponent, negatives unsupported");if(r<=_l)throw new Error("invalid modulus");if(r===Nl)return _l;let s=Nl;for(;t>_l;)t&Nl&&(s=s*e%r),e=e*e%r,t>>=Nl;return s}function Rl(e,t,r){let s=e;for(;t-- >_l;)s*=s,s%=r;return s}function Ul(e,t){if(e===_l)throw new Error("invert: expected non-zero number");if(t<=_l)throw new Error("invert: expected positive modulus, got "+t);let r=xl(e,t),s=t,n=_l,i=Nl;for(;r!==_l;){const e=s%r,t=n-i*(s/r);s=r,r=e,n=i,i=t}if(s!==Nl)throw new Error("invert: does not exist");return xl(n,t)}const Dl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Bl(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ll(e,t,r=!1,s={}){if(e<=_l)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:n,nByteLength:i}=Bl(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:n,BYTES:i,MASK:ml(n),ZERO:_l,ONE:Nl,create:t=>xl(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return _l<=t&&t<e},is0:e=>e===_l,isOdd:e=>(e&Nl)===Nl,neg:t=>xl(-t,e),eql:(e,t)=>e===t,sqr:t=>xl(t*t,e),add:(t,r)=>xl(t+r,e),sub:(t,r)=>xl(t-r,e),mul:(t,r)=>xl(t*r,e),pow:(e,t)=>function(e,t,r){if(r<_l)throw new Error("invalid exponent, negatives unsupported");if(r===_l)return e.ONE;if(r===Nl)return t;let s=e.ONE,n=t;for(;r>_l;)r&Nl&&(s=e.mul(s,n)),n=e.sqr(n),r>>=Nl;return s}(a,e,t),div:(t,r)=>xl(t*Ul(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ul(t,e),sqrt:s.sqrt||(t=>(o||(o=function(e){if(e%Tl===Sl){const t=(e+Nl)/Tl;return function(e,r){const s=e.pow(r,t);if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}if(e%Ol===Pl){const t=(e-Pl)/Ol;return function(e,r){const s=e.mul(r,Il),n=e.pow(s,t),i=e.mul(r,n),o=e.mul(e.mul(i,Il),n),a=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Nl)/Il;let r,s,n;for(r=e-Nl,s=0;r%Il===_l;r/=Il,s++);for(n=Il;n<e&&kl(n,t,e)!==e-Nl;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===s){const t=(e+Nl)/Tl;return function(e,r){const s=e.pow(r,t);if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}const i=(r+Nl)/Il;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=s,c=e.pow(e.mul(e.ONE,n),r),l=e.pow(o,i),u=e.pow(o,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,Nl<<BigInt(a-t-1));c=e.sqr(r),l=e.mul(l,r),u=e.mul(u,c),a=t}return l}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),s=t.reduce(((t,s,n)=>e.is0(s)?t:(r[n]=t,e.mul(t,s))),e.ONE),n=e.inv(s);return t.reduceRight(((t,s,n)=>e.is0(s)?t:(r[n]=e.mul(t,r[n]),e.mul(t,s))),n),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?ll(e,i):cl(e,i),fromBytes:e=>{if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);return r?al(e):ol(e)}});return Object.freeze(a)}function Ml(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function jl(e){const t=Ml(e);return t+Math.ceil(t/2)}const Fl=BigInt(0),Hl=BigInt(1);function $l(e,t){const r=t.negate();return e?r:t}function Wl(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function zl(e,t){return Wl(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const ql=new WeakMap,Vl=new WeakMap;function Gl(e){return Vl.get(e)||1}function Kl(e){return function(e){El(e,Dl.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),El(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Bl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Jl=BigInt(0),Ql=BigInt(1),Zl=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Yl=BigInt(1),Xl=BigInt(2),eu=BigInt(3),tu=BigInt(5);BigInt(8);const ru=function(e){const t=function(e){return El(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}(e),{P:r}=t,s=e=>xl(e,r),n=t.montgomeryBits,i=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>kl(e,r-BigInt(2),r));function l(e,t,r){const n=s(e*(t-r));return[t=s(t-n),r=s(r+n)]}const u=(t.a-BigInt(2))/BigInt(4);function h(e){return ll(s(e),i)}function d(e,t){const d=function(e){const t=ul("u coordinate",e,i);return 32===o&&(t[31]&=127),al(t)}(t),p=function(e){const t=ul("scalar",e),r=t.length;if(r!==i&&r!==o)throw new Error("invalid scalar, expected "+i+" or "+o+" bytes, got "+r);return al(a(t))}(e),f=function(e,t){fl("u",e,Jl,r),fl("scalar",t,Jl,r);const i=t,o=e;let a,h=Ql,d=Jl,p=e,f=Ql,g=Jl;for(let e=BigInt(n-1);e>=Jl;e--){const t=i>>e&Ql;g^=t,a=l(g,h,p),h=a[0],p=a[1],a=l(g,d,f),d=a[0],f=a[1],g=t;const r=h+d,n=s(r*r),c=h-d,m=s(c*c),y=n-m,w=p+f,b=s((p-f)*r),v=s(w*c),E=b+v,A=b-v;p=s(E*E),f=s(o*s(A*A)),h=s(n*m),d=s(y*(n+s(u*y)))}a=l(g,h,p),h=a[0],p=a[1],a=l(g,d,f),d=a[0],f=a[1];const m=c(d);return s(h*m)}(d,p);if(f===Jl)throw new Error("invalid private or public key received");return h(f)}const p=h(t.Gu);function f(e){return d(e,p)}return{scalarMult:d,scalarMultBase:f,getSharedSecret:(e,t)=>d(e,t),getPublicKey:e=>f(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:p}}({P:Zl,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=Zl,{pow_p_5_8:r,b2:s}=function(e){const t=BigInt(10),r=BigInt(20),s=BigInt(40),n=BigInt(80),i=Zl,o=e*e%i*e%i,a=Rl(o,Xl,i)*o%i,c=Rl(a,Yl,i)*e%i,l=Rl(c,tu,i)*c%i,u=Rl(l,t,i)*l%i,h=Rl(u,r,i)*u%i,d=Rl(h,s,i)*h%i,p=Rl(d,n,i)*d%i,f=Rl(p,n,i)*d%i,g=Rl(f,t,i)*l%i;return{pow_p_5_8:Rl(g,Xl,i)*e%i,b2:o}}(e);return xl(Rl(r,eu,t)*s,t)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:Ca});function su(e){void 0!==e.lowS&&Xc("lowS",e.lowS),void 0!==e.prehash&&Xc("prehash",e.prehash)}const{bytesToNumberBE:nu,hexToBytes:iu}=Cl;class ou extends Error{constructor(e=""){super(e)}}const au={Err:ou,_tlv:{encode:(e,t)=>{const{Err:r}=au;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const s=t.length/2,n=rl(s);if(n.length/2&128)throw new r("tlv.encode: long form length too big");const i=s>127?rl(n.length/2|128):"";return rl(e)+i+n+t},decode(e,t){const{Err:r}=au;let s=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[s++]!==e)throw new r("tlv.decode: wrong tlv");const n=t[s++];let i=0;if(128&n){const e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(s,s+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)i=i<<8|e;if(s+=e,i<128)throw new r("tlv.decode(long): not minimal encoding")}else i=n;const o=t.subarray(s,s+i);if(o.length!==i)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(s+i)}}},_int:{encode(e){const{Err:t}=au;if(e<cu)throw new t("integer: negative integers are not allowed");let r=rl(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=au;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return nu(e)}},toSig(e){const{Err:t,_int:r,_tlv:s}=au,n="string"==typeof e?iu(e):e;Yc(n);const{v:i,l:o}=s.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=s.decode(2,i),{v:l,l:u}=s.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=au,s=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,s)}},cu=BigInt(0),lu=BigInt(1);BigInt(2);const uu=BigInt(3);function hu(e){const t=function(e){const t=Kl(e);El(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:s,a:n}=t;if(r){if(!s.eql(n,s.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,s=Ll(t.n,t.nBitLength),n=t.toBytes||((e,t,s)=>{const n=t.toAffine();return hl(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:s,b:n}=t,i=r.sqr(e),o=r.mul(i,e);return r.add(r.add(o,r.mul(e,s)),n)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:s,wrapPrivateKey:n,n:i}=t;if(r&&"bigint"!=typeof e){if(Zc(e)&&(e=tl(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*s,"0")}let o;try{o="bigint"==typeof e?e:ol(ul("private key",e,s))}catch{throw new Error("invalid private key, expected hex or "+s+" bytes, got "+typeof e)}return n&&(o=xl(o,i)),fl("private key",o,lu,i),o}function c(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}const l=Al(((e,t)=>{const{px:s,py:n,pz:i}=e;if(r.eql(i,r.ONE))return{x:s,y:n};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(i));const a=r.mul(s,t),c=r.mul(n,t),l=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),u=Al((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:s,y:n}=e.toAffine();if(!r.isValid(s)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),a=o(s);if(!r.eql(i,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class h{constructor(e,t,s){if(this.px=e,this.py=t,this.pz=s,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==s||!r.isValid(s))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:s}=e||{};if(!e||!r.isValid(t)||!r.isValid(s))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const n=e=>r.eql(e,r.ZERO);return n(t)&&n(s)?h.ZERO:new h(t,s,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(i(ul("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(a(e))}static msm(e,t){return function(e,t,r,s){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(s,t),r.length!==s.length)throw new Error("arrays of points and scalars must have equal length");const n=e.ZERO,i=gl(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(n);let l=n;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(n);for(let t=0;t<s.length;t++){const n=s[t],i=Number(n>>BigInt(e)&BigInt(a));c[i]=c[i].add(r[t])}let t=n;for(let e=c.length-1,r=n;e>0;e--)r=r.add(c[e]),t=t.add(r);if(l=l.add(t),0!==e)for(let e=0;e<o;e++)l=l.double()}return l}(h,s,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){u(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:s,pz:n}=this,{px:i,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(i,n)),u=r.eql(r.mul(s,a),r.mul(o,n));return l&&u}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:s}=t,n=r.mul(s,uu),{px:i,py:o,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,d=r.mul(i,i),p=r.mul(o,o),f=r.mul(a,a),g=r.mul(i,o);return g=r.add(g,g),u=r.mul(i,a),u=r.add(u,u),c=r.mul(e,u),l=r.mul(n,f),l=r.add(c,l),c=r.sub(p,l),l=r.add(p,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(n,u),f=r.mul(e,f),g=r.sub(d,f),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,f),d=r.mul(d,g),l=r.add(l,d),f=r.mul(o,a),f=r.add(f,f),d=r.mul(f,g),c=r.sub(c,d),u=r.mul(f,p),u=r.add(u,u),u=r.add(u,u),new h(c,l,u)}add(e){c(e);const{px:s,py:n,pz:i}=this,{px:o,py:a,pz:l}=e;let u=r.ZERO,d=r.ZERO,p=r.ZERO;const f=t.a,g=r.mul(t.b,uu);let m=r.mul(s,o),y=r.mul(n,a),w=r.mul(i,l),b=r.add(s,n),v=r.add(o,a);b=r.mul(b,v),v=r.add(m,y),b=r.sub(b,v),v=r.add(s,i);let E=r.add(o,l);return v=r.mul(v,E),E=r.add(m,w),v=r.sub(v,E),E=r.add(n,i),u=r.add(a,l),E=r.mul(E,u),u=r.add(y,w),E=r.sub(E,u),p=r.mul(f,v),u=r.mul(g,w),p=r.add(u,p),u=r.sub(y,p),p=r.add(y,p),d=r.mul(u,p),y=r.add(m,m),y=r.add(y,m),w=r.mul(f,w),v=r.mul(g,v),y=r.add(y,w),w=r.sub(m,w),w=r.mul(f,w),v=r.add(v,w),m=r.mul(y,v),d=r.add(d,m),m=r.mul(E,v),u=r.mul(b,u),u=r.sub(u,m),m=r.mul(b,y),p=r.mul(E,p),p=r.add(p,m),new h(u,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return p.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){const{endo:s,n}=t;fl("scalar",e,cu,n);const i=h.ZERO;if(e===cu)return i;if(this.is0()||e===lu)return this;if(!s||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:l}=s.splitScalar(e),u=i,d=i,f=this;for(;a>cu||l>cu;)a&lu&&(u=u.add(f)),l&lu&&(d=d.add(f)),f=f.double(),a>>=lu,l>>=lu;return o&&(u=u.negate()),c&&(d=d.negate()),d=new h(r.mul(d.px,s.beta),d.py,d.pz),u.add(d)}multiply(e){const{endo:s,n}=t;let i,o;if(fl("scalar",e,lu,n),s){const{k1neg:t,k1:n,k2neg:a,k2:c}=s.splitScalar(e);let{p:l,f:u}=this.wNAF(n),{p:d,f}=this.wNAF(c);l=p.constTimeNegate(t,l),d=p.constTimeNegate(a,d),d=new h(r.mul(d.px,s.beta),d.py,d.pz),i=l.add(d),o=u.add(f)}else{const{p:t,f:r}=this.wNAF(e);i=t,o=r}return h.normalizeZ([i,o])[0]}multiplyAndAddUnsafe(e,t,r){const s=h.BASE,n=(e,t)=>t!==cu&&t!==lu&&e.equals(s)?e.multiply(t):e.multiplyUnsafe(t),i=n(this,t).add(n(e,r));return i.is0()?void 0:i}toAffine(e){return l(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===lu)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===lu?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Xc("isCompressed",e),this.assertValidity(),n(h,this,e)}toHex(e=!0){return Xc("isCompressed",e),tl(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,p=function(e,t){return{constTimeNegate:$l,hasPrecomputes:e=>1!==Gl(e),unsafeLadder(t,r,s=e.ZERO){let n=t;for(;r>Fl;)r&Hl&&(s=s.add(n)),n=n.double(),r>>=Hl;return s},precomputeWindow(e,r){const{windows:s,windowSize:n}=zl(r,t),i=[];let o=e,a=o;for(let e=0;e<s;e++){a=o,i.push(a);for(let e=1;e<n;e++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(r,s,n){const{windows:i,windowSize:o}=zl(r,t);let a=e.ZERO,c=e.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<i;e++){const t=e*o;let r=Number(n&l);n>>=h,r>o&&(r-=u,n+=Hl);const i=t,d=t+Math.abs(r)-1,p=e%2!=0,f=r<0;0===r?c=c.add($l(p,s[i])):a=a.add($l(f,s[d]))}return{p:a,f:c}},wNAFUnsafe(r,s,n,i=e.ZERO){const{windows:o,windowSize:a}=zl(r,t),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(n===Fl)break;let r=Number(n&c);if(n>>=u,r>a&&(r-=l,n+=Hl),0===r)continue;let o=s[t+Math.abs(r)-1];r<0&&(o=o.negate()),i=i.add(o)}return i},getPrecomputes(e,t,r){let s=ql.get(t);return s||(s=this.precomputeWindow(t,e),1!==e&&ql.set(t,r(s))),s},wNAFCached(e,t,r){const s=Gl(e);return this.wNAF(s,this.getPrecomputes(s,e,r),t)},wNAFCachedUnsafe(e,t,r,s){const n=Gl(e);return 1===n?this.unsafeLadder(e,t,s):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,s)},setWindowSize(e,r){Wl(r,t),Vl.set(e,r),ql.delete(e)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return pl(e,lu,t.n)}}}function du(e){const t=function(e){const t=Kl(e);return El(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:s}=t,n=r.BYTES+1,i=2*r.BYTES+1;function o(e){return xl(e,s)}function a(e){return Ul(e,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=hu({...t,toBytes(e,t,s){const n=t.toAffine(),i=r.toBytes(n.x),o=hl;return Xc("isCompressed",s),s?o(Uint8Array.from([t.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,r.toBytes(n.y))},fromBytes(e){const t=e.length,s=e[0],o=e.subarray(1);if(t!==n||2!==s&&3!==s){if(t===i&&4===s)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+n+", or uncompressed "+i+", got "+t)}{const e=ol(o);if(!pl(e,lu,r.ORDER))throw new Error("Point is not on curve");const t=u(e);let n;try{n=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~s)!=((n&lu)===lu)&&(n=r.neg(n)),{x:e,y:n}}}}),d=e=>tl(cl(e,t.nByteLength));function p(e){return e>s>>lu}const f=(e,t,r)=>ol(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=ul("compactSignature",e,2*r),new g(f(e,0,r),f(e,r,2*r))}static fromDER(e){const{r:t,s:r}=au.toSig(ul("DER",e));return new g(t,r)}assertValidity(){fl("r",this.r,lu,s),fl("s",this.s,lu,s)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:s,s:n,recovery:i}=this,l=b(ul("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?s+t.n:s;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&i?"03":"02",p=c.fromHex(h+d(u)),f=a(u),g=o(-l*f),m=o(n*f),y=c.BASE.multiplyAndAddUnsafe(p,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return il(this.toDERHex())}toDERHex(){return au.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return il(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return l(e),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=jl(t.n);return function(e,t,r=!1){const s=e.length,n=Ml(t),i=jl(t);if(s<16||s<i||s>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+s);const o=xl(r?al(e):ol(e),t-Nl)+Nl;return r?ll(o,n):cl(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=Zc(e),r="string"==typeof e,s=(t||r)&&e.length;return t?s===n||s===i:r?s===2*n||s===2*i:e instanceof c}const w=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=ol(e),s=8*e.length-t.nBitLength;return s>0?r>>BigInt(s):r},b=t.bits2int_modN||function(e){return o(w(e))},v=ml(t.nBitLength);function E(e){return fl("num < 2^"+t.nBitLength,e,cu,v),cl(e,t.nByteLength)}const A={lowS:t.lowS,prehash:!1},C={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,s,n=A){const{seed:i,k2sig:u}=function(e,s,n=A){if(["recovered","canonical"].some((e=>e in n)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:d,prehash:f,extraEntropy:m}=n;null==d&&(d=!0),e=ul("msgHash",e),su(n),f&&(e=ul("prehashed msgHash",i(e)));const y=b(e),v=l(s),C=[E(v),E(y)];if(null!=m&&!1!==m){const e=!0===m?u(r.BYTES):m;C.push(ul("extraEntropy",e))}const _=hl(...C),N=y;return{seed:_,k2sig:function(e){const t=w(e);if(!h(t))return;const r=a(t),s=c.BASE.multiply(t).toAffine(),n=o(s.x);if(n===cu)return;const i=o(r*o(N+n*v));if(i===cu)return;let l=(s.x===n?0:2)|Number(s.y&lu),u=i;return d&&p(i)&&(u=function(e){return p(e)?o(-e):e}(i),l^=1),new g(n,u,l)}}}(e,s,n),d=t;return bl(d.hash.outputLen,d.nByteLength,d.hmac)(i,u)},verify:function(e,r,s,n=C){const i=e;r=ul("msgHash",r),s=ul("publicKey",s);const{lowS:l,prehash:u,format:h}=n;if(su(n),"strict"in n)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const d="string"==typeof i||Zc(i),p=!d&&!h&&"object"==typeof i&&null!==i&&"bigint"==typeof i.r&&"bigint"==typeof i.s;if(!d&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let f,m;try{if(p&&(f=new g(i.r,i.s)),d){try{"compact"!==h&&(f=g.fromDER(i))}catch(e){if(!(e instanceof au.Err))throw e}!f&&"der"!==h&&(f=g.fromCompact(i))}m=c.fromHex(s)}catch{return!1}if(!f||l&&f.hasHighS())return!1;u&&(r=t.hash(r));const{r:y,s:w}=f,v=b(r),E=a(w),A=o(v*E),_=o(y*E),N=c.BASE.multiplyAndAddUnsafe(m,A,_)?.toAffine();return!!N&&o(N.x)===y},ProjectivePoint:c,Signature:g,utils:m}}function pu(e){return{hash:e,hmac:(t,...r)=>Lc(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];aa(s),t+=s.length}const r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r}(...r)),randomBytes:Ca}}BigInt(4);const fu=Ll(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),gu=function(e,t){const r=t=>du({...e,...pu(t)});return{...r(t),create:r}}({a:fu.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:fu,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Gc),mu="base10",yu="base16",wu="base64pad",bu="base64url",vu="utf8";function Eu(){return Co(Ca(32),yu)}function Au(e){return Co(Gc(Ao(e,yu)),yu)}function Cu(e){return Co(Gc(Ao(e,vu)),yu)}function _u(e){return Ao(`${e}`,mu)}function Nu(e){return Number(Co(e,mu))}function Iu(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Su(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function Tu(e){if(2===Nu(e.type))return Co(Zn([e.type,e.sealed]),wu);if(1===Nu(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Co(Zn([e.type,e.senderPublicKey,e.iv,e.sealed]),wu)}return Co(Zn([e.type,e.iv,e.sealed]),wu)}function Pu(e){const t=Ao((e.encoding||wu)===bu?Su(e.encoded):e.encoded,wu),r=t.slice(0,1);if(1===Nu(r)){const e=33,s=e+12,n=t.slice(1,e),i=t.slice(e,s);return{type:r,sealed:t.slice(s),iv:i,senderPublicKey:n}}if(2===Nu(r))return{type:r,sealed:t.slice(1),iv:Ca(12)};const s=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:s}}function Ou(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function xu(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function ku(e){return 2===e.type}function Ru(e){return e?.relay||{protocol:"irn"}}function Uu(e){const t=_o[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function Du(e,t="-"){const r={},s="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(s)){const n=t.replace(s,""),i=e[t];r[n]=i}})),r}function Bu(e){if(!e.includes("wc:")){const t=ia(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,s=e.substring(0,t),n=e.substring(t+1,r).split("@"),i=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(i),a={};o.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:s,topic:Lu(n[0]),version:parseInt(n[1],10),symKey:a.symKey,relay:Du(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Lu(e){return e.startsWith("//")?e.substring(2):e}function Mu(e){const t=new URLSearchParams,r=function(e,t="-"){const r={};return Object.keys(e).forEach((s=>{const n=s,i="relay"+t+n;e[n]&&(r[i]=e[n])})),r}(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const s=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${s}`}function ju(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function Fu(e){const t=[];return e.forEach((e=>{const[r,s]=e.split(":");t.push(`${r}:${s}`)})),t}function Hu(e){return e.includes(":")}function $u(e){return Hu(e)?e.split(":")[0]:e}function Wu(e,t){const r=function(e){const t={};return e?.forEach((e=>{var r;const[s,n]=e.split(":");t[s]||(t[s]={accounts:[],chains:[],events:[],methods:[]}),t[s].accounts.push(e),null==(r=t[s].chains)||r.push(`${s}:${n}`)})),t}(t=t.map((e=>e.replace("did:pkh:",""))));for(const[t,s]of Object.entries(r))s.methods?s.methods=ta(s.methods,e):s.methods=e,s.events=["chainChanged","accountsChanged"];return r}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const zu={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},qu={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Vu(e,t){const{message:r,code:s}=qu[e];return{message:t?`${r} ${t}`:r,code:s}}function Gu(e,t){const{message:r,code:s}=zu[e];return{message:t?`${r} ${t}`:r,code:s}}function Ku(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function Ju(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Qu(e){return typeof e>"u"}function Zu(e,t){return!(!t||!Qu(e))||"string"==typeof e&&!!e.trim().length}function Yu(e,t){return!(!t||!Qu(e))||"number"==typeof e&&!isNaN(e)}function Xu(e){return!(!Zu(e,!1)||!e.includes(":"))&&2===e.split(":").length}function eh(e){let t=!0;return Ku(e)?e.length&&(t=e.every((e=>Zu(e,!1)))):t=!1,t}function th(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const s=function(e,t){let r=null;return eh(e?.methods)?eh(e?.events)||(r=Gu("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Gu("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);s&&(r=s)})),r}function rh(e,t){let r=null;if(e&&Ju(e)){const s=th(e,t);s&&(r=s);const n=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const s=function(e,t){let r=null;return Ku(e)?e.forEach((e=>{r||function(e){if(Zu(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Xu(e)}}return!1}(e)||(r=Gu("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=Gu("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(e?.accounts,`${t} namespace`);s&&(r=s)})),r}(e,t);n&&(r=n)}else r=Vu("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function sh(e){return Zu(e.protocol,!0)}function nh(e){return typeof e<"u"&&null!==typeof e}function ih(e,t){return!(!Xu(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...Fu(e.accounts))})),t}(e).includes(t))}function oh(e,t,r){let s=null;const n=function(e){const t={};return Object.keys(e).forEach((r=>{var s;r.includes(":")?t[r]=e[r]:null==(s=e[r].chains)||s.forEach((s=>{t[s]={methods:e[r].methods,events:e[r].events}}))})),t}(e),i=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const s=Fu(e[r].accounts);s?.forEach((s=>{t[s]={accounts:e[r].accounts.filter((e=>e.includes(`${s}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),o=Object.keys(n),a=Object.keys(i),c=ah(Object.keys(e)),l=ah(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(s=Vu("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),qo(o,a)||(s=Vu("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||s)return;const n=Fu(t[e].accounts);n.includes(e)||(s=Vu("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${n.toString()}`))})),o.forEach((e=>{s||(qo(n[e].methods,i[e].methods)?qo(n[e].events,i[e].events)||(s=Vu("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):s=Vu("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),s}function ah(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function ch(){const e=Ho();return new Promise((t=>{switch(e){case Bo:t(Fo()&&navigator?.onLine);break;case Do:t(async function(){if(jo()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo){const e=await(null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}());break;default:t(!0)}}))}const lh={};class uh{static get(e){return lh[e]}static set(e,t){lh[e]=t}static delete(e){delete lh[e]}}const hh="PARSE_ERROR",dh="INVALID_REQUEST",ph="METHOD_NOT_FOUND",fh="INVALID_PARAMS",gh="INTERNAL_ERROR",mh="SERVER_ERROR",yh=[-32700,-32600,-32601,-32602,-32603],wh={[hh]:{code:-32700,message:"Parse error"},[dh]:{code:-32600,message:"Invalid Request"},[ph]:{code:-32601,message:"Method not found"},[fh]:{code:-32602,message:"Invalid params"},[gh]:{code:-32603,message:"Internal error"},[mh]:{code:-32e3,message:"Server error"}},bh=mh;function vh(e){return Object.keys(wh).includes(e)?wh[e]:wh[bh]}function Eh(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var Ah=r(5682);function Ch(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function _h(e=6){return BigInt(Ch(e))}function Nh(e,t,r){return{id:r||Ch(),jsonrpc:"2.0",method:e,params:t}}function Ih(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Sh(e,t,r){return{id:e,jsonrpc:"2.0",error:Th(t,r)}}function Th(e,t){return void 0===e?vh(gh):("string"==typeof e&&(e=Object.assign(Object.assign({},vh(mh)),{message:e})),void 0!==t&&(e.data=t),r=e.code,yh.includes(r)&&(e=function(e){return Object.values(wh).find((t=>t.code===e))||wh[bh]}(e.code)),e);var r}class Ph{}class Oh extends Ph{constructor(){super()}}class xh extends Oh{constructor(e){super()}}function kh(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function Rh(e){return kh(e,"^https?:")}function Uh(e){return kh(e,"^wss?:")}function Dh(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function Bh(e){return Dh(e)&&"method"in e}function Lh(e){return Dh(e)&&(Mh(e)||jh(e))}function Mh(e){return"result"in e}function jh(e){return"error"in e}class Fh extends xh{constructor(e){super(e),this.events=new y.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Nh(e.method,e.params||[],e.id||_h().toString()),t)}async requestStrict(e,t){return new Promise((async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(e){s(e)}this.events.on(`${e.id}`,(e=>{jh(e)?s(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){s(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Lh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const Hh=e=>e.split("?")[0],$h=typeof WebSocket<"u"?WebSocket:typeof r.g<"u"&&typeof r.g.WebSocket<"u"?r.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:r(1591);class Wh{constructor(e){if(this.url=e,this.events=new y.EventEmitter,this.registering=!1,!Uh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,q.h)(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!Uh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,s)=>{const n=(0,Ah.isReactNative)()?void 0:{rejectUnauthorized:(o=e,!new RegExp("wss?://localhost(:d{2,5})?").test(o))},i=new $h(e,[],n);var o;typeof WebSocket<"u"||typeof r.g<"u"&&typeof r.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?i.onerror=e=>{const t=e;s(this.emitError(t.error))}:i.on("error",(e=>{s(this.emitError(e))})),i.onopen=()=>{this.onOpen(i),t(i)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?(0,q.j)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=Sh(e,r.message||r.toString());this.events.emit("payload",s)}parseError(e,t=this.url){return Eh(e,Hh(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Hh(this.url)}`));return this.events.emit("register_error",t),t}}const zh="core",qh=`wc@2:${zh}:`,Vh={database:":memory:"},Gh="client_ed25519_seed",Kh=b.ONE_DAY,Jh=b.SIX_HOURS,Qh="wss://relay.walletconnect.org",Zh="relayer_message",Yh="relayer_message_ack",Xh="relayer_connection_stalled",ed="relayer_publish",td="payload",rd="connect",sd="disconnect",nd="error",id="2.20.2",od={link_mode:"link_mode",relay:"relay"},ad="inbound",cd="WALLETCONNECT_LINK_MODE_APPS",ld="subscription_created",ud="subscription_deleted",hd=(b.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:b.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:b.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:b.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:b.ONE_DAY,prompt:!1,tag:0},res:{ttl:b.ONE_DAY,prompt:!1,tag:0}}}),dd="pairing_create",pd="pairing_delete",fd="history_created",gd="history_updated",md="history_deleted",yd="expirer_created",wd="expirer_deleted",bd="expirer_expired",vd="https://verify.walletconnect.org",Ed=vd,Ad=`${Ed}/v3`,Cd=["https://verify.walletconnect.com",vd],_d="malformed_pairing_uri",Nd="session_approve_started";var Id=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==r[o])throw new TypeError(i+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var s=0,n=0;e[t]===c;)s++,t++;for(var i=(e.length-t)*l+1>>>0,o=new Uint8Array(i);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var p=i-n;p!==i&&0===o[p];)p++;for(var f=new Uint8Array(s+(i-p)),g=s;p!==i;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,s=0,n=0,i=t.length;n!==i&&0===t[n];)n++,r++;for(var o=(i-n)*u+1>>>0,l=new Uint8Array(o);n!==i;){for(var h=t[n],d=0,p=o-1;(0!==h||d<s)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,n++}for(var f=o-s;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const Sd=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Td{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Pd{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return xd(this,e)}}class Od{constructor(e){this.decoders=e}or(e){return xd(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xd=(e,t)=>new Od({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class kd{constructor(e,t,r,s){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=s,this.encoder=new Td(e,t,r),this.decoder=new Pd(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Rd=({name:e,prefix:t,encode:r,decode:s})=>new kd(e,t,r,s),Ud=({prefix:e,name:t,alphabet:r})=>{const{encode:s,decode:n}=Id(r,t);return Rd({prefix:e,name:t,encode:s,decode:e=>Sd(n(e))})},Dd=({name:e,prefix:t,bitsPerChar:r,alphabet:s})=>Rd({prefix:t,name:e,encode:e=>((e,t,r)=>{const s="="===t[t.length-1],n=(1<<r)-1;let i="",o=0,a=0;for(let s=0;s<e.length;++s)for(a=a<<8|e[s],o+=8;o>r;)o-=r,i+=t[n&a>>o];if(o&&(i+=t[n&a<<r-o]),s)for(;i.length*r&7;)i+="=";return i})(e,s,r),decode:t=>((e,t,r,s)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,l=0;for(let t=0;t<i;++t){const i=n[e[t]];if(void 0===i)throw new SyntaxError(`Non-${s} character`);c=c<<r|i,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,s,r,e)}),Bd=Rd({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var Ld=Object.freeze({__proto__:null,identity:Bd});const Md=Dd({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var jd=Object.freeze({__proto__:null,base2:Md});const Fd=Dd({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Hd=Object.freeze({__proto__:null,base8:Fd});const $d=Ud({prefix:"9",name:"base10",alphabet:"0123456789"});var Wd=Object.freeze({__proto__:null,base10:$d});const zd=Dd({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qd=Dd({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Vd=Object.freeze({__proto__:null,base16:zd,base16upper:qd});const Gd=Dd({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Kd=Dd({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Jd=Dd({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qd=Dd({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zd=Dd({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yd=Dd({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xd=Dd({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ep=Dd({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tp=Dd({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var rp=Object.freeze({__proto__:null,base32:Gd,base32upper:Kd,base32pad:Jd,base32padupper:Qd,base32hex:Zd,base32hexupper:Yd,base32hexpad:Xd,base32hexpadupper:ep,base32z:tp});const sp=Ud({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),np=Ud({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ip=Object.freeze({__proto__:null,base36:sp,base36upper:np});const op=Ud({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ap=Ud({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var cp=Object.freeze({__proto__:null,base58btc:op,base58flickr:ap});const lp=Dd({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),up=Dd({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hp=Dd({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dp=Dd({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var pp=Object.freeze({__proto__:null,base64:lp,base64pad:up,base64url:hp,base64urlpad:dp});const fp=Array.from(""),gp=fp.reduce(((e,t,r)=>(e[r]=t,e)),[]),mp=fp.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),yp=Rd({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+gp[t]),"")},decode:function(e){const t=[];for(const r of e){const e=mp[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var wp=Object.freeze({__proto__:null,base256emoji:yp}),bp=128,vp=-128,Ep=Math.pow(2,31),Ap=128,Cp=127,_p=Math.pow(2,7),Np=Math.pow(2,14),Ip=Math.pow(2,21),Sp=Math.pow(2,28),Tp=Math.pow(2,35),Pp=Math.pow(2,42),Op=Math.pow(2,49),xp=Math.pow(2,56),kp=Math.pow(2,63),Rp={encode:function e(t,r,s){r=r||[];for(var n=s=s||0;t>=Ep;)r[s++]=255&t|bp,t/=128;for(;t&vp;)r[s++]=255&t|bp,t>>>=7;return r[s]=0|t,e.bytes=s-n+1,r},decode:function e(t,r){var s,n=0,i=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");s=t[o++],n+=i<28?(s&Cp)<<i:(s&Cp)*Math.pow(2,i),i+=7}while(s>=Ap);return e.bytes=o-r,n},encodingLength:function(e){return e<_p?1:e<Np?2:e<Ip?3:e<Sp?4:e<Tp?5:e<Pp?6:e<Op?7:e<xp?8:e<kp?9:10}},Up=Rp;const Dp=(e,t,r=0)=>(Up.encode(e,t,r),t),Bp=e=>Up.encodingLength(e),Lp=(e,t)=>{const r=t.byteLength,s=Bp(e),n=s+Bp(r),i=new Uint8Array(n+r);return Dp(e,i,0),Dp(r,i,s),i.set(t,n),new Mp(e,r,t,i)};class Mp{constructor(e,t,r,s){this.code=e,this.size=t,this.digest=r,this.bytes=s}}const jp=({name:e,code:t,encode:r})=>new Fp(e,t,r);class Fp{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Lp(this.code,t):t.then((e=>Lp(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Hp=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),$p=jp({name:"sha2-256",code:18,encode:Hp("SHA-256")}),Wp=jp({name:"sha2-512",code:19,encode:Hp("SHA-512")});Object.freeze({__proto__:null,sha256:$p,sha512:Wp});const zp=Sd,qp={code:0,name:"identity",encode:zp,digest:e=>Lp(0,zp(e))};Object.freeze({__proto__:null,identity:qp}),new TextEncoder,new TextDecoder;const Vp={...Ld,...jd,...Hd,...Wd,...Vd,...rp,...ip,...cp,...pp,...wp};function Gp(e,t,r,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:s}}}const Kp=Gp("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Jp=Gp("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Qp={utf8:Kp,"utf-8":Kp,hex:Vp.base16,latin1:Jp,ascii:Jp,binary:Jp,...Vp};var Zp=Object.defineProperty,Yp=(e,t,r)=>((e,t,r)=>t in e?Zp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Xp{constructor(e,t){this.core=e,this.logger=t,Yp(this,"keychain",new Map),Yp(this,"name","keychain"),Yp(this,"version","0.3"),Yp(this,"initialized",!1),Yp(this,"storagePrefix",qh),Yp(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),Yp(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),Yp(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),Yp(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=Vu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),Yp(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=(0,X.U5)(t,this.name)}get context(){return(0,X.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Vo(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Go(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ef=Object.defineProperty,tf=(e,t,r)=>((e,t,r)=>t in e?ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class rf{constructor(e,t,r){this.core=e,this.logger=t,tf(this,"name","crypto"),tf(this,"keychain"),tf(this,"randomSessionIdentifier",Eu()),tf(this,"initialized",!1),tf(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),tf(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),tf(this,"getClientId",(async()=>(this.isInitialized(),Ls(Fs(await this.getClientSeed()).publicKey)))),tf(this,"generateKeyPair",(()=>{this.isInitialized();const e=function(){const e=ru.utils.randomPrivateKey(),t=ru.getPublicKey(e);return{privateKey:Co(e,yu),publicKey:Co(t,yu)}}();return this.setPrivateKey(e.publicKey,e.privateKey)})),tf(this,"signJWT",(async e=>{this.isInitialized();const t=Fs(await this.getClientSeed()),r=this.randomSessionIdentifier,s=Kh;return await async function(e,t,r,s,n=(0,b.fromMiliseconds)(Date.now())){const i={alg:"EdDSA",typ:"JWT"},o={iss:Ls(s.publicKey),sub:e,aud:t,iat:n,exp:n+r},a=function(e){return Us([Bs(e.header),Bs(e.payload)].join(Yt),tr)}({header:i,payload:o});return function(e){return[Bs(e.header),Bs(e.payload),Ms(e.signature)].join(Yt)}({header:i,payload:o,signature:Zt.sign(a,s.secretKey.slice(0,32))})}(r,e,s,t)})),tf(this,"generateSharedKey",((e,t,r)=>{this.isInitialized();const s=function(e,t){const r=ru.getSharedSecret(Ao(e,yu),Ao(t,yu));return Co(((e,t,r,s,n)=>function(e,t,r,s=32){if(ca(e),oa(s),s>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const n=Math.ceil(s/e.outputLen);void 0===r&&(r=jc);const i=new Uint8Array(n*e.outputLen),o=Lc.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)Mc[0]=t+1,a.update(0===t?jc:c).update(r).update(Mc).digestInto(c),i.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Mc.fill(0),i.slice(0,s)}(e,function(e,t,r){return ca(e),void 0===r&&(r=new Uint8Array(e.outputLen)),Lc(e,va(r),va(t))}(e,t,r),s,n))(Gc,r,void 0,void 0,32),yu)}(this.getPrivateKey(e),t);return this.setSymKey(s,r)})),tf(this,"setSymKey",(async(e,t)=>{this.isInitialized();const r=t||Au(e);return await this.keychain.set(r,e),r})),tf(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),tf(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),tf(this,"encode",(async(e,t,r)=>{this.isInitialized();const s=Ou(r),n=(0,q.h)(t);if(ku(s))return function(e,t){const r=_u(2),s=Ca(12),n=Tu({type:r,sealed:Ao(e,vu),iv:s});return t===bu?Iu(n):n}(n,r?.encoding);if(xu(s)){const t=s.senderPublicKey,r=s.receiverPublicKey;e=await this.generateSharedKey(t,r)}const i=this.getSymKey(e),{type:o,senderPublicKey:a}=s;return function(e){const t=_u(typeof e.type<"u"?e.type:0);if(1===Nu(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Ao(e.senderPublicKey,yu):void 0,s=typeof e.iv<"u"?Ao(e.iv,yu):Ca(12),n=Ao(e.symKey,yu),i=Tu({type:t,sealed:Uc(n,s).encrypt(Ao(e.message,vu)),iv:s,senderPublicKey:r});return e.encoding===bu?Iu(i):i}({type:o,symKey:i,message:n,senderPublicKey:a,encoding:r?.encoding})})),tf(this,"decode",(async(e,t,r)=>{this.isInitialized();const s=function(e,t){const r=Pu({encoded:e,encoding:t?.encoding});return Ou({type:Nu(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Co(r.senderPublicKey,yu):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(ku(s)){const e=function(e,t){const{sealed:r}=Pu({encoded:e,encoding:t});return Co(r,vu)}(t,r?.encoding);return(0,q.j)(e)}if(xu(s)){const t=s.receiverPublicKey,r=s.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const s=function(e){const t=Ao(e.symKey,yu),{sealed:r,iv:s}=Pu({encoded:e.encoded,encoding:e.encoding}),n=Uc(t,s).decrypt(r);if(null===n)throw new Error("Failed to decrypt");return Co(n,vu)}({symKey:this.getSymKey(e),encoded:t,encoding:r?.encoding});return(0,q.j)(s)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}})),tf(this,"getPayloadType",((e,t=wu)=>Nu(Pu({encoded:e,encoding:t}).type))),tf(this,"getPayloadSenderPublicKey",((e,t=wu)=>{const r=Pu({encoded:e,encoding:t});return r.senderPublicKey?Co(r.senderPublicKey,yu):void 0})),this.core=e,this.logger=(0,X.U5)(t,this.name),this.keychain=r||new Xp(this.core,this.logger)}get context(){return(0,X.oI)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Gh)}catch{e=Eu(),await this.keychain.set(Gh,e)}return function(e,t="utf8"){const r=Qp[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sf=Object.defineProperty,nf=Object.defineProperties,of=Object.getOwnPropertyDescriptors,af=Object.getOwnPropertySymbols,cf=Object.prototype.hasOwnProperty,lf=Object.prototype.propertyIsEnumerable,uf=(e,t,r)=>t in e?sf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hf=(e,t,r)=>uf(e,"symbol"!=typeof t?t+"":t,r);class df extends ie{constructor(e,t){super(e,t),this.logger=e,this.core=t,hf(this,"messages",new Map),hf(this,"messagesWithoutClientAck",new Map),hf(this,"name","messages"),hf(this,"version","0.3"),hf(this,"initialized",!1),hf(this,"storagePrefix",qh),hf(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}})),hf(this,"set",(async(e,t,r)=>{this.isInitialized();const s=Cu(t);let n=this.messages.get(e);if(typeof n>"u"&&(n={}),typeof n[s]<"u")return s;if(n[s]=t,this.messages.set(e,n),r===ad){const r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,((e,t)=>nf(e,of(t)))(((e,t)=>{for(var r in t||(t={}))cf.call(t,r)&&uf(e,r,t[r]);if(af)for(var r of af(t))lf.call(t,r)&&uf(e,r,t[r]);return e})({},r),{[s]:t}))}return await this.persist(),s})),hf(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),hf(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const r of e){const e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t})),hf(this,"has",((e,t)=>(this.isInitialized(),typeof this.get(e)[Cu(t)]<"u"))),hf(this,"ack",(async(e,t)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(e);typeof r>"u"||(delete r[Cu(t)],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist())})),hf(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=(0,X.U5)(e,this.name),this.core=t}get context(){return(0,X.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Vo(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Vo(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Go(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Go(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var pf=Object.defineProperty,ff=Object.defineProperties,gf=Object.getOwnPropertyDescriptors,mf=Object.getOwnPropertySymbols,yf=Object.prototype.hasOwnProperty,wf=Object.prototype.propertyIsEnumerable,bf=(e,t,r)=>t in e?pf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vf=(e,t)=>{for(var r in t||(t={}))yf.call(t,r)&&bf(e,r,t[r]);if(mf)for(var r of mf(t))wf.call(t,r)&&bf(e,r,t[r]);return e},Ef=(e,t)=>ff(e,gf(t)),Af=(e,t,r)=>bf(e,"symbol"!=typeof t?t+"":t,r);class Cf extends oe{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Af(this,"events",new y.EventEmitter),Af(this,"name","publisher"),Af(this,"queue",new Map),Af(this,"publishTimeout",(0,b.toMiliseconds)(b.ONE_MINUTE)),Af(this,"initialPublishTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),Af(this,"needsTransportRestart",!1),Af(this,"publish",(async(e,t,r)=>{var s;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const n=r?.ttl||Jh,i=Ru(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||_h().toString(),l={topic:e,message:t,opts:{ttl:n,relay:i,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},u=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const s=new Promise((async s=>{const i=({id:e})=>{l.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(ed,i),s(l))};this.relayer.events.on(ed,i);const u=Jo(new Promise(((s,i)=>{this.rpcPublish({topic:e,message:t,ttl:n,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(s).catch((e=>{this.logger.warn(e,e?.message),i(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await u,this.events.removeListener(ed,i)}catch(e){this.queue.set(c,Ef(vf({},l),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await Jo(s,this.publishTimeout,u)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(s=r?.internal)&&s.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}})),Af(this,"on",((e,t)=>{this.events.on(e,t)})),Af(this,"once",((e,t)=>{this.events.once(e,t)})),Af(this,"off",((e,t)=>{this.events.off(e,t)})),Af(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=(0,X.U5)(t,this.name),this.registerEventListeners()}get context(){return(0,X.oI)(this.logger)}async rpcPublish(e){var t,r,s,n;const{topic:i,message:o,ttl:a=Jh,prompt:c,tag:l,id:u,attestation:h,tvf:d}=e,p={method:Uu(Ru().protocol).publish,params:vf({topic:i,message:o,ttl:a,prompt:c,tag:l,attestation:h},d),id:u};Qu(null==(t=p.params)?void 0:t.prompt)&&(null==(r=p.params)||delete r.prompt),Qu(null==(s=p.params)?void 0:s.tag)&&(null==(n=p.params)||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const f=await this.relayer.request(p);return this.relayer.events.emit(ed,e),this.logger.debug("Successfully Published Payload"),f}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,Ef(vf({},e),{attempt:r}));const{topic:s,message:n,opts:i,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Ef(vf({},e),{topic:s,message:n,ttl:i.ttl,prompt:i.prompt,tag:i.tag,id:i.id,attestation:o,tvf:i.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(C,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Xh);this.checkQueue()})),this.relayer.on(Yh,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var _f=Object.defineProperty,Nf=(e,t,r)=>((e,t,r)=>t in e?_f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class If{constructor(){Nf(this,"map",new Map),Nf(this,"set",((e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])})),Nf(this,"get",(e=>this.map.get(e)||[])),Nf(this,"exists",((e,t)=>this.get(e).includes(t))),Nf(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const s=r.filter((e=>e!==t));s.length?this.map.set(e,s):this.map.delete(e)})),Nf(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var Sf=Object.defineProperty,Tf=Object.defineProperties,Pf=Object.getOwnPropertyDescriptors,Of=Object.getOwnPropertySymbols,xf=Object.prototype.hasOwnProperty,kf=Object.prototype.propertyIsEnumerable,Rf=(e,t,r)=>t in e?Sf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Uf=(e,t)=>{for(var r in t||(t={}))xf.call(t,r)&&Rf(e,r,t[r]);if(Of)for(var r of Of(t))kf.call(t,r)&&Rf(e,r,t[r]);return e},Df=(e,t)=>Tf(e,Pf(t)),Bf=(e,t,r)=>Rf(e,"symbol"!=typeof t?t+"":t,r);class Lf extends le{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Bf(this,"subscriptions",new Map),Bf(this,"topicMap",new If),Bf(this,"events",new y.EventEmitter),Bf(this,"name","subscription"),Bf(this,"version","0.3"),Bf(this,"pending",new Map),Bf(this,"cached",[]),Bf(this,"initialized",!1),Bf(this,"storagePrefix",qh),Bf(this,"subscribeTimeout",(0,b.toMiliseconds)(b.ONE_MINUTE)),Bf(this,"initialSubscribeTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),Bf(this,"clientId"),Bf(this,"batchSubscribeTopicsLimit",500),Bf(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),Bf(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=Ru(t),s={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,s);const n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,s),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}})),Bf(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),Bf(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),Bf(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),Bf(this,"on",((e,t)=>{this.events.on(e,t)})),Bf(this,"once",((e,t)=>{this.events.once(e,t)})),Bf(this,"off",((e,t)=>{this.events.off(e,t)})),Bf(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),Bf(this,"start",(async()=>{await this.onConnect()})),Bf(this,"stop",(async()=>{await this.onDisconnect()})),Bf(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),Bf(this,"checkPending",(async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),Bf(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(C,(async()=>{await this.checkPending()})),this.events.on(ld,(async e=>{const t=ld;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(ud,(async e=>{const t=ud;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=(0,X.U5)(t,this.name),this.clientId=""}get context(){return(0,X.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const s=Ru(r);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const n=Gu("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var s;(!r||r?.transportType===od.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const n={method:Uu(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});const i=null==(s=r?.internal)?void 0:s.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(r?.transportType===od.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch((e=>this.logger.warn(e)))}),(0,b.toMiliseconds)(b.ONE_SECOND)),t;const s=new Promise((async t=>{const r=s=>{s.topic===e&&(this.events.removeListener(ld,r),t(s.id))};this.events.on(ld,r);try{const s=await Jo(new Promise(((e,t)=>{this.relayer.request(n).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ld,r),t(s)}catch{}})),o=await Jo(s,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&i)throw new Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Xh),i)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:Uu(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await Jo(new Promise((e=>{this.relayer.request(t).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Xh)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t={method:Uu(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let r;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{r=await await Jo(new Promise(((e,r)=>{this.relayer.request(t).catch((e=>{this.logger.warn(e),r(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Xh)}return r}rpcUnsubscribe(e,t,r){const s={method:Uu(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,Df(Uf({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Uf({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Uf({},t)),this.topicMap.set(t.topic,e),this.events.emit(ld,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=Vu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ud,Df(Uf({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=Vu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>Df(Uf({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await function(e){return new Promise((t=>setTimeout(t,e)))}((0,b.toMiliseconds)(b.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Cu(e+await this.getClientId())}}var Mf=Object.defineProperty,jf=Object.getOwnPropertySymbols,Ff=Object.prototype.hasOwnProperty,Hf=Object.prototype.propertyIsEnumerable,$f=(e,t,r)=>t in e?Mf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wf=(e,t)=>{for(var r in t||(t={}))Ff.call(t,r)&&$f(e,r,t[r]);if(jf)for(var r of jf(t))Hf.call(t,r)&&$f(e,r,t[r]);return e},zf=(e,t,r)=>$f(e,"symbol"!=typeof t?t+"":t,r);class qf extends ae{constructor(e){super(e),zf(this,"protocol","wc"),zf(this,"version",2),zf(this,"core"),zf(this,"logger"),zf(this,"events",new y.EventEmitter),zf(this,"provider"),zf(this,"messages"),zf(this,"subscriber"),zf(this,"publisher"),zf(this,"name","relayer"),zf(this,"transportExplicitlyClosed",!1),zf(this,"initialized",!1),zf(this,"connectionAttemptInProgress",!1),zf(this,"relayUrl"),zf(this,"projectId"),zf(this,"packageName"),zf(this,"bundleId"),zf(this,"hasExperiencedNetworkDisruption",!1),zf(this,"pingTimeout"),zf(this,"heartBeatTimeout",(0,b.toMiliseconds)(b.THIRTY_SECONDS+b.FIVE_SECONDS)),zf(this,"reconnectTimeout"),zf(this,"connectPromise"),zf(this,"reconnectInProgress",!1),zf(this,"requestsInFlight",[]),zf(this,"connectTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),zf(this,"request",(async e=>{var t,r;this.logger.debug("Publishing Request Payload");const s=e.id||_h().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const n=`${s}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);const i=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==n)),i}catch(e){throw this.logger.debug(`Failed to Publish Request: ${s}`),e}})),zf(this,"resetPingTimeout",(()=>{Mo()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(s=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||s.call(r)}catch(e){this.logger.warn(e,e?.message)}}),this.heartBeatTimeout))})),zf(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),zf(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit("relayer_connect")})),zf(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()})),zf(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),zf(this,"registerProviderListeners",(()=>{this.provider.on(td,this.onPayloadHandler),this.provider.on(rd,this.onConnectHandler),this.provider.on(sd,this.onDisconnectHandler),this.provider.on(nd,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,X.U5)(e.logger,this.name):(0,X.h6)((0,X.iP)({level:e.logger||"error"})),this.messages=new df(this.logger,e.core),this.subscriber=new Lf(this,this.logger),this.publisher=new Cf(this,this.logger),this.relayUrl=e?.relayUrl||Qh,this.projectId=e.projectId,jo()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"android"===(null==r.g?void 0:r.g.Platform.OS)?this.packageName=$o():jo()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"ios"===(null==r.g?void 0:r.g.Platform.OS)&&(this.bundleId=$o()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,X.oI)(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||!1}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:od.relay},"outbound")}async subscribe(e,t){var r,s,n;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const i=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(s=t?.internal)?void 0:s.throwOnFailedPublish);let o,a=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(ld,c),o())};return await Promise.all([new Promise((e=>{o=e,this.subscriber.on(ld,c)})),new Promise((async(r,s)=>{a=await this.subscriber.subscribe(e,Wf({internal:{throwOnFailedPublish:i}},t)).catch((e=>{i&&s(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Jo(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ch())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:Yo(b.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,e)}this.events.emit(Zh,e),await this.recordMessageEvent(e,ad)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(sd,r),await Jo(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(sd,r),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(sd,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(sd,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,b.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,s,n;if(Mo())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(s=null==(r=this.provider)?void 0:r.connection)?void 0:s.socket)||n.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fh(new Wh(function({protocol:e,version:t,relayUrl:r,sdkVersion:s,auth:n,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u={auth:n,ua:zo(e,t,s),projectId:i,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=function(e,t){const r=new URLSearchParams(e);for(const e of Object.keys(t).sort())if(t.hasOwnProperty(e)){const s=t[e];void 0!==s&&r.set(e,s)}return r.toString()}(l[1]||"",u);return l[0]+"?"+h}({sdkVersion:id,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:s}=e;await this.messages.set(r,s,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const s=this.messages.has(t,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Bh(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:s,publishedAt:n,attestation:i}=t.data,o={topic:r,message:s,publishedAt:n,transportType:od.relay,attestation:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Wf({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Lh(e)&&this.events.emit(Yh,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,ad),this.events.emit(Zh,e))}async acknowledgePayload(e){const t=Ih(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(td,this.onPayloadHandler),this.provider.off(rd,this.onConnectHandler),this.provider.off(sd,this.onDisconnectHandler),this.provider.off(nd,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await ch();!function(e){switch(Ho()){case Bo:!function(e){!jo()&&Fo()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Do:!function(e){jo()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e)}}((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,b.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise)return void await this.connectPromise;await this.connect()}}}function Vf(){}function Gf(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function Kf(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function Jf(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Qf="[object Arguments]",Zf="[object Object]";function Yf(e,t,r,s,n,i,o){const a=o(e,t,r,s,n,i);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return Xf(e,t,i,o)}return Xf(e,t,i,o)}function Xf(e,t,r,s){if(Object.is(e,t))return!0;let n=Jf(e),i=Jf(t);if(n===Qf&&(n=Zf),i===Qf&&(i=Zf),n!==i)return!1;switch(n){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const o=(r=r??new Map).get(e),a=r.get(t);if(null!=o&&null!=a)return o===t;r.set(e,t),r.set(t,e);try{switch(n){case"[object Map]":if(e.size!==t.size)return!1;for(const[n,i]of e.entries())if(!t.has(n)||!Yf(i,t.get(n),n,e,t,r,s))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const n=Array.from(e.values()),i=Array.from(t.values());for(let o=0;o<n.length;o++){const a=n[o],c=i.findIndex((n=>Yf(a,n,void 0,e,t,r,s)));if(-1===c)return!1;i.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Yf(e[n],t[n],n,e,t,r,s))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&Xf(new Uint8Array(e),new Uint8Array(t),r,s);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&Xf(new Uint8Array(e),new Uint8Array(t),r,s);case"[object Error]":return e.name===t.name&&e.message===t.message;case Zf:{if(!(Xf(e.constructor,t.constructor,r,s)||Gf(e)&&Gf(t)))return!1;const n=[...Object.keys(e),...Kf(e)],i=[...Object.keys(t),...Kf(t)];if(n.length!==i.length)return!1;for(let i=0;i<n.length;i++){const o=n[i],a=e[o];if(!Object.hasOwn(t,o))return!1;if(!Yf(a,t[o],o,e,t,r,s))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}var eg=Object.defineProperty,tg=Object.getOwnPropertySymbols,rg=Object.prototype.hasOwnProperty,sg=Object.prototype.propertyIsEnumerable,ng=(e,t,r)=>t in e?eg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ig=(e,t)=>{for(var r in t||(t={}))rg.call(t,r)&&ng(e,r,t[r]);if(tg)for(var r of tg(t))sg.call(t,r)&&ng(e,r,t[r]);return e},og=(e,t,r)=>ng(e,"symbol"!=typeof t?t+"":t,r);class ag extends ce{constructor(e,t,r,s=qh,n=void 0){super(e,t,r,s),this.core=e,this.logger=t,this.name=r,og(this,"map",new Map),og(this,"version","0.3"),og(this,"cached",[]),og(this,"initialized",!1),og(this,"getKey"),og(this,"storagePrefix",qh),og(this,"recentlyDeleted",[]),og(this,"recentlyDeletedLimit",200),og(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!Qu(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),og(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),og(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),og(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>function(e,t){return function(e,t,r){return Yf(e,t,void 0,void 0,void 0,void 0,r)}(e,t,Vf)}(t[r],e[r]))))):this.values))),og(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=ig(ig({},this.getData(e)),t);this.map.set(e,r),await this.persist()})),og(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=(0,X.U5)(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return(0,X.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=Vu("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=Vu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=Vu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cg=Object.defineProperty,lg=(e,t,r)=>((e,t,r)=>t in e?cg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ug{constructor(e,t){this.core=e,this.logger=t,lg(this,"name","pairing"),lg(this,"version","0.3"),lg(this,"events",new(w())),lg(this,"pairings"),lg(this,"initialized",!1),lg(this,"storagePrefix",qh),lg(this,"ignoredPayloadTypes",[1]),lg(this,"registeredMethods",[]),lg(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),lg(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),lg(this,"create",(async e=>{this.isInitialized();const t=Eu(),r=await this.core.crypto.setSymKey(t),s=Yo(b.FIVE_MINUTES),n={protocol:"irn"},i={topic:r,expiry:s,relay:n,active:!1,methods:e?.methods},o=Mu({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:s,methods:e?.methods});return this.events.emit(dd,i),this.core.expirer.set(r,s),await this.pairings.set(r,i),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}})),lg(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,t);const{topic:r,symKey:s,relay:n,expiryTimestamp:i,methods:o}=Bu(e.uri);let a;if(t.props.properties.topic=r,t.addTrace("pairing_uri_validation_success"),t.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace("existing_pairing"),a.active)throw t.setError("active_pairing_already_exists"),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace("pairing_not_expired")}const c=i||Yo(b.FIVE_MINUTES),l={topic:r,relay:n,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,l),t.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:r}),this.events.emit(dd,l),t.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(s,r),t.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError("no_internet_connection")}try{await this.core.relayer.subscribe(r,{relay:n})}catch(e){throw t.setError("subscribe_pairing_topic_failure"),e}return t.addTrace("subscribe_pairing_topic_success"),l})),lg(this,"activate",(async({topic:e})=>{this.isInitialized();const t=Yo(b.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),lg(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:s,reject:n}=Ko();this.events.once(ea("pairing_ping",e),(({error:e})=>{e?n(e):s()})),await r()}})),lg(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),lg(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),lg(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),lg(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",Gu("USER_DISCONNECTED")),await this.deletePairing(t))})),lg(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:r,expiry:s,methods:n}=e,i=this.core.crypto.keychain.get(t);return Mu({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:i,relay:r,expiryTimestamp:s,methods:n})})),lg(this,"sendRequest",(async(e,t,r)=>{const s=Nh(t,r),n=await this.core.crypto.encode(e,s),i=hd[t].req;return this.core.history.set(e,s),this.core.relayer.publish(e,n,i),s.id})),lg(this,"sendResult",(async(e,t,r)=>{const s=Ih(e,r),n=await this.core.crypto.encode(t,s),i=(await this.core.history.get(t,e)).request.method,o=hd[i].res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(s)})),lg(this,"sendError",(async(e,t,r)=>{const s=Sh(e,r),n=await this.core.crypto.encode(t,s),i=(await this.core.history.get(t,e)).request.method,o=hd[i]?hd[i].res:hd.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(s)})),lg(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,Gu("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),lg(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>Xo(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),lg(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}})),lg(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r}=e,s=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===s?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(s)})),lg(this,"onPairingPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),lg(this,"onPairingPingResponse",((e,t)=>{const{id:r}=t;setTimeout((()=>{Mh(t)?this.events.emit(ea("pairing_ping",r),{}):jh(t)&&this.events.emit(ea("pairing_ping",r),{error:t.error})}),500)})),lg(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(pd,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),lg(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:r,method:s}=t;try{if(this.registeredMethods.includes(s))return;const t=Gu("WC_METHOD_UNSUPPORTED",s);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),lg(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error(Gu("WC_METHOD_UNSUPPORTED",e))})),lg(this,"isValidPair",((e,t)=>{var r;if(!nh(e)){const{message:r}=Vu("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(_d),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Zu(e,!1))return!!t(e)||t(ia(e))}catch{}return!1}(e.uri)){const{message:r}=Vu("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(_d),new Error(r)}const s=Bu(e?.uri);if(null==(r=s?.relay)||!r.protocol){const{message:e}=Vu("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(_d),new Error(e)}if(null==s||!s.symKey){const{message:e}=Vu("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(_d),new Error(e)}if(null!=s&&s.expiryTimestamp&&(0,b.toMiliseconds)(s?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");const{message:e}=Vu("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),lg(this,"isValidPing",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),lg(this,"isValidDisconnect",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),lg(this,"isValidPairingTopic",(async e=>{if(!Zu(e,!1)){const{message:t}=Vu("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=Vu("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Xo(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=Vu("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=(0,X.U5)(t,this.name),this.pairings=new ag(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,X.oI)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Zh,(async e=>{const{topic:t,message:r,transportType:s}=e;if(this.pairings.keys.includes(t)&&s!==od.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const e=await this.core.crypto.decode(t,r);Bh(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):Lh(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(bd,(async e=>{const{topic:t}=Zo(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}var hg=Object.defineProperty,dg=(e,t,r)=>((e,t,r)=>t in e?hg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class pg extends ne{constructor(e,t){super(e,t),this.core=e,this.logger=t,dg(this,"records",new Map),dg(this,"events",new y.EventEmitter),dg(this,"name","history"),dg(this,"version","0.3"),dg(this,"cached",[]),dg(this,"initialized",!1),dg(this,"storagePrefix",qh),dg(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),dg(this,"set",((e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const s={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:Yo(b.THIRTY_DAYS)};this.records.set(s.id,s),this.persist(),this.events.emit(fd,s)})),dg(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=jh(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(gd,t))})),dg(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),dg(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit(md,r)}})),this.persist()})),dg(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),dg(this,"on",((e,t)=>{this.events.on(e,t)})),dg(this,"once",((e,t)=>{this.events.once(e,t)})),dg(this,"off",((e,t)=>{this.events.off(e,t)})),dg(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,X.U5)(t,this.name)}get context(){return(0,X.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Nh(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=Vu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=Vu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(fd,(e=>{const t=fd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(gd,(e=>{const t=gd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(md,(e=>{const t=md;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(C,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,b.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(md,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fg=Object.defineProperty,gg=(e,t,r)=>((e,t,r)=>t in e?fg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class mg extends ue{constructor(e,t){super(e,t),this.core=e,this.logger=t,gg(this,"expirations",new Map),gg(this,"events",new y.EventEmitter),gg(this,"name","expirer"),gg(this,"version","0.3"),gg(this,"cached",[]),gg(this,"initialized",!1),gg(this,"storagePrefix",qh),gg(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),gg(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),gg(this,"set",((e,t)=>{this.isInitialized();const r=this.formatTarget(e),s={target:r,expiry:t};this.expirations.set(r,s),this.checkExpiry(r,s),this.events.emit(yd,{target:r,expiration:s})})),gg(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),gg(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(wd,{target:t,expiration:r})}})),gg(this,"on",((e,t)=>{this.events.on(e,t)})),gg(this,"once",((e,t)=>{this.events.once(e,t)})),gg(this,"off",((e,t)=>{this.events.off(e,t)})),gg(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,X.U5)(t,this.name)}get context(){return(0,X.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return Qo("topic",e)}(e);if("number"==typeof e)return function(e){return Qo("id",e)}(e);const{message:t}=Vu("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=Vu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=Vu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,b.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(bd,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(C,(()=>this.checkExpirations())),this.events.on(yd,(e=>{const t=yd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(bd,(e=>{const t=bd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(wd,(e=>{const t=wd;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yg=Object.defineProperty,wg=(e,t,r)=>((e,t,r)=>t in e?yg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class bg extends he{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,wg(this,"name","verify-api"),wg(this,"abortController"),wg(this,"isDevEnv"),wg(this,"verifyUrlV3",Ad),wg(this,"storagePrefix",qh),wg(this,"version",2),wg(this,"publicKey"),wg(this,"fetchPromise"),wg(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,b.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),wg(this,"register",(async e=>{if(!Fo()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:s}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${s}`;try{const e=(0,Zs.getDocument)(),t=this.startAbortTimer(5*b.ONE_SECOND),s=await new Promise(((s,i)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),i("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=n=>{if(n.data&&"string"==typeof n.data)try{const i=JSON.parse(n.data);if("verify_attestation"===i.type){if(js(i.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),s(null===i.attestation?"":i.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",s),s}catch(e){this.logger.warn(e)}return""})),wg(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:s}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(js(t).payload.id!==s)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)})),wg(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*b.ONE_SECOND),s=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===s.status?await s.json():void 0})),wg(this,"getVerifyUrl",(e=>{let t=e||Ed;return Cd.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${Ed}`),t=Ed),t})),wg(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(b.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}})),wg(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),wg(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),wg(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}})),wg(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),wg(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),wg(this,"validateAttestation",((e,t)=>{const r=function(e,t){const[r,s,n]=e.split("."),i=Buffer.from(Su(n),"base64");if(64!==i.length)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=Gc(`${r}.${s}`),l=function(e){const t=Buffer.from(e.x,"base64"),r=Buffer.from(e.y,"base64");return Zn([new Uint8Array([4]),t,r])}(t);if(!gu.verify(Zn([o,a]),c,l))throw new Error("Invalid signature");return js(e).payload}(e,t.publicKey),s={hasExpired:(0,b.toMiliseconds)(r.exp)<Date.now(),payload:r};if(s.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:s.payload.origin,isScam:s.payload.isScam,isVerified:s.payload.isVerified}})),this.logger=(0,X.U5)(t,this.name),this.abortController=new AbortController,this.isDevEnv=na(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,X.oI)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,b.toMiliseconds)(e))}}var vg=Object.defineProperty,Eg=(e,t,r)=>((e,t,r)=>t in e?vg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Ag extends de{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Eg(this,"context","echo"),Eg(this,"registerDeviceToken",(async e=>{const{clientId:t,token:r,notificationType:s,enableEncrypted:n=!1}=e,i=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:s,token:r,always_raw:n})})})),this.logger=(0,X.U5)(t,this.context)}}var Cg=Object.defineProperty,_g=Object.getOwnPropertySymbols,Ng=Object.prototype.hasOwnProperty,Ig=Object.prototype.propertyIsEnumerable,Sg=(e,t,r)=>t in e?Cg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Tg=(e,t)=>{for(var r in t||(t={}))Ng.call(t,r)&&Sg(e,r,t[r]);if(_g)for(var r of _g(t))Ig.call(t,r)&&Sg(e,r,t[r]);return e},Pg=(e,t,r)=>Sg(e,"symbol"!=typeof t?t+"":t,r);class Og extends pe{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,Pg(this,"context","event-client"),Pg(this,"storagePrefix",qh),Pg(this,"storageVersion",.1),Pg(this,"events",new Map),Pg(this,"shouldPersist",!1),Pg(this,"init",(async()=>{if(!na())try{const e={eventId:sa(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:zo(this.core.relayer.protocol,this.core.relayer.version,id)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}})),Pg(this,"createEvent",(e=>{const{event:t="ERROR",type:r="",properties:{topic:s,trace:n}}=e,i=sa(),o=this.core.projectId||"",a=Date.now(),c=Tg({eventId:i,timestamp:a,props:{event:t,type:r,properties:{topic:s,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(i));return this.telemetryEnabled&&(this.events.set(i,c),this.shouldPersist=!0),c})),Pg(this,"getEvent",(e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const s=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return s?Tg(Tg({},s),this.setMethods(s.eventId)):void 0})),Pg(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),Pg(this,"setEventListeners",(()=>{this.core.heartbeat.on(C,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,b.fromMiliseconds)(Date.now())-(0,b.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),Pg(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),Pg(this,"addTrace",((e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)})),Pg(this,"setError",((e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)})),Pg(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),Pg(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,Tg(Tg({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}})),Pg(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}})),Pg(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${id}${t}`,{method:"POST",body:JSON.stringify(e)})})),Pg(this,"getAppDomain",(()=>Wo().url)),this.logger=(0,X.U5)(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var xg=Object.defineProperty,kg=Object.getOwnPropertySymbols,Rg=Object.prototype.hasOwnProperty,Ug=Object.prototype.propertyIsEnumerable,Dg=(e,t,r)=>t in e?xg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bg=(e,t)=>{for(var r in t||(t={}))Rg.call(t,r)&&Dg(e,r,t[r]);if(kg)for(var r of kg(t))Ug.call(t,r)&&Dg(e,r,t[r]);return e},Lg=(e,t,r)=>Dg(e,"symbol"!=typeof t?t+"":t,r);class Mg extends re{constructor(e){var t;super(e),Lg(this,"protocol","wc"),Lg(this,"version",2),Lg(this,"name",zh),Lg(this,"relayUrl"),Lg(this,"projectId"),Lg(this,"customStoragePrefix"),Lg(this,"events",new y.EventEmitter),Lg(this,"logger"),Lg(this,"heartbeat"),Lg(this,"relayer"),Lg(this,"crypto"),Lg(this,"storage"),Lg(this,"history"),Lg(this,"expirer"),Lg(this,"pairing"),Lg(this,"verify"),Lg(this,"echoClient"),Lg(this,"linkModeSupportedApps"),Lg(this,"eventClient"),Lg(this,"initialized",!1),Lg(this,"logChunkController"),Lg(this,"on",((e,t)=>this.events.on(e,t))),Lg(this,"once",((e,t)=>this.events.once(e,t))),Lg(this,"off",((e,t)=>this.events.off(e,t))),Lg(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),Lg(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const s={topic:e,message:t,publishedAt:Date.now(),transportType:od.link_mode};this.relayer.onLinkMessageEvent(s,{sessionExists:r})}));const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Qh,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=(0,X.iP)({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:zh}),{logger:n,chunkLoggerController:i}=(0,X.D5)({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=i,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,X.U5)(n,this.name),this.heartbeat=new _,this.crypto=new rf(this,this.logger,e?.keychain),this.history=new pg(this,this.logger),this.expirer=new mg(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Y(Bg(Bg({},Vh),e?.storageOptions)),this.relayer=new qf({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ug(this,this.logger),this.verify=new bg(this,this.logger,this.storage),this.echoClient=new Ag(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Og(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new Mg(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,X.oI)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(cd,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(cd)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){return void console.warn("Failed to get global WalletConnect core",e)}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch{return!0}}}const jg=Mg,Fg="client",Hg=`wc@2:${Fg}:`,$g=Fg,Wg="WALLETCONNECT_DEEPLINK_CHOICE",zg="Proposal expired",qg=b.SEVEN_DAYS,Vg={wc_sessionPropose:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1104},res:{ttl:b.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1106},res:{ttl:b.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1112},res:{ttl:b.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1114},res:{ttl:b.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:b.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:b.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1119}}},Gg={min:b.FIVE_MINUTES,max:b.SEVEN_DAYS},Kg="IDLE",Jg="ACTIVE",Qg={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},Zg=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Yg="wc@1.5:auth:",Xg=`${Yg}:PUB_KEY`;var em=Object.defineProperty,tm=Object.defineProperties,rm=Object.getOwnPropertyDescriptors,sm=Object.getOwnPropertySymbols,nm=Object.prototype.hasOwnProperty,im=Object.prototype.propertyIsEnumerable,om=(e,t,r)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,am=(e,t)=>{for(var r in t||(t={}))nm.call(t,r)&&om(e,r,t[r]);if(sm)for(var r of sm(t))im.call(t,r)&&om(e,r,t[r]);return e},cm=(e,t)=>tm(e,rm(t)),lm=(e,t,r)=>om(e,"symbol"!=typeof t?t+"":t,r);class um extends ye{constructor(e){super(e),lm(this,"name","engine"),lm(this,"events",new(w())),lm(this,"initialized",!1),lm(this,"requestQueue",{state:Kg,queue:[]}),lm(this,"sessionRequestQueue",{state:Kg,queue:[]}),lm(this,"requestQueueDelay",b.ONE_SECOND),lm(this,"expectedPairingMethodMap",new Map),lm(this,"recentlyDeletedMap",new Map),lm(this,"recentlyDeletedLimit",200),lm(this,"relayMessageCache",[]),lm(this,"pendingSessions",new Map),lm(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Vg)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,b.toMiliseconds)(this.requestQueueDelay)))})),lm(this,"connect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=cm(am({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:n,sessionProperties:i,scopedProperties:o,relays:a}=t;let c,l=r,u=!1;try{if(l){const e=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),u=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),e}if(!l||!u){const{topic:e,uri:t}=await this.client.core.pairing.create();l=e,c=t}if(!l){const{message:e}=Vu("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(e)}const h=await this.client.core.crypto.generateKeyPair(),d=Vg.wc_sessionPropose.req.ttl||b.FIVE_MINUTES,p=Yo(d),f=cm(am(am({requiredNamespaces:s,optionalNamespaces:n,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:l},i&&{sessionProperties:i}),o&&{scopedProperties:o}),{id:Ch()}),g=ea("session_connect",f.id),{reject:m,resolve:y,done:w}=Ko(d,zg),v=({id:e})=>{e===f.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(f.id),this.events.emit(g,{error:{message:zg,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(g,(({error:e,session:t})=>{this.client.events.off("proposal_expire",v),e?m(e):t&&y(t)})),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:f,throwOnFailedPublish:!0,clientRpcId:f.id}),await this.setProposal(f.id,f),{uri:c,approval:w}})),lm(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}})),lm(this,"approve",(async e=>{var t,r,s;const n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[Nd]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError("session_approve_namespace_validation_failure"),e}const{id:i,relayProtocol:o,namespaces:a,sessionProperties:c,scopedProperties:l,sessionConfig:u}=e,h=this.client.proposal.get(i);this.client.core.eventClient.deleteEvent({eventId:n.eventId});const{pairingTopic:d,proposer:p,requiredNamespaces:f,optionalNamespaces:g}=h;let m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});m||(m=null==(s=this.client.core.eventClient)?void 0:s.createEvent({type:Nd,properties:{topic:d,trace:[Nd,"session_namespaces_validation_success"]}}));const y=await this.client.core.crypto.generateKeyPair(),w=p.publicKey,b=await this.client.core.crypto.generateSharedKey(y,w),v=am(am(am({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:Yo(qg)},c&&{sessionProperties:c}),l&&{scopedProperties:l}),u&&{sessionConfig:u}),E=od.relay;m.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(b,{transportType:E})}catch(e){throw m.setError("subscribe_session_topic_failure"),e}m.addTrace("subscribe_session_topic_success");const A=cm(am({},v),{topic:b,requiredNamespaces:f,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:v.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:y,transportType:od.relay});await this.client.session.set(b,A),m.addTrace("store_session");try{m.addTrace("publishing_session_settle"),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_settle_publish_failure"),e})),m.addTrace("session_settle_publish_success"),m.addTrace("publishing_session_approve"),await this.sendResult({id:i,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_approve_publish_failure"),e})),m.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,Gu("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:p.metadata}),await this.client.proposal.delete(i,Gu("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(b,Yo(qg)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}})),lm(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:r}=e;let s;try{s=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}s&&(await this.sendError({id:t,topic:s,error:r,rpcOpts:Vg.wc_sessionPropose.reject}),await this.client.proposal.delete(t,Gu("USER_DISCONNECTED")))})),lm(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:r}=e,{done:s,resolve:n,reject:i}=Ko(),o=Ch(),a=_h().toString(),c=this.client.session.get(t).namespaces;return this.events.once(ea("session_update",o),(({error:e})=>{e?i(e):n()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),i(e)})),{acknowledged:s}})),lm(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,r=Ch(),{done:s,resolve:n,reject:i}=Ko();return this.events.once(ea("session_extend",r),(({error:e})=>{e?i(e):n()})),await this.setExpiry(t,Yo(qg)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{i(e)})),{acknowledged:s}})),lm(this,"request",(async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:t,request:s,topic:n,expiry:i=Vg.wc_sessionRequest.req.ttl}=e,o=this.client.session.get(n);o?.transportType===od.relay&&await this.confirmOnlineStateOrThrow();const a=Ch(),c=_h().toString(),{done:l,resolve:u,reject:h}=Ko(i,"Request expired. Please try again.");this.events.once(ea("session_request",a),(({error:e,result:t})=>{e?h(e):u(t)}));const d="wc_sessionRequest",p=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(p)return await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:n,method:d,params:{request:cm(am({},s),{expiryTimestamp:Yo(i)}),chainId:t},expiry:i,throwOnFailedPublish:!0,appLink:p}).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:t,id:a}),await l();const f={request:cm(am({},s),{expiryTimestamp:Yo(i)}),chainId:t},g=this.shouldSetTVF(d,f);return await Promise.all([new Promise((async e=>{await this.sendRequest(am({clientRpcId:a,relayRpcId:c,topic:n,method:d,params:f,expiry:i,throwOnFailedPublish:!0},g&&{tvf:this.getTVFParams(a,f)})).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:t,id:a}),e()})),new Promise((async e=>{var t;if(null==(t=o.sessionConfig)||!t.disableDeepLink){const e=await async function(e,t){let r="";try{if(Fo()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}(this.client.core.storage,Wg);await async function({id:e,topic:t,wcDeepLink:s}){var n;try{if(!s)return;const i="string"==typeof s?JSON.parse(s):s,o=i?.href;if("string"!=typeof o)return;const a=function(e,t,r){const s=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;return n=e.startsWith("https://t.me")?`${n}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const r=Buffer.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(s,!0)}`:`${n}/wc?${s}`,n}(o,e,t),c=Ho();if(c===Bo){if(null==(n=(0,Zs.getDocument)())||!n.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}(a)}else c===Do&&typeof(null==r.g?void 0:r.g.Linking)<"u"&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}({id:a,topic:n,wcDeepLink:e})}e()})),l()]).then((e=>e[2]))})),lm(this,"respond",(async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:s}=r,n=this.client.session.get(t);n.transportType===od.relay&&await this.confirmOnlineStateOrThrow();const i=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);Mh(r)?await this.sendResult({id:s,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:i}):jh(r)&&await this.sendError({id:s,topic:t,error:r.error,appLink:i}),this.cleanupAfterResponse(e)})),lm(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=Ch(),r=_h().toString(),{done:s,resolve:n,reject:i}=Ko();this.events.once(ea("session_ping",e),(({error:e})=>{e?i(e):n()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),s()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),lm(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:s}=e,n=_h().toString(),i=Ch();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:s},throwOnFailedPublish:!0,relayRpcId:n,clientRpcId:i})})),lm(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:Gu("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=Vu("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),lm(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,s=Object.keys(e.namespaces),n=Object.keys(r);let i=!0;return!!qo(n,s)&&(s.forEach((t=>{const{accounts:s,methods:n,events:o}=e.namespaces[t],a=Fu(s),c=r[t];qo(Io(t,c),a)&&qo(c.methods,n)&&qo(c.events,o)||(i=!1)})),i)}(t,e)))))),lm(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),lm(this,"authenticate",(async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const s=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),n=s?od.link_mode:od.relay;n===od.relay&&await this.confirmOnlineStateOrThrow();const{chains:i,statement:o="",uri:a,domain:c,nonce:l,type:u,exp:h,nbf:d,methods:p=[],expiry:f}=e,g=[...e.resources||[]],{topic:m,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:n});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:y}});const w=await this.client.core.crypto.generateKeyPair(),b=Au(w);if(await Promise.all([this.client.auth.authKeys.set(Xg,{responseTopic:b,publicKey:w}),this.client.auth.pairingTopics.set(b,{topic:b,pairingTopic:m})]),await this.client.core.relayer.subscribe(b,{transportType:n}),this.client.logger.info(`sending request to new pairing topic: ${m}`),p.length>0){const{namespace:e}=No(i[0]);let t=function(e,t,r){const s=function(e,t,r,s={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:Xa(t,r,s)}}}(e,t,r);return ec(s)}(e,"request",p);ic(g)&&(t=rc(t,g.pop())),g.push(t)}const v=f&&f>Vg.wc_sessionAuthenticate.req.ttl?f:Vg.wc_sessionAuthenticate.req.ttl,E={authPayload:{type:u??"caip122",chains:i,statement:o,aud:a,domain:c,version:"1",nonce:l,iat:(new Date).toISOString(),exp:h,nbf:d,resources:g},requester:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:Yo(v)},A={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:i,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:Yo(Vg.wc_sessionPropose.req.ttl),id:Ch()},{done:C,resolve:_,reject:N}=Ko(v,"Request expired"),I=Ch(),S=ea("session_connect",A.id),T=ea("session_request",I),P=async({error:e,session:t})=>{this.events.off(T,O),e?N(e):t&&_({session:t})},O=async e=>{var r,s,i;if(await this.deletePendingAuthRequest(I,{message:"fulfilled",code:0}),e.error){const t=Gu("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(S,P),N(e.error.message))}await this.deleteProposal(A.id),this.events.off(S,P);const{cacaos:o,responder:a}=e.result,c=[],l=[];for(const e of o){await Qa({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),N(Gu("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,r=ic(t.resources),s=[Ka(t.iss)],n=Ja(t.iss);if(r){const e=sc(r),t=nc(r);c.push(...e),s.push(...t)}for(const e of s)l.push(`${e}:${n}`)}const u=await this.client.core.crypto.generateSharedKey(w,a.publicKey);let h;c.length>0&&(h={topic:u,acknowledged:!0,self:{publicKey:w,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:Yo(qg),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:Wu([...new Set(c)],[...new Set(l)]),transportType:n},await this.client.core.relayer.subscribe(u,{transportType:n}),await this.client.session.set(u,h),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:a.metadata}),h=this.client.session.get(u)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(s=a.metadata.redirect)&&s.linkMode&&null!=(i=a.metadata.redirect)&&i.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(u,{transportType:od.link_mode})),_({auths:o,session:h})};let x;this.events.once(S,P),this.events.once(T,O);try{if(s){const e=Nh("wc_sessionAuthenticate",E,I);this.client.core.history.set(m,e);const r=await this.client.core.crypto.encode("",e,{type:2,encoding:bu});x=ju(t,m,r)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:E,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:I}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:A,expiry:Vg.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:A.id})])}catch(e){throw this.events.off(S,P),this.events.off(T,O),e}return await this.setProposal(A.id,A),await this.setAuthRequest(I,{request:cm(am({},E),{verifyContext:{}}),pairingTopic:m,transportType:n}),{uri:x??y,response:C}})),lm(this,"approveSessionAuthenticate",(async e=>{const{id:t,auths:r}=e,s=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw s.setError("no_internet_connection"),e}const n=this.getPendingAuthRequest(t);if(!n)throw s.setError("authenticated_session_pending_request_not_found"),new Error(`Could not find pending auth request with id ${t}`);const i=n.transportType||od.relay;i===od.relay&&await this.confirmOnlineStateOrThrow();const o=n.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Au(o),l={type:1,receiverPublicKey:o,senderPublicKey:a},u=[],h=[];for(const e of r){if(!await Qa({cacao:e,projectId:this.client.core.projectId})){s.setError("invalid_cacao");const e=Gu("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:l}),new Error(e.message)}s.addTrace("cacaos_verified");const{p:r}=e,n=ic(r.resources),i=[Ka(r.iss)],o=Ja(r.iss);if(n){const e=sc(n),t=nc(n);u.push(...e),i.push(...t)}for(const e of i)h.push(`${e}:${o}`)}const d=await this.client.core.crypto.generateSharedKey(a,o);let p;if(s.addTrace("create_authenticated_session_topic"),u?.length>0){p={topic:d,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:n.requester.metadata},controller:o,expiry:Yo(qg),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:n.pairingTopic,namespaces:Wu([...new Set(u)],[...new Set(h)]),transportType:i},s.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(d,{transportType:i})}catch(e){throw s.setError("subscribe_authenticated_session_topic_failure"),e}s.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(d,p),s.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:n.pairingTopic,metadata:n.requester.metadata})}s.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:l,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(n.requester.metadata,i)})}catch(e){throw s.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:n.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:p}})),lm(this,"rejectSessionAuthenticate",(async e=>{this.isInitialized();const{id:t,reason:r}=e,s=this.getPendingAuthRequest(t);if(!s)throw new Error(`Could not find pending auth request with id ${t}`);s.transportType===od.relay&&await this.confirmOnlineStateOrThrow();const n=s.requester.publicKey,i=await this.client.core.crypto.generateKeyPair(),o=Au(n),a={type:1,receiverPublicKey:n,senderPublicKey:i};await this.sendError({id:t,topic:o,error:r,encodeOpts:a,rpcOpts:Vg.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,Gu("USER_DISCONNECTED"))})),lm(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:r}=e;return Za(t,r)})),lm(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),lm(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var s,n;return(null==(s=r.peerMetadata)?void 0:s.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}})),lm(this,"deleteSession",(async e=>{var t;const{topic:r,expirerHasDeleted:s=!1,emitEvent:n=!0,id:i=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,Gu("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Wg).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,Gu("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=Kg),n&&this.client.events.emit("session_delete",{id:i,topic:r})})),lm(this,"deleteProposal",(async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,Gu("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")})),lm(this,"deletePendingSessionRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=Kg,this.client.events.emit("session_request_expire",{id:e}))})),lm(this,"deletePendingAuthRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])})),lm(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),lm(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,Yo(Vg.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),lm(this,"setAuthRequest",(async(e,t)=>{const{request:r,pairingTopic:s,transportType:n=od.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:s,verifyContext:r.verifyContext,transportType:n})})),lm(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:r,params:s,verifyContext:n}=e,i=s.request.expiryTimestamp||Yo(Vg.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,i),await this.client.pendingRequest.set(t,{id:t,topic:r,params:s,verifyContext:n})})),lm(this,"sendRequest",(async e=>{const{topic:t,method:s,params:n,expiry:i,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:l,tvf:u}=e,h=Nh(s,n,a);let d;const p=!!l;try{const e=p?bu:wu;d=await this.client.core.crypto.encode(t,h,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let f;if(Zg.includes(s)){const e=Cu(JSON.stringify(h)),t=Cu(d);f=await this.client.core.verify.register({id:t,decryptedId:e})}const g=Vg[s].req;if(g.attestation=f,i&&(g.ttl=i),o&&(g.id=o),this.client.core.history.set(t,h),p){const e=ju(l,t,d);await r.g.Linking.openURL(e,this.client.name)}else{const e=Vg[s].req;i&&(e.ttl=i),o&&(e.id=o),e.tvf=cm(am({},u),{correlationId:h.id}),c?(e.internal=cm(am({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,d,e)):this.client.core.relayer.publish(t,d,e).catch((e=>this.client.logger.error(e)))}return h.id})),lm(this,"sendResult",(async e=>{const{id:t,topic:s,result:n,throwOnFailedPublish:i,encodeOpts:o,appLink:a}=e,c=Ih(t,n);let l;const u=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=u?bu:wu;l=await this.client.core.crypto.encode(s,c,cm(am({},o||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),e}let h,d;try{h=await this.client.core.history.get(s,t);const e=h.request;try{this.shouldSetTVF(e.method,e.params)&&(d=this.getTVFParams(t,e.params,n))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${t}) failed`),e}if(u){const e=ju(a,s,l);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,r=Vg[e].res;r.tvf=cm(am({},d),{correlationId:t}),i?(r.internal=cm(am({},r.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,r)):this.client.core.relayer.publish(s,l,r).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)})),lm(this,"sendError",(async e=>{const{id:t,topic:s,error:n,encodeOpts:i,rpcOpts:o,appLink:a}=e,c=Sh(t,n);let l;const u=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=u?bu:wu;l=await this.client.core.crypto.encode(s,c,cm(am({},i||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}let h;try{h=await this.client.core.history.get(s,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${t}) failed`),e}if(u){const e=ju(a,s,l);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,t=o||Vg[e].res;this.client.core.relayer.publish(s,l,t)}await this.client.core.history.resolve(c)})),lm(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;Xo(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Xo(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),lm(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),lm(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),lm(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==Jg){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Jg;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=Kg}else this.client.logger.info("Request queue already active, skipping...")})),lm(this,"processRequest",(async e=>{const{topic:t,payload:r,attestation:s,transportType:n,encryptedId:i}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:s,encryptedId:i});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:s,encryptedId:i,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:s,encryptedId:i,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}})),lm(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r,transportType:s}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,s);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}})),lm(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:r}=Vu("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)})),lm(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:r}=e,s=this.expectedPairingMethodMap.get(t);return!(!s||s.includes(r)||!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0))})),lm(this,"onSessionProposeRequest",(async e=>{const{topic:t,payload:r,attestation:s,encryptedId:n}=e,{params:i,id:o}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),this.isValidConnect(am({},r.params));const a=i.expiryTimestamp||Yo(Vg.wc_sessionPropose.req.ttl),c=am({id:o,pairingTopic:t,expiryTimestamp:a},i);await this.setProposal(o,c);const l=await this.getVerifyContext({attestationId:s,hash:Cu(JSON.stringify(r)),encryptedId:n,metadata:c.proposer.metadata});e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:l})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:Vg.wc_sessionPropose.autoReject}),this.client.logger.error(e)}})),lm(this,"onSessionProposeResponse",(async(e,t,r)=>{const{id:s}=t;if(Mh(t)){const{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});const i=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:i});const o=i.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(s,{sessionTopic:c,pairingTopic:e,proposalId:s,publicKey:o});const l=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:e})}else if(jh(t)){await this.client.proposal.delete(s,Gu("USER_DISCONNECTED"));const e=ea("session_connect",s);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),lm(this,"onSessionSettleRequest",(async(e,t)=>{const{id:r,params:s}=t;try{this.isValidSessionSettleRequest(s);const{relay:r,controller:n,expiry:i,namespaces:o,sessionProperties:a,scopedProperties:c,sessionConfig:l}=t.params,u=[...this.pendingSessions.values()].find((t=>t.sessionTopic===e));if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);const h=this.client.proposal.get(u.proposalId),d=cm(am(am(am({topic:e,relay:r,expiry:i,namespaces:o,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:n.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),l&&{sessionConfig:l}),{transportType:od.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(ea("session_connect",u.proposalId),{session:d}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),lm(this,"onSessionSettleResponse",(async(e,t)=>{const{id:r}=t;Mh(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(ea("session_approve",r),{})):jh(t)&&(await this.client.session.delete(e,Gu("USER_DISCONNECTED")),this.events.emit(ea("session_approve",r),{error:t.error}))})),lm(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:r,id:s}=t;try{const t=`${e}_session_update`,n=uh.get(t);if(n&&this.isRequestOutOfSync(n,s))return this.client.logger.warn(`Discarding out of sync request - ${s}`),void this.sendError({id:s,topic:e,error:Gu("INVALID_UPDATE_REQUEST")});this.isValidUpdate(am({topic:e},r));try{uh.set(t,s),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw uh.delete(t),e}this.client.events.emit("session_update",{id:s,topic:e,params:r})}catch(t){await this.sendError({id:s,topic:e,error:t}),this.client.logger.error(t)}})),lm(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),lm(this,"onSessionUpdateResponse",((e,t)=>{const{id:r}=t,s=ea("session_update",r);if(0===this.events.listenerCount(s))throw new Error(`emitting ${s} without any listeners`);Mh(t)?this.events.emit(ea("session_update",r),{}):jh(t)&&this.events.emit(ea("session_update",r),{error:t.error})})),lm(this,"onSessionExtendRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Yo(qg)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),lm(this,"onSessionExtendResponse",((e,t)=>{const{id:r}=t,s=ea("session_extend",r);if(0===this.events.listenerCount(s))throw new Error(`emitting ${s} without any listeners`);Mh(t)?this.events.emit(ea("session_extend",r),{}):jh(t)&&this.events.emit(ea("session_extend",r),{error:t.error})})),lm(this,"onSessionPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),lm(this,"onSessionPingResponse",((e,t)=>{const{id:r}=t,s=ea("session_ping",r);setTimeout((()=>{if(0===this.events.listenerCount(s))throw new Error(`emitting ${s} without any listeners 2176`);Mh(t)?this.events.emit(ea("session_ping",r),{}):jh(t)&&this.events.emit(ea("session_ping",r),{error:t.error})}),500)})),lm(this,"onSessionDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(ed,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Gu("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}})),lm(this,"onSessionRequest",(async e=>{var t,r,s;const{topic:n,payload:i,attestation:o,encryptedId:a,transportType:c}=e,{id:l,params:u}=i;try{await this.isValidRequest(am({topic:n},u));const e=this.client.session.get(n),i={id:l,topic:n,params:u,verifyContext:await this.getVerifyContext({attestationId:o,hash:Cu(JSON.stringify(Nh("wc_sessionRequest",u,l))),encryptedId:a,metadata:e.peer.metadata,transportType:c})};await this.setPendingSessionRequest(i),c===od.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(s=this.client.signConfig)&&s.disableRequestQueue?this.emitSessionRequest(i):(this.addSessionRequestToSessionRequestQueue(i),this.processSessionRequestQueue())}catch(e){await this.sendError({id:l,topic:n,error:e}),this.client.logger.error(e)}})),lm(this,"onSessionRequestResponse",((e,t)=>{const{id:r}=t,s=ea("session_request",r);if(0===this.events.listenerCount(s))throw new Error(`emitting ${s} without any listeners`);Mh(t)?this.events.emit(ea("session_request",r),{result:t.result}):jh(t)&&this.events.emit(ea("session_request",r),{error:t.error})})),lm(this,"onSessionEventRequest",(async(e,t)=>{const{id:r,params:s}=t;try{const t=`${e}_session_event_${s.event.name}`,n=uh.get(t);if(n&&this.isRequestOutOfSync(n,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(am({topic:e},s)),this.client.events.emit("session_event",{id:r,topic:e,params:s}),uh.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),lm(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),Mh(t)?this.events.emit(ea("session_request",r),{result:t.result}):jh(t)&&this.events.emit(ea("session_request",r),{error:t.error})})),lm(this,"onSessionAuthenticateRequest",(async e=>{var t;const{topic:r,payload:s,attestation:n,encryptedId:i,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=s.params,l=await this.getVerifyContext({attestationId:n,hash:Cu(JSON.stringify(s)),encryptedId:i,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:r,id:s.id,authPayload:a,verifyContext:l,expiryTimestamp:c};await this.setAuthRequest(s.id,{request:u,pairingTopic:r,transportType:o}),o===od.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:s.params,id:s.id,verifyContext:l})}catch(e){this.client.logger.error(e);const t=s.params.requester.publicKey,n=await this.client.core.crypto.generateKeyPair(),i=this.getAppLinkIfEnabled(s.params.requester.metadata,o),a={type:1,receiverPublicKey:t,senderPublicKey:n};await this.sendError({id:s.id,topic:r,error:e,encodeOpts:a,rpcOpts:Vg.wc_sessionAuthenticate.autoReject,appLink:i})}})),lm(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),lm(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=Kg,this.processSessionRequestQueue()}),(0,b.toMiliseconds)(this.requestQueueDelay))})),lm(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=ea("session_request",e.request.id);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit(ea("session_request",e.request.id),{error:t})}))})),lm(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===Jg)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=Jg,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")})),lm(this,"emitSessionRequest",(e=>{this.client.events.emit("session_request",e)})),lm(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:Nh("wc_sessionPropose",cm(am({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})})),lm(this,"isValidConnect",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:s,sessionProperties:n,scopedProperties:i,relays:o}=e;if(Qu(t)||await this.isValidPairingTopic(t),!function(e){let t=!1;return e?e&&Ku(e)&&e.length&&e.forEach((e=>{t=sh(e)})):t=!0,t}(o)){const{message:e}=Vu("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(e)}if(!Qu(r)&&0!==Ju(r)&&this.validateNamespaces(r,"requiredNamespaces"),!Qu(s)&&0!==Ju(s)&&this.validateNamespaces(s,"optionalNamespaces"),Qu(n)||this.validateSessionProps(n,"sessionProperties"),!Qu(i)){this.validateSessionProps(i,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(s||{}));if(!Object.keys(i).every((t=>e.includes(t))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(i)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),lm(this,"validateNamespaces",((e,t)=>{const r=function(e,t,r){let s=null;if(e&&Ju(e)){const n=th(e,t);n&&(s=n);const i=function(e,t,r){let s=null;return Object.entries(e).forEach((([e,n])=>{if(s)return;const i=function(e,t,r){let s=null;return Ku(t)&&t.length?t.forEach((e=>{s||Xu(e)||(s=Gu("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Xu(e)||(s=Gu("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}(e,Io(e,n),`${t} ${r}`);i&&(s=i)})),s}(e,t,r);i&&(s=i)}else s=Vu("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}(e,"connect()",t);if(r)throw new Error(r.message)})),lm(this,"isValidApprove",(async e=>{if(!nh(e))throw new Error(Vu("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:s,sessionProperties:n,scopedProperties:i}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const o=this.client.proposal.get(t),a=rh(r,"approve()");if(a)throw new Error(a.message);const c=oh(o.requiredNamespaces,r,"approve()");if(c)throw new Error(c.message);if(!Zu(s,!0)){const{message:e}=Vu("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(e)}if(Qu(n)||this.validateSessionProps(n,"sessionProperties"),!Qu(i)){this.validateSessionProps(i,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(i).every((t=>e.has(t))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(i)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),lm(this,"isValidReject",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&Yu(e.code,!1)&&e.message&&Zu(e.message,!1))}(r)){const{message:e}=Vu("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}})),lm(this,"isValidSessionSettleRequest",(e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:s,expiry:n}=e;if(!sh(t)){const{message:e}=Vu("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const i=function(e){let t=null;return Zu(e?.publicKey,!1)||(t=Vu("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t}(r);if(i)throw new Error(i.message);const o=rh(s,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Xo(n)){const{message:e}=Vu("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),lm(this,"isValidUpdate",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const s=this.client.session.get(t),n=rh(r,"update()");if(n)throw new Error(n.message);const i=oh(s.requiredNamespaces,r,"update()");if(i)throw new Error(i.message)})),lm(this,"isValidExtend",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),lm(this,"isValidRequest",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:s,expiry:n}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!ih(i,s)){const{message:e}=Vu("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(e)}if(!function(e){return!(Qu(e)||!Zu(e.method,!1))}(r)){const{message:e}=Vu("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Zu(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Fu(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}(i,s,r.method)){const{message:e}=Vu("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(n&&!function(e,t){return Yu(e,!1)&&e<=t.max&&e>=t.min}(n,Gg)){const{message:e}=Vu("MISSING_OR_INVALID",`request() expiry: ${n}. Expiry must be a number (in seconds) between ${Gg.min} and ${Gg.max}`);throw new Error(e)}})),lm(this,"isValidRespond",(async e=>{var t;if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:s}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!function(e){return!(Qu(e)||Qu(e.result)&&Qu(e.error)||!Yu(e.id,!1)||!Zu(e.jsonrpc,!1))}(s)){const{message:e}=Vu("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(e)}})),lm(this,"isValidPing",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),lm(this,"isValidEmit",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:s}=e;await this.isValidSessionTopic(t);const{namespaces:n}=this.client.session.get(t);if(!ih(n,s)){const{message:e}=Vu("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(e)}if(!function(e){return!(Qu(e)||!Zu(e.name,!1))}(r)){const{message:e}=Vu("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Zu(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Fu(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}(n,s,r.name)){const{message:e}=Vu("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}})),lm(this,"isValidDisconnect",(async e=>{if(!nh(e)){const{message:t}=Vu("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),lm(this,"isValidAuthenticate",(e=>{const{chains:t,uri:r,domain:s,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!Zu(r,!1))throw new Error("uri is required parameter");if(!Zu(s,!1))throw new Error("domain is required parameter");if(!Zu(n,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>No(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:i}=No(t[0]);if("eip155"!==i)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),lm(this,"getVerifyContext",(async e=>{const{attestationId:t,hash:r,encryptedId:s,metadata:n,transportType:i}=e,o={verified:{verifyUrl:n.verifyUrl||Ed,validation:"UNKNOWN",origin:n.url||""}};try{if(i===od.link_mode){const e=this.getAppLinkIfEnabled(n,i);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:s,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o})),lm(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((r,s)=>{if(null==r){const{message:n}=Vu("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[s]}`);throw new Error(n)}}))})),lm(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),lm(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}})),lm(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=Vu("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}})),lm(this,"isLinkModeEnabled",((e,t)=>{var s,n,i,o,a,c,l,u,h;return!(!e||t!==od.link_mode)&&!0===(null==(n=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:n.linkMode)&&void 0!==(null==(o=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(l=e?.redirect)?void 0:l.universal)&&""!==(null==(u=e?.redirect)?void 0:u.universal)&&!0===(null==(h=e?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==r.g?void 0:r.g.Linking)<"u"})),lm(this,"getAppLinkIfEnabled",((e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0})),lm(this,"handleLinkModeMessage",(({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=ra(e,"topic")||"",r=decodeURIComponent(ra(e,"wc_ev")||""),s=this.client.session.keys.includes(t);s&&this.client.session.update(t,{transportType:od.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:s})})),lm(this,"registerLinkModeListeners",(async()=>{var e;if(na()||jo()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==r.g?void 0:r.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),lm(this,"shouldSetTVF",((e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;const{request:r}=t;return Object.keys(Qg).includes(r.method)})),lm(this,"getTVFParams",((e,t,r)=>{var s,n;try{const i=t.request.method,o=this.extractTxHashesFromResult(i,r);return cm(am({correlationId:e,rpcMethods:[i],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(n=null==(s=t.request.params)?void 0:s[0])?void 0:n.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}})),lm(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;const s=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(s)&&s.length%2==0}catch{}return!1})),lm(this,"extractTxHashesFromResult",((e,t)=>{try{if("string"==typeof t)return[t];const r=t[Qg[e].key];if(Ku(r))return"solana_signAllTransactions"===e?r.map((e=>function(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const s=r[0];if(0===s)throw new Error("No signatures found");const n=1+64*s;if(r.length<n)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(e,"base64").slice(1,65);return Jn.A.encode(i)}(e))):r;if("string"==typeof r)return[r]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[e,r]of Object.entries(t))for(const t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Vu("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Zh,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:s,transportType:n}=e,{publicKey:i}=this.client.auth.authKeys.keys.includes(Xg)?this.client.auth.authKeys.get(Xg):{responseTopic:void 0,publicKey:void 0};try{const e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:i,encoding:n===od.link_mode?bu:wu});Bh(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:s,transportType:n,encryptedId:Cu(r)})):Lh(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:n}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:n}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(bd,(async e=>{const{topic:t,id:r}=Zo(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,Vu("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,Vu("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(dd,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(pd,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!Zu(e,!1)){const{message:t}=Vu("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Vu("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Xo(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Vu("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Zu(e,!1)){const{message:t}=Vu("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Vu("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Xo(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Vu("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Vu("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(Zu(e,!1)){const{message:t}=Vu("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=Vu("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!function(e){return"number"==typeof e}(e)){const{message:t}=Vu("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Vu("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Xo(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Vu("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class hm extends ag{constructor(e,t){super(e,t,"proposal",Hg),this.core=e,this.logger=t}}class dm extends ag{constructor(e,t){super(e,t,"session",Hg),this.core=e,this.logger=t}}class pm extends ag{constructor(e,t){super(e,t,"request",Hg,(e=>e.id)),this.core=e,this.logger=t}}class fm extends ag{constructor(e,t){super(e,t,"authKeys",Yg,(()=>Xg)),this.core=e,this.logger=t}}class gm extends ag{constructor(e,t){super(e,t,"pairingTopics",Yg),this.core=e,this.logger=t}}class mm extends ag{constructor(e,t){super(e,t,"requests",Yg,(e=>e.id)),this.core=e,this.logger=t}}var ym=Object.defineProperty,wm=(e,t,r)=>((e,t,r)=>t in e?ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class bm{constructor(e,t){this.core=e,this.logger=t,wm(this,"authKeys"),wm(this,"pairingTopics"),wm(this,"requests"),this.authKeys=new fm(this.core,this.logger),this.pairingTopics=new gm(this.core,this.logger),this.requests=new mm(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var vm=Object.defineProperty,Em=(e,t,r)=>((e,t,r)=>t in e?vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Am extends me{constructor(e){super(e),Em(this,"protocol","wc"),Em(this,"version",2),Em(this,"name",$g),Em(this,"metadata"),Em(this,"core"),Em(this,"logger"),Em(this,"events",new y.EventEmitter),Em(this,"engine"),Em(this,"session"),Em(this,"proposal"),Em(this,"pendingRequest"),Em(this,"auth"),Em(this,"signConfig"),Em(this,"on",((e,t)=>this.events.on(e,t))),Em(this,"once",((e,t)=>this.events.once(e,t))),Em(this,"off",((e,t)=>this.events.off(e,t))),Em(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),Em(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),Em(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"update",(async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"request",(async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"find",(e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),Em(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),Em(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),this.name=e?.name||$g,this.metadata=function(e){var t,r;const s=Wo();try{return null!=e&&e.url&&s.url&&e.url!==s.url&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${s.url}. This is probably unintended and can lead to issues.`),e.url=s.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter((e=>""!==e))),((e,t)=>To(e,Po(t)))(Uo(Uo({},s),e),{url:e?.url||s.url,name:e?.name||s.name,description:e?.description||s.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:s.icons})}catch(t){return console.warn("Error populating app metadata",t),e||s}}(e?.metadata),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,X.h6)((0,X.iP)({level:e?.logger||"error"}));this.core=e?.core||new jg(e),this.logger=(0,X.U5)(t,this.name),this.session=new dm(this.core,this.logger),this.proposal=new hm(this.core,this.logger),this.pendingRequest=new pm(this.core,this.logger),this.engine=new um(this),this.auth=new bm(this.core,this.logger)}static async init(e){const t=new Am(e);return await t.initialize(),t}get context(){return(0,X.oI)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,b.toMiliseconds)(b.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Cm=r(4945),_m=r.n(Cm),Nm=Object.defineProperty,Im=Object.defineProperties,Sm=Object.getOwnPropertyDescriptors,Tm=Object.getOwnPropertySymbols,Pm=Object.prototype.hasOwnProperty,Om=Object.prototype.propertyIsEnumerable,xm=(e,t,r)=>t in e?Nm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,km=(e,t)=>{for(var r in t||(t={}))Pm.call(t,r)&&xm(e,r,t[r]);if(Tm)for(var r of Tm(t))Om.call(t,r)&&xm(e,r,t[r]);return e},Rm=(e,t)=>Im(e,Sm(t));const Um={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class Dm{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new y.EventEmitter,this.isAvailable=!1,this.registering=!1,!Rh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=(0,q.h)(e),r=await(await _m()(this.url,Rm(km({},Um),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!Rh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(new Error("HTTP connection is missing or invalid"));e()}))}))}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=(0,q.h)({id:1,jsonrpc:"2.0",method:"test",params:[]});await _m()(e,Rm(km({},Um),{body:t}))}this.onOpen()}catch(e){const t=this.parseError(e);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?(0,q.j)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),s=Sh(e,r.message||r.toString());this.events.emit("payload",s)}parseError(e,t=this.url){return Eh(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const Bm="error",Lm="wc@2:universal_provider:",Mm="https://rpc.walletconnect.org/v1/",jm="generic",Fm=`${Mm}bundler`,Hm="default_chain_changed";function $m(){}function Wm(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function zm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qm(e){return"object"==typeof e&&null!==e}function Vm(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function Gm(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Km="[object String]",Jm="[object Number]",Qm="[object Boolean]",Zm="[object Arguments]";function Ym(e,t,r,s=new Map,n=void 0){const i=n?.(e,t,r,s);if(null!=i)return i;if(Wm(e))return e;if(s.has(e))return s.get(e);if(Array.isArray(e)){const t=new Array(e.length);s.set(e,t);for(let i=0;i<e.length;i++)t[i]=Ym(e[i],i,r,s,n);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;s.set(e,t);for(const[i,o]of e)t.set(i,Ym(o,i,r,s,n));return t}if(e instanceof Set){const t=new Set;s.set(e,t);for(const i of e)t.add(Ym(i,void 0,r,s,n));return t}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(zm(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);s.set(e,t);for(let i=0;i<e.length;i++)t[i]=Ym(e[i],i,r,s,n);return t}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return s.set(e,t),Xm(t,e,r,s,n),t}if(typeof File<"u"&&e instanceof File){const t=new File([e],e.name,{type:e.type});return s.set(e,t),Xm(t,e,r,s,n),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return s.set(e,t),Xm(t,e,r,s,n),t}if(e instanceof Error){const t=new e.constructor;return s.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,Xm(t,e,r,s,n),t}if("object"==typeof e&&function(e){switch(Gm(e)){case Zm:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case Qm:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case Jm:case"[object Object]":case"[object RegExp]":case"[object Set]":case Km:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return s.set(e,t),Xm(t,e,r,s,n),t}return e}function Xm(e,t,r=e,s,n){const i=[...Object.keys(t),...Vm(t)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=Ym(t[a],a,r,s,n))}}function ey(e){return function(e,t){return function(e,t){return Ym(e,void 0,e,new Map,t)}(e,((r,s,n,i)=>{const o=t?.(r,s,n,i);if(null!=o)return o;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case Jm:case Km:case Qm:{const t=new e.constructor(e?.valueOf());return Xm(t,e),t}case Zm:{const t={};return Xm(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}))}(e)}function ty(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===Gm(e)}function ry(e){return zm(e)}function sy(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return!(null==t||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ny(e,t,r,s){if(Wm(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(s.has(t))return function(e){if(Wm(e))return e;if(Array.isArray(e)||zm(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){const t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){const t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}if(typeof File<"u"&&e instanceof File)return new r([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){const r=Object.create(t);return Object.assign(r,e)}return e}(s.get(t));if(s.set(t,e),Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]=t[e]??void 0}const n=[...Object.keys(t),...Vm(t)];for(let i=0;i<n.length;i++){const o=n[i];let a=t[o],c=e[o];if(ty(a)&&(a={...a}),ty(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=ey(a)),Array.isArray(a))if("object"==typeof c&&null!=c){const e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){const s=t[r];e[s]=c[s]}c=e}else c=[];const l=r(c,a,o,e,t,s);null!=l?e[o]=l:Array.isArray(a)||qm(c)&&qm(a)?e[o]=ny(c,a,r,s):null==c&&sy(a)?e[o]=ny({},a,r,s):null==c&&ry(a)?e[o]=ey(a):(void 0===c||void 0!==a)&&(e[o]=a)}return e}var iy=Object.defineProperty,oy=Object.defineProperties,ay=Object.getOwnPropertyDescriptors,cy=Object.getOwnPropertySymbols,ly=Object.prototype.hasOwnProperty,uy=Object.prototype.propertyIsEnumerable,hy=(e,t,r)=>t in e?iy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dy=(e,t)=>{for(var r in t||(t={}))ly.call(t,r)&&hy(e,r,t[r]);if(cy)for(var r of cy(t))uy.call(t,r)&&hy(e,r,t[r]);return e},py=(e,t)=>oy(e,ay(t));function fy(e,t,r){var s;const n=No(e);return(null==(s=t.rpcMap)?void 0:s[n.reference])||`${Mm}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function gy(e){return e.includes(":")?e.split(":")[1]:e}function my(e){return e.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function yy(e={},t={}){return function(e,...t){return function(e,...t){const r=t.slice(0,-1),s=t[t.length-1];let n=e;for(let e=0;e<r.length;e++)n=ny(n,r[e],s,new Map);return n}(e,...t,$m)}(wy(e),wy(t))}function wy(e){var t,r,s,n;const i={};if(!Ju(e))return i;for(const[o,a]of Object.entries(e)){const e=Hu(o)?[o]:a.chains,c=a.methods||[],l=a.events||[],u=a.rpcMap||{},h=$u(o);i[h]=py(dy(dy({},i[h]),a),{chains:ta(e,null==(t=i[h])?void 0:t.chains),methods:ta(c,null==(r=i[h])?void 0:r.methods),events:ta(l,null==(s=i[h])?void 0:s.events),rpcMap:dy(dy({},u),null==(n=i[h])?void 0:n.rpcMap)})}return i}function by(e){return e.includes(":")?e.split(":")[2]:e}function vy(e){const t={};for(const[r,s]of Object.entries(e)){const e=s.methods||[],n=s.events||[],i=s.accounts||[],o=Hu(r)?[r]:s.chains?s.chains:my(s.accounts);t[r]={chains:o,methods:e,events:n,accounts:i}}return t}function Ey(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const Ay={},Cy=e=>Ay[e],_y=(e,t)=>{Ay[e]=t};var Ny=Object.defineProperty,Iy=(e,t,r)=>((e,t,r)=>t in e?Ny(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Sy{constructor(e){Iy(this,"name","polkadot"),Iy(this,"client"),Iy(this,"httpProviders"),Iy(this,"events"),Iy(this,"namespace"),Iy(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Hm,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const s=gy(t);e[s]=this.createHttpProvider(s,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}}var Ty=Object.defineProperty,Py=Object.defineProperties,Oy=Object.getOwnPropertyDescriptors,xy=Object.getOwnPropertySymbols,ky=Object.prototype.hasOwnProperty,Ry=Object.prototype.propertyIsEnumerable,Uy=(e,t,r)=>t in e?Ty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dy=(e,t)=>{for(var r in t||(t={}))ky.call(t,r)&&Uy(e,r,t[r]);if(xy)for(var r of xy(t))Ry.call(t,r)&&Uy(e,r,t[r]);return e},By=(e,t)=>Py(e,Oy(t)),Ly=(e,t,r)=>Uy(e,"symbol"!=typeof t?t+"":t,r);class My{constructor(e){Ly(this,"name","eip155"),Ly(this,"client"),Ly(this,"chainId"),Ly(this,"namespace"),Ly(this,"httpProviders"),Ly(this,"events"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Hm,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||fy(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const s=parseInt(gy(t));e[s]=this.createHttpProvider(s,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let s=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const n=parseInt(s,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${n}`)}return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,s;const n=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!n)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const i=this.client.session.get(e.topic),o=(null==(s=i?.sessionProperties)?void 0:s.capabilities)||{};if(null!=o&&o[n])return o?.[n];const a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:By(Dy({},i.sessionProperties||{}),{capabilities:By(Dy({},o||{}),{[n]:a})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return a}async getCallStatus(e){var t,r;const s=this.client.session.get(e.topic),n=null==(t=s.sessionProperties)?void 0:t.bundler_name;if(n){const t=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}const i=null==(r=s.sessionProperties)?void 0:r.bundler_url;if(i)try{return await this.getUserOperationReceipt(i,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,i)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const s=new URL(e),n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nh("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!n.ok)throw new Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${Fm}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var jy=Object.defineProperty,Fy=(e,t,r)=>((e,t,r)=>t in e?jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Hy{constructor(e){Fy(this,"name","solana"),Fy(this,"client"),Fy(this,"httpProviders"),Fy(this,"events"),Fy(this,"namespace"),Fy(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Hm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const s=gy(t);e[s]=this.createHttpProvider(s,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}}var $y=Object.defineProperty,Wy=(e,t,r)=>((e,t,r)=>t in e?$y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class zy{constructor(e){Wy(this,"name","cosmos"),Wy(this,"client"),Wy(this,"httpProviders"),Wy(this,"events"),Wy(this,"namespace"),Wy(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Hm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const s=gy(t);e[s]=this.createHttpProvider(s,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}}var qy=Object.defineProperty,Vy=(e,t,r)=>((e,t,r)=>t in e?qy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Gy{constructor(e){Vy(this,"name","algorand"),Vy(this,"client"),Vy(this,"httpProviders"),Vy(this,"events"),Vy(this,"namespace"),Vy(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||fy(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Hm,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Fh(new Dm(r,Cy("disableProviderPing")))}}var Ky=Object.defineProperty,Jy=(e,t,r)=>((e,t,r)=>t in e?Ky(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Qy{constructor(e){Jy(this,"name","cip34"),Jy(this,"client"),Jy(this,"httpProviders"),Jy(this,"events"),Jy(this,"namespace"),Jy(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Hm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const r=this.getCardanoRPCUrl(t),s=gy(t);e[s]=this.createHttpProvider(s,r)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}}var Zy=Object.defineProperty,Yy=(e,t,r)=>((e,t,r)=>t in e?Zy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Xy{constructor(e){Yy(this,"name","elrond"),Yy(this,"client"),Yy(this,"httpProviders"),Yy(this,"events"),Yy(this,"namespace"),Yy(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Hm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const s=gy(t);e[s]=this.createHttpProvider(s,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}}var ew=Object.defineProperty,tw=(e,t,r)=>((e,t,r)=>t in e?ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class rw{constructor(e){tw(this,"name","multiversx"),tw(this,"client"),tw(this,"httpProviders"),tw(this,"events"),tw(this,"namespace"),tw(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Hm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const s=gy(t);e[s]=this.createHttpProvider(s,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}}var sw=Object.defineProperty,nw=(e,t,r)=>((e,t,r)=>t in e?sw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class iw{constructor(e){nw(this,"name","near"),nw(this,"client"),nw(this,"httpProviders"),nw(this,"events"),nw(this,"namespace"),nw(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||fy(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Hm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace);return typeof r>"u"?void 0:new Fh(new Dm(r,Cy("disableProviderPing")))}}var ow=Object.defineProperty,aw=(e,t,r)=>((e,t,r)=>t in e?ow(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class cw{constructor(e){aw(this,"name","tezos"),aw(this,"client"),aw(this,"httpProviders"),aw(this,"events"),aw(this,"namespace"),aw(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||fy(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Hm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{e[t]=this.createHttpProvider(t)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace);return typeof r>"u"?void 0:new Fh(new Dm(r))}}var lw=Object.defineProperty,uw=(e,t,r)=>((e,t,r)=>t in e?lw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class hw{constructor(e){uw(this,"name",jm),uw(this,"client"),uw(this,"httpProviders"),uw(this,"events"),uw(this,"namespace"),uw(this,"chainId"),this.namespace=e.namespace,this.events=Cy("events"),this.client=Cy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Hm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){var e,t;const r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach((e=>{const t=No(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)})),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||fy(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fh(new Dm(r,Cy("disableProviderPing")))}}var dw=Object.defineProperty,pw=Object.defineProperties,fw=Object.getOwnPropertyDescriptors,gw=Object.getOwnPropertySymbols,mw=Object.prototype.hasOwnProperty,yw=Object.prototype.propertyIsEnumerable,ww=(e,t,r)=>t in e?dw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bw=(e,t)=>{for(var r in t||(t={}))mw.call(t,r)&&ww(e,r,t[r]);if(gw)for(var r of gw(t))yw.call(t,r)&&ww(e,r,t[r]);return e},vw=(e,t)=>pw(e,fw(t)),Ew=(e,t,r)=>ww(e,"symbol"!=typeof t?t+"":t,r);class Aw{constructor(e){Ew(this,"client"),Ew(this,"namespaces"),Ew(this,"optionalNamespaces"),Ew(this,"sessionProperties"),Ew(this,"scopedProperties"),Ew(this,"events",new(w())),Ew(this,"rpcProviders",{}),Ew(this,"session"),Ew(this,"providerOpts"),Ew(this,"logger"),Ew(this,"uri"),Ew(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,X.h6)((0,X.iP)({level:e?.logger||Bm})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new Aw(e);return await t.initialize(),t}async request(e,t,r){const[s,n]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:bw({},e),chainId:`${s}:${n}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,s){const n=(new Date).getTime();this.request(e,r,s).then((e=>t(null,Ih(n,e)))).catch((e=>t(e,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:Gu("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const n=await s();if(this.session=n.session,this.session){const e=vy(this.session.namespaces);this.namespaces=yy(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const s=await r();this.session=s;const n=vy(s.namespaces);return this.namespaces=yy(this.namespaces,n),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,s]=this.validateChain(e),n=this.getProvider(r);n.name===jm?n.setDefaultChain(`${r}:${s}`,t):n.setDefaultChain(s,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Ku(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await Am.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Bm,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{const e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map((e=>$u(e))))];_y("client",this.client),_y("events",this.events),_y("disableProviderPing",this.disableProviderPing),e.forEach((e=>{if(!this.session)return;const t=function(e,t){const r=Object.keys(t.namespaces).filter((t=>t.includes(e)));if(!r.length)return[];const s=[];return r.forEach((e=>{const r=t.namespaces[e].accounts;s.push(...r)})),s}(e,this.session),r=my(t),s=yy(this.namespaces,this.optionalNamespaces),n=vw(bw({},s[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new My({namespace:n});break;case"algorand":this.rpcProviders[e]=new Gy({namespace:n});break;case"solana":this.rpcProviders[e]=new Hy({namespace:n});break;case"cosmos":this.rpcProviders[e]=new zy({namespace:n});break;case"polkadot":this.rpcProviders[e]=new Sy({namespace:n});break;case"cip34":this.rpcProviders[e]=new Qy({namespace:n});break;case"elrond":this.rpcProviders[e]=new Xy({namespace:n});break;case"multiversx":this.rpcProviders[e]=new rw({namespace:n});break;case"near":this.rpcProviders[e]=new iw({namespace:n});break;case"tezos":this.rpcProviders[e]=new cw({namespace:n});break;default:this.rpcProviders[jm]?this.rpcProviders[jm].updateNamespace(n):this.rpcProviders[jm]=new hw({namespace:n})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{var t;const{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{var t;const{params:r,topic:s}=e;if(s!==(null==(t=this.session)?void 0:t.topic))return;const{event:n}=r;if("accountsChanged"===n.name){const e=n.data;e&&Ku(e)&&this.events.emit("accountsChanged",e.map(by))}else if("chainChanged"===n.name){const e=r.chainId,t=r.event.data,s=$u(e),n=Ey(e)!==Ey(t)?`${s}:${Ey(t)}`:e;this.onChainChanged(n)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var r,s;if(e!==(null==(r=this.session)?void 0:r.topic))return;const{namespaces:n}=t,i=null==(s=this.client)?void 0:s.session.get(e);this.session=vw(bw({},i),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",vw(bw({},Gu("USER_DISCONNECTED")),{data:e.topic})))})),this.on(Hm,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[jm]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:s,scopedProperties:n}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=s,this.scopedProperties=n}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map((e=>$u(e))).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const s=$u(Object.keys(this.namespaces)[0]);return[s,this.rpcProviders[s].getDefaultChain()]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const n=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:n,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var s,n;try{if(t===r)return;const i=null==(n=null==(s=this.session)?void 0:s.namespaces[e])?void 0:n.accounts;if(!i)return;const o=i.filter((e=>e.includes(`${r}:`))).map(by);if(!Ku(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,s={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const s=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Lm}/${e}${s}`,t)}async getFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${Lm}/${e}${r}`)}async deleteFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${Lm}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const e of t)e.startsWith(Lm)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}},4353:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,r="millisecond",s="second",n="minute",i="hour",o="day",a="week",c="month",l="quarter",u="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},m=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},y={s:m,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),s=Math.floor(r/60),n=r%60;return(t<=0?"+":"-")+m(s,2,"0")+":"+m(n,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var s=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(s,c),i=r-n<0,o=t.clone().add(s+(i?-1:1),c);return+(-(s+(r-n)/(i?n-o:o-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:a,d:o,D:h,h:i,m:n,s,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",b={};b[w]=g;var v="$isDayjsObject",E=function(e){return e instanceof N||!(!e||!e[v])},A=function e(t,r,s){var n;if(!t)return w;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(n=i),r&&(b[i]=r,n=i);var o=t.split("-");if(!n&&o.length>1)return e(o[0])}else{var a=t.name;b[a]=t,n=a}return!s&&n&&(w=n),n||!s&&w},C=function(e,t){if(E(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new N(r)},_=y;_.l=A,_.i=E,_.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var N=function(){function g(e){this.$L=A(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var m=g.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(p);if(s){var n=s[2]-1||0,i=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return _},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return C(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<C(e)},m.$g=function(e,t,r){return _.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,l=!!_.u(t)||t,d=_.p(e),p=function(e,t){var s=_.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return l?s:s.endOf(o)},f=function(e,t){return _.w(r.toDate()[e].apply(r.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,m=this.$M,y=this.$D,w="set"+(this.$u?"UTC":"");switch(d){case u:return l?p(1,0):p(31,11);case c:return l?p(1,m):p(0,m+1);case a:var b=this.$locale().weekStart||0,v=(g<b?g+7:g)-b;return p(l?y-v:y+(6-v),m);case o:case h:return f(w+"Hours",0);case i:return f(w+"Minutes",1);case n:return f(w+"Seconds",2);case s:return f(w+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var a,l=_.p(e),d="set"+(this.$u?"UTC":""),p=(a={},a[o]=d+"Date",a[h]=d+"Date",a[c]=d+"Month",a[u]=d+"FullYear",a[i]=d+"Hours",a[n]=d+"Minutes",a[s]=d+"Seconds",a[r]=d+"Milliseconds",a)[l],f=l===o?this.$D+(t-this.$W):t;if(l===c||l===u){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[_.p(e)]()},m.add=function(r,l){var h,d=this;r=Number(r);var p=_.p(l),f=function(e){var t=C(d);return _.w(t.date(t.date()+Math.round(e*r)),d)};if(p===c)return this.set(c,this.$M+r);if(p===u)return this.set(u,this.$y+r);if(p===o)return f(1);if(p===a)return f(7);var g=(h={},h[n]=e,h[i]=t,h[s]=1e3,h)[p]||1,m=this.$d.getTime()+r*g;return _.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var s=e||"YYYY-MM-DDTHH:mm:ssZ",n=_.z(this),i=this.$H,o=this.$m,a=this.$M,c=r.weekdays,l=r.months,u=r.meridiem,h=function(e,r,n,i){return e&&(e[r]||e(t,s))||n[r].slice(0,i)},p=function(e){return _.s(i%12||12,e,"0")},g=u||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s};return s.replace(f,(function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return _.s(t.$y,4,"0");case"M":return a+1;case"MM":return _.s(a+1,2,"0");case"MMM":return h(r.monthsShort,a,l,3);case"MMMM":return h(l,a);case"D":return t.$D;case"DD":return _.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(r.weekdaysMin,t.$W,c,2);case"ddd":return h(r.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return _.s(i,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(i,o,!0);case"A":return g(i,o,!1);case"m":return String(o);case"mm":return _.s(o,2,"0");case"s":return String(t.$s);case"ss":return _.s(t.$s,2,"0");case"SSS":return _.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,d){var p,f=this,g=_.p(h),m=C(r),y=(m.utcOffset()-this.utcOffset())*e,w=this-m,b=function(){return _.m(f,m)};switch(g){case u:p=b()/12;break;case c:p=b();break;case l:p=b()/3;break;case a:p=(w-y)/6048e5;break;case o:p=(w-y)/864e5;break;case i:p=w/t;break;case n:p=w/e;break;case s:p=w/1e3;break;default:p=w}return d?p:_.a(p)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return b[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),s=A(e,t,!0);return s&&(r.$L=s),r},m.clone=function(){return _.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),I=N.prototype;return C.prototype=I,[["$ms",r],["$s",s],["$m",n],["$H",i],["$W",o],["$M",c],["$y",u],["$D",h]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,N,C),e.$i=!0),C},C.locale=A,C.isDayjs=E,C.unix=function(e){return C(1e3*e)},C.en=b[w],C.Ls=b,C.p={},C}()},4376:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});const s={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"}},4549:(e,t,r)=>{"use strict";r.d(t,{f:()=>y});var s=r(9073),n=r(4707);const i=2147483648,o={convertEVMChainIdToCoinType(e){if(e>=i)throw new Error("Invalid chainId");return(i|e)>>>0}};var a=r(7508),c=r(5940),l=r(3450),u=r(5595),h=r(7388),d=r(9177),p=r(9088),f=r(8508);const g=(0,s.BX)({suggestions:[],loading:!1}),m={state:g,subscribe:e=>(0,s.B1)(g,(()=>e(g))),subscribeKey:(e,t)=>(0,n.u$)(g,e,t),async resolveName(e){try{return await u.T.lookupEnsName(e)}catch(e){const t=e;throw new Error(t?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(e){try{return await u.T.lookupEnsName(e),!0}catch{return!1}},async getSuggestions(e){try{g.loading=!0,g.suggestions=[];const t=await u.T.getEnsNameSuggestions(e);return g.suggestions=t.suggestions.map((e=>({...e,name:e.name})))||[],g.suggestions}catch(e){const t=y.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{g.loading=!1}},async getNamesForAddress(e){try{if(!h.W.state.activeCaipNetwork)return[];const t=a.i.getEnsFromCacheForAddress(e);if(t)return t;const r=await u.T.reverseLookupEnsName({address:e});return a.i.updateEnsCache({address:e,ens:r,timestamp:Date.now()}),r}catch(e){const t=y.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(e){const t=h.W.state.activeCaipNetwork;if(!t)throw new Error("Network not found");const r=l.U.state.address,s=p.a.getAuthConnector();if(!r||!s)throw new Error("Address or auth connector not found");g.loading=!0;try{const s=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});f.I.pushTransactionStack({onCancel(){f.I.replace("RegisterAccountName")}});const n=await d.x.signMessage(s);g.loading=!1;const i=t.id;if(!i)throw new Error("Network not found");const a=o.convertEVMChainIdToCoinType(Number(i));await u.T.registerEnsName({coinType:a,address:r,signature:n,message:s}),l.U.setProfileName(e,t.chainNamespace),f.I.replace("RegisterAccountNameSuccess")}catch(t){const r=y.parseEnsApiError(t,`Error registering name ${e}`);throw f.I.replace("RegisterAccountName"),new Error(r)}finally{g.loading=!1}},validateName:e=>/^[a-zA-Z0-9-]{4,}$/u.test(e),parseEnsApiError(e,t){const r=e;return r?.reasons?.[0]?.description||t}},y=(0,c.X)(m)},4707:(e,t,r)=>{"use strict";r.d(t,{u$:()=>n,zC:()=>i});var s=r(9073);function n(e,t,r,n){let i=e[t];return(0,s.B1)(e,(()=>{const s=e[t];Object.is(i,s)||r(i=s)}),n)}function i(e){const t=(0,s.BX)({data:Array.from(e||[]),has(e){return this.data.some((t=>t[0]===e))},set(e,t){const r=this.data.find((t=>t[0]===e));return r?r[1]=t:this.data.push([e,t]),this},get(e){var t;return null==(t=this.data.find((t=>t[0]===e)))?void 0:t[1]},delete(e){const t=this.data.findIndex((t=>t[0]===e));return-1!==t&&(this.data.splice(t,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(e){this.data.forEach((t=>{e(t[1],t[0],this)}))},keys(){return this.data.map((e=>e[0])).values()},values(){return this.data.map((e=>e[1])).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(t,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(t),t}Symbol()},4874:(e,t,r)=>{"use strict";const s=r(793);e.exports=o;const n=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},i={mapHttpRequest:d,mapHttpResponse:d,wrapRequestSerializer:p,wrapResponseSerializer:p,wrapErrorSerializer:p,req:d,res:d,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function o(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);const s=e.serializers||{},i=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,s);let d=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const p=e.level||"info",g=Object.create(r);g.log||(g.log=f),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(m,g,"error","log"),a(m,g,"fatal","error"),a(m,g,"warn","error"),a(m,g,"info","log"),a(m,g,"debug","log"),a(m,g,"trace","log")}});const m={transmit:t,serialize:i,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:h(e)};return g.levels=o.levels,g.level=p,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=f,g.serializers=s,g._serialize=i,g._stdErrSerialize=d,g.child=function(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},i&&r.serializers&&(n.serializers=r.serializers);const o=n.serializers;if(i&&o){var a=Object.assign({},s,o),h=!0===e.browser.serialize?Object.keys(a):i;delete r.serializers,c([r],h,a,this._stdErrSerialize)}function d(e){this._childLevel=1+(0|e._childLevel),this.error=l(e,r,"error"),this.fatal=l(e,r,"fatal"),this.warn=l(e,r,"warn"),this.info=l(e,r,"info"),this.debug=l(e,r,"debug"),this.trace=l(e,r,"trace"),a&&(this.serializers=a,this._serialize=h),t&&(this._logEvent=u([].concat(e._logEvent.bindings,r)))}return d.prototype=this,new d(this)},t&&(g._logEvent=u()),g}function a(e,t,r,i){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?f:a[r]?a[r]:n[r]||n[i]||f,function(e,t,r){var i;(e.transmit||t[r]!==f)&&(t[r]=(i=t[r],function(){const a=e.timestamp(),l=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var d=0;d<l.length;d++)l[d]=arguments[d];if(e.serialize&&!e.asObject&&c(l,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(h,function(e,t,r,n){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const i=r.slice();let a=i[0];const l={};n&&(l.time=n),l.level=o.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==a&&"object"==typeof a){for(;u--&&"object"==typeof i[0];)Object.assign(l,i.shift());a=i.length?s(i.shift(),i):void 0}else"string"==typeof a&&(a=s(i.shift(),i));return void 0!==a&&(l.msg=a),l}(this,r,l,a)):i.apply(h,l),e.transmit){const s=e.transmit.level||t.level,n=o.levels.values[s],i=o.levels.values[r];if(i<n)return;!function(e,t,r){const s=t.send,n=t.ts,i=t.methodLevel,o=t.methodValue,a=t.val,l=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=i,e._logEvent.level.value=o,s(i,e._logEvent,a),e._logEvent=u(l)}(this,{ts:a,methodLevel:r,methodValue:i,transmitLevel:s,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},l)}}))}(e,t,r)}function c(e,t,r,s){for(const n in e)if(s&&e[n]instanceof Error)e[n]=o.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(const s in e[n])t&&t.indexOf(s)>-1&&s in r&&(e[n][s]=r[s](e[n][s]))}function l(e,t,r){return function(){const s=new Array(1+arguments.length);s[0]=t;for(var n=1;n<s.length;n++)s[n]=arguments[n-1];return e[r].apply(this,s)}}function u(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:m}function d(){return{}}function p(e){return e}function f(){}function g(){return!1}function m(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=i,o.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},4945:(e,t,r)=>{var s="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=s.DOMException}return e.prototype=s,new e}();!function(e){!function(t){var s=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},n="URLSearchParams"in s,i="Symbol"in s&&"iterator"in Symbol,o="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in s,c="ArrayBuffer"in s;if(c)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function m(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function w(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=w(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=w(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(o)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,s,n,i=g(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=m(t=new FileReader),n=(s=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?s[1]:"utf-8",t.readAsText(e,n),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),s=0;s<t.length;s++)r[s]=String.fromCharCode(t[s]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=h(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[h(e)]},f.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},f.prototype.set=function(e,t){this.map[h(e)]=d(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),p(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),p(e)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var v=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),v.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in s)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function A(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),s=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(n))}})),t}function C(e,t){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var _=[301,302,303,307,308];C.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})},t.DOMException=s.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function N(e,r){return new Promise((function(n,i){var a=new E(e,r);if(a.signal&&a.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function u(){l.abort()}if(l.onload=function(){var e,t,r={statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),s=r.shift().trim();if(s){var n=r.join(":").trim();try{t.append(s,n)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(l.status<200||l.status>599)?r.status=200:r.status=l.status,r.url="responseURL"in l?l.responseURL:r.headers.get("X-Request-URL");var s="response"in l?l.response:l.responseText;setTimeout((function(){n(new C(s,r))}),0)},l.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request timed out"))}),0)},l.onabort=function(){setTimeout((function(){i(new t.DOMException("Aborted","AbortError"))}),0)},l.open(a.method,function(e){try{return""===e&&s.location.href?s.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?l.withCredentials=!0:"omit"===a.credentials&&(l.withCredentials=!1),"responseType"in l&&(o?l.responseType="blob":c&&(l.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof f||s.Headers&&r.headers instanceof s.Headers)){var p=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){p.push(h(e)),l.setRequestHeader(e,d(r.headers[e]))})),a.headers.forEach((function(e,t){-1===p.indexOf(t)&&l.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){l.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",u),l.onreadystatechange=function(){4===l.readyState&&a.signal.removeEventListener("abort",u)}),l.send(void 0===a._bodyInit?null:a._bodyInit)}))}N.polyfill=!0,s.fetch||(s.fetch=N,s.Headers=f,s.Request=E,s.Response=C),t.Headers=f,t.Request=E,t.Response=C,t.fetch=N,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=s.fetch?s:n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},5042:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(2733),n=r(9088),i=r(7508),o=r(6742),a=r(8249),c=r(5306),l=r(6092),u=r(1482);const h={filterOutDuplicatesByRDNS(e){const t=s.H.state.enableEIP6963?n.a.state.connectors:[],r=i.i.getRecentWallets(),a=t.map((e=>e.info?.rdns)).filter(Boolean),c=r.map((e=>e.rdns)).filter(Boolean),l=a.concat(c);if(l.includes("io.metamask.mobile")&&o.w.isMobile()){const e=l.indexOf("io.metamask.mobile");l[e]="io.metamask"}return e.filter((e=>!l.includes(String(e?.rdns))))},filterOutDuplicatesByIds(e){const t=n.a.state.connectors.filter((e=>"ANNOUNCED"===e.type||"INJECTED"===e.type)),r=i.i.getRecentWallets(),s=t.map((e=>e.explorerId)),o=r.map((e=>e.id)),a=s.concat(o);return e.filter((e=>!a.includes(e?.id)))},filterOutDuplicateWallets(e){const t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled(e){const{connectors:t}=n.a.state,{featuredWalletIds:r}=s.H.state,i=t.filter((e=>"ANNOUNCED"===e.type)).reduce(((e,t)=>t.info?.rdns?(e[t.info.rdns]=!0,e):e),{});return e.map((e=>({...e,installed:Boolean(e.rdns)&&Boolean(i[e.rdns??""])}))).sort(((e,t)=>{const s=Number(t.installed)-Number(e.installed);if(0!==s)return s;if(r?.length){const s=r.indexOf(e.id),n=r.indexOf(t.id);if(-1!==s&&-1!==n)return s-n;if(-1!==s)return-1;if(-1!==n)return 1}return 0}))},getConnectOrderMethod(e,t){const r=e?.connectMethodsOrder||s.H.state.features?.connectMethodsOrder,i=t||n.a.state.connectors;if(r)return r;const{injected:o,announced:c}=l.g.getConnectorsByType(i,a.Np.state.recommended,a.Np.state.featured),h=o.filter(l.g.showConnector),d=c.filter(l.g.showConnector);return h.length||d.length?["wallet","email","social"]:u.o.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(e){const t=Boolean(e.rdns)&&a.Np.state.excludedWallets.some((t=>t.rdns===e.rdns)),r=Boolean(e.name)&&a.Np.state.excludedWallets.some((t=>c.y.isLowerCaseMatch(t.name,e.name)));return t||r}}},5215:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>i,__asyncDelegator:()=>v,__asyncGenerator:()=>b,__asyncValues:()=>E,__await:()=>w,__awaiter:()=>u,__classPrivateFieldGet:()=>N,__classPrivateFieldSet:()=>I,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>p,__extends:()=>n,__generator:()=>h,__importDefault:()=>_,__importStar:()=>C,__makeTemplateObject:()=>A,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>y,__values:()=>f});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},s(e,t)};function n(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};function o(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}function a(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,s){t(r,s,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))}function h(e,t){var r,s,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(n=2&i[0]?s.return:i[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,i[1])).done)return n;switch(s=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,s=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],s=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function d(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,n,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var s=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,n++)s[n]=i[o];return s}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=r.apply(e,t||[]),i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(e){n[e]&&(s[e]=function(t){return new Promise((function(r,s){i.push([e,t,r,s])>1||a(e,t)}))})}function a(e,t){try{(r=n[e](t)).value instanceof w?Promise.resolve(r.value.v).then(c,l):u(i[0][2],r)}catch(e){u(i[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function v(e){var t,r;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,n){t[s]=e[s]?function(t){return(r=!r)?{value:w(e[s](t)),done:"return"===s}:n?n(t):t}:n}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(r){t[r]=e[r]&&function(t){return new Promise((function(s,n){!function(e,t,r,s){Promise.resolve(s).then((function(t){e({value:t,done:r})}),t)}(s,n,(t=e[r](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5306:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var s=r(9510);const n={getCaipTokens(e){if(!e)return;const t={};return Object.entries(e).forEach((([e,r])=>{t[`${s.o.EIP155}:${e}`]=r})),t},isLowerCaseMatch:(e,t)=>e?.toLowerCase()===t?.toLowerCase()}},5595:(e,t,r)=>{"use strict";r.d(t,{T:()=>g});var s=r(9073),n=r(2944),i=r(6742),o=r(5905),a=r(7508),c=r(3450),l=r(7388),u=r(2733),h=r(1871);const d={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},p=i.w.getBlockchainApiUrl(),f=(0,s.BX)({clientId:null,api:new o.Z({baseUrl:p,clientId:null}),supportedChains:{http:[],ws:[]}}),g={state:f,async get(e){const{st:t,sv:r}=g.getSdkProperties(),s=u.H.state.projectId,n={...e.params||{},st:t,sv:r,projectId:s};return f.api.get({...e,params:n})},getSdkProperties(){const{sdkType:e,sdkVersion:t}=u.H.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{f.supportedChains.http.length||await g.getSupportedNetworks()}catch(e){return!1}return f.supportedChains.http.includes(e)},async getSupportedNetworks(){try{const e=await g.get({path:"v1/supported-chains"});return f.supportedChains=e,e}catch{return f.supportedChains}},async fetchIdentity({address:e,caipNetworkId:t}){if(!await g.isNetworkSupported(t))return{avatar:"",name:""};const r=a.i.getIdentityFromCacheForAddress(e);if(r)return r;const s=await g.get({path:`/v1/identity/${e}`,params:{sender:l.W.state.activeCaipAddress?i.w.getPlainAddress(l.W.state.activeCaipAddress):void 0}});return a.i.updateIdentityCache({address:e,identity:s,timestamp:Date.now()}),s},fetchTransactions:async({account:e,cursor:t,onramp:r,signal:s,cache:n,chainId:i})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/account/${e}/history`,params:{cursor:t,onramp:r,chainId:i},signal:s,cache:n}):{data:[],next:void 0},fetchSwapQuote:async({amount:e,userAddress:t,from:r,to:s,gasPrice:n})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:r,to:s,gasPrice:n}}):{quotes:[]},fetchSwapTokens:async({chainId:e})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]},fetchTokenPrice:async({addresses:e})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:u.H.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]},fetchSwapAllowance:async({tokenAddress:e,userAddress:t})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"},async fetchGasPrice({chainId:e}){const{st:t,sv:r}=g.getSdkProperties();if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return g.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:r}})},async generateSwapCalldata({amount:e,from:t,to:r,userAddress:s,disableEstimate:i}){if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return f.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:n.oU.CONVERT_SLIPPAGE_TOLERANCE},projectId:u.H.state.projectId,from:t,to:r,userAddress:s,disableEstimate:i}})},async generateApproveCalldata({from:e,to:t,userAddress:r}){const{st:s,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return g.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:e,to:t,st:s,sv:n}})},async getBalance(e,t,r){const{st:s,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))return h.P.showError("Token Balance Unavailable"),{balances:[]};const i=`${t}:${e}`,o=a.i.getBalanceCacheForCaipAddress(i);if(o)return o;const c=await g.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:r,st:s,sv:n}});return a.i.updateBalanceCache({caipAddress:i,balance:c,timestamp:Date.now()}),c},lookupEnsName:async e=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]},reverseLookupEnsName:async({address:e})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/reverse/${e}`,params:{sender:c.U.state.address,apiVersion:"2"}}):[],getEnsNameSuggestions:async e=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]},registerEnsName:async({coinType:e,address:t,message:r,signature:s})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:r,signature:s},headers:{"Content-Type":"application/json"}}):{success:!1},generateOnRampURL:async({destinationWallets:e,partnerUserId:t,defaultNetwork:r,purchaseAmount:s,paymentAmount:n})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?(await f.api.post({path:"/v1/generators/onrampurl",params:{projectId:u.H.state.projectId},body:{destinationWallets:e,defaultNetwork:r,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:s,presetFiatAmount:n}})).url:"",async getOnrampOptions(){if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await g.get({path:"/v1/onramp/options"})}catch(e){return d}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:r,network:s}){try{return await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?await f.api.post({path:"/v1/onramp/quote",params:{projectId:u.H.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:r,network:s}}):null}catch(e){return{coinbaseFee:{amount:r,currency:t.id},networkFee:{amount:r,currency:t.id},paymentSubtotal:{amount:r,currency:t.id},paymentTotal:{amount:r,currency:t.id},purchaseAmount:{amount:r,currency:t.id},quoteId:"mocked-quote-id"}}},getSmartSessions:async e=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/sessions/${e}`}):[],revokeSmartSession:async(e,t,r)=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:u.H.state.projectId},body:{pci:t,signature:r}}):{success:!1},setClientId(e){f.clientId=e,f.api=new o.Z({baseUrl:p,clientId:e})}}},5682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(5215);s.__exportStar(r(7173),t),s.__exportStar(r(1089),t)},5824:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>d,Fc:()=>l,Id:()=>h,O8:()=>o,qv:()=>c,po:()=>f,Ow:()=>a,ZJ:()=>u,DH:()=>i,ld:()=>p});const s="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(3011);function i(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}const c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function l(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function u(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,n.DO)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];(0,n.DO)(s),t+=s.length}const r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r}class d{clone(){return this._cloneInto()}}function p(e){const t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function f(e=32){if(s&&"function"==typeof s.getRandomValues)return s.getRandomValues(new Uint8Array(e));if(s&&"function"==typeof s.randomBytes)return s.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},5826:function(e){e.exports=function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}}}()},5884:(e,t,r)=>{"use strict";r.d(t,{aG:()=>w});var s=r(9073),n=r(4707),i=r(4376),o=r(2944),a=r(5940),c=r(3450),l=r(8249),u=r(5595),h=r(7388),d=r(2733);const p={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},f={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},g={providers:o.tM,selectedProvider:null,error:null,purchaseCurrency:p,paymentCurrency:f,purchaseCurrencies:[p],paymentCurrencies:[],quotesLoading:!1},m=(0,s.BX)(g),y={state:m,subscribe:e=>(0,s.B1)(m,(()=>e(m))),subscribeKey:(e,t)=>(0,n.u$)(m,e,t),setSelectedProvider(e){if(e&&"meld"===e.name){const t=h.W.state.activeChain===i.o.CHAIN.SOLANA?"SOL":"USDC",r=c.U.state.address??"",s=new URL(e.url);s.searchParams.append("publicKey",o.Db),s.searchParams.append("destinationCurrencyCode",t),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",d.H.state.projectId),m.selectedProvider={...e,url:s.toString()}}else m.selectedProvider=e},setOnrampProviders(e){if(Array.isArray(e)&&e.every((e=>"string"==typeof e))){const t=e,r=o.tM.filter((e=>t.includes(e.name)));m.providers=r}else m.providers=[]},setPurchaseCurrency(e){m.purchaseCurrency=e},setPaymentCurrency(e){m.paymentCurrency=e},setPurchaseAmount(e){w.state.purchaseAmount=e},setPaymentAmount(e){w.state.paymentAmount=e},async getAvailableCurrencies(){const e=await u.T.getOnrampOptions();m.purchaseCurrencies=e.purchaseCurrencies,m.paymentCurrencies=e.paymentCurrencies,m.paymentCurrency=e.paymentCurrencies[0]||f,m.purchaseCurrency=e.purchaseCurrencies[0]||p,await l.Np.fetchCurrencyImages(e.paymentCurrencies.map((e=>e.id))),await l.Np.fetchTokenImages(e.purchaseCurrencies.map((e=>e.symbol)))},async getQuote(){m.quotesLoading=!0;try{const e=await u.T.getOnrampQuote({purchaseCurrency:m.purchaseCurrency,paymentCurrency:m.paymentCurrency,amount:m.paymentAmount?.toString()||"0",network:m.purchaseCurrency?.symbol});return m.quotesLoading=!1,m.purchaseAmount=Number(e?.purchaseAmount.amount),e}catch(e){return m.error=e.message,m.quotesLoading=!1,null}finally{m.quotesLoading=!1}},resetState(){m.selectedProvider=null,m.error=null,m.purchaseCurrency=p,m.paymentCurrency=f,m.purchaseCurrencies=[p],m.paymentCurrencies=[],m.paymentAmount=void 0,m.purchaseAmount=void 0,m.quotesLoading=!1}},w=(0,a.X)(y)},5905:(e,t,r)=>{"use strict";async function s(...e){const t=await fetch(...e);if(!t.ok)throw new Error(`HTTP status code: ${t.status}`,{cause:t});return t}r.d(t,{Z:()=>n});class n{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...n}){const i=this.createUrl(n);return(await s(i,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){const n=this.createUrl(r);return(await s(n,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...n}){const i=this.createUrl(n);return(await s(i,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...n}){const i=this.createUrl(n);return(await s(i,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...n}){const i=this.createUrl(n);return(await s(i,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){const r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach((([e,t])=>{t&&r.searchParams.append(e,t)})),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}},5910:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});const s={validateCaipAddress(e){if(3!==e.split(":")?.length)throw new Error("Invalid CAIP Address");return e},parseCaipAddress(e){const t=e.split(":");if(3!==t.length)throw new Error(`Invalid CAIP-10 address: ${e}`);const[r,s,n]=t;if(!r||!s||!n)throw new Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:r,chainId:s,address:n}},parseCaipNetworkId(e){const t=e.split(":");if(2!==t.length)throw new Error(`Invalid CAIP-2 network id: ${e}`);const[r,s]=t;if(!r||!s)throw new Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:r,chainId:s}}}},5940:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,X:()=>f});var s=r(9073),n=r(4707),i=r(6742),o=r(5905),a=r(2733);const c=Object.freeze({enabled:!0,events:[]}),l=new o.Z({baseUrl:i.w.getAnalyticsUrl(),clientId:null}),u=(0,s.BX)({...c}),h={state:u,subscribeKey:(e,t)=>(0,n.u$)(u,e,t),async sendError(e,t){if(!u.enabled)return;const r=Date.now();if(u.events.filter((e=>{const t=new Date(e.properties.timestamp||"").getTime();return r-t<6e4})).length>=5)return;const s={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:(new Date).toISOString()}};u.events.push(s);try{if("undefined"==typeof window)return;const{projectId:r,sdkType:s,sdkVersion:n}=a.H.state;await l.post({path:"/e",params:{projectId:r,st:s,sv:n||"html-wagmi-4.2.2"},body:{eventId:i.w.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:(new Date).toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch(e){console.error("Error sending telemetry event:",e)}},enable(){u.enabled=!0},disable(){u.enabled=!1},clearEvents(){u.events=[]}};class d extends Error{constructor(e,t,r){super(e),this.name="AppKitError",this.category=t,this.originalError=r,Error.captureStackTrace&&Error.captureStackTrace(this,d)}}function p(e,t){const r=e instanceof d?e:new d(e instanceof Error?e.message:String(e),t,e);throw h.sendError(r,r.category),r}function f(e,t="INTERNAL_SDK_ERROR"){const r={};return Object.keys(e).forEach((s=>{const n=e[s];if("function"==typeof n){let e=n;e="AsyncFunction"===n.constructor.name?async(...e)=>{try{return await n(...e)}catch(e){return p(e,t)}}:(...e)=>{try{return n(...e)}catch(e){return p(e,t)}},r[s]=e}else r[s]=n})),r}},6036:(e,t,r)=>{"use strict";r.d(t,{IP:()=>o,T8:()=>n,Ud:()=>i,Ws:()=>s});const s={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function n(e){if(!e)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}const i={setItem(e,t){o()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(o())return localStorage.getItem(e)||void 0},removeItem(e){o()&&localStorage.removeItem(e)},clear(){o()&&localStorage.clear()}};function o(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}},6092:(e,t,r)=>{"use strict";r.d(t,{g:()=>p});var s=r(4376),n=r(2733),i=r(7508),o=r(8249),a=r(6742),c=r(9177),l=r(7388),u=r(9088),h=r(5306),d=r(5042);const p={getConnectorsByType(e,t,r){const{customWallets:s}=n.H.state,o=i.i.getRecentWallets(),a=d.A.filterOutDuplicateWallets(t),c=d.A.filterOutDuplicateWallets(r),l=e.filter((e=>"MULTI_CHAIN"===e.type)),u=e.filter((e=>"ANNOUNCED"===e.type)),h=e.filter((e=>"INJECTED"===e.type));return{custom:s,recent:o,external:e.filter((e=>"EXTERNAL"===e.type)),multiChain:l,announced:u,injected:h,recommended:a,featured:c}},showConnector(e){const t=e.info?.rdns,r=Boolean(t)&&o.Np.state.excludedWallets.some((e=>Boolean(e.rdns)&&e.rdns===t)),s=Boolean(e.name)&&o.Np.state.excludedWallets.some((t=>h.y.isLowerCaseMatch(t.name,e.name)));if("INJECTED"===e.type){if("Browser Wallet"===e.name){if(!a.w.isMobile())return!1;if(a.w.isMobile()&&!t&&!c.x.checkInstalled())return!1}if(r||s)return!1}return"ANNOUNCED"!==e.type&&"EXTERNAL"!==e.type||!r&&!s},getIsConnectedWithWC:()=>Array.from(l.W.state.chains.values()).some((e=>u.a.getConnectorId(e.namespace)===s.o.CONNECTOR_ID.WALLET_CONNECT)),getConnectorTypeOrder({recommended:e,featured:t,custom:r,recent:s,announced:i,injected:o,multiChain:a,external:c,overriddenConnectors:l=n.H.state.features?.connectorTypeOrder??[]}){const u=p.getIsConnectedWithWC(),h=[{type:"walletConnect",isEnabled:n.H.state.enableWalletConnect&&!u},{type:"recent",isEnabled:s.length>0},{type:"injected",isEnabled:[...o,...i,...a].length>0},{type:"featured",isEnabled:t.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:c.length>0},{type:"recommended",isEnabled:e.length>0}].filter((e=>e.isEnabled)),d=new Set(h.map((e=>e.type))),f=l.filter((e=>d.has(e))).map((e=>({type:e,isEnabled:!0}))),g=h.filter((({type:e})=>!f.some((({type:t})=>t===e))));return Array.from(new Set([...f,...g].map((({type:e})=>e))))}}},6109:(e,t,r)=>{"use strict";r.d(t,{JX:()=>l,RF:()=>c,W5:()=>d,ck:()=>f,ds:()=>u,fD:()=>p});var s=r(2618),n=r(3096);let i,o,a;function c(e,t){i=document.createElement("style"),o=document.createElement("style"),a=document.createElement("style"),i.textContent=h(e).core.cssText,o.textContent=h(e).dark.cssText,a.textContent=h(e).light.cssText,document.head.appendChild(i),document.head.appendChild(o),document.head.appendChild(a),l(t)}function l(e){o&&a&&("light"===e?(o.removeAttribute("media"),a.media="enabled"):(a.removeAttribute("media"),o.media="enabled"))}function u(e){i&&o&&a&&(i.textContent=h(e).core.cssText,o.textContent=h(e).dark.cssText,a.textContent=h(e).light.cssText)}function h(e){return{core:s.AH`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${(0,s.iz)(e?.["--w3m-color-mix-strength"]?`${e["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${(0,s.iz)(e?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${(0,s.iz)(e?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${(0,s.iz)(e?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${(0,s.iz)(e?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:s.AH`
      :root {
        --w3m-color-mix: ${(0,s.iz)(e?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${(0,s.iz)((0,n.o)(e,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${(0,s.iz)((0,n.o)(e,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:s.AH`
      :root {
        --w3m-color-mix: ${(0,s.iz)(e?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${(0,s.iz)((0,n.o)(e,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${(0,s.iz)((0,n.o)(e,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const d=s.AH`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,p=s.AH`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,f=s.AH`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`},6210:(e,t,r)=>{"use strict";r.d(t,{v:()=>a});const s=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],n=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],i=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];var o=r(4376);const a={getERC20Abi:e=>o.o.USDT_CONTRACT_ADDRESSES.includes(e)?i:s,getSwapAbi:()=>n}},6279:function(e){e.exports=function(){"use strict";return function(e,t,r){e=e||{};var s=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,r,n){return s.fromToBase(e,t,r,n)}r.en.relativeTime=n,s.fromToBase=function(t,s,i,o,a){for(var c,l,u,h=i.$locale().relativeTime||n,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=d.length,f=0;f<p;f+=1){var g=d[f];g.d&&(c=o?r(t).diff(i,g.d,!0):i.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(u=c>0,m<=g.r||!g.r){m<=1&&f>0&&(g=d[f-1]);var y=h[g.l];a&&(m=a(""+m)),l="string"==typeof y?y.replace("%d",m):y(m,s,g.l,u);break}}if(s)return l;var w=u?h.future:h.past;return"function"==typeof w?w(l):w.replace("%s",l)},s.to=function(e,t){return i(e,t,this,!0)},s.from=function(e,t){return i(e,t,this)};var o=function(e){return e.$u?r.utc():r()};s.toNow=function(e){return this.to(o(this),e)},s.fromNow=function(e){return this.from(o(this),e)}}}()},6360:(e,t,r)=>{"use strict";r.d(t,{W:()=>f});var s=r(9073),n=r(152),i=r(5940),o=r(3450),a=r(5595),c=r(7388),l=r(184),u=r(2733),h=r(1871);const d=(0,s.BX)({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),p={state:d,subscribe:e=>(0,s.B1)(d,(()=>e(d))),setLastNetworkInView(e){d.lastNetworkInView=e},async fetchTransactions(e,t){if(!e)throw new Error("Transactions can't be fetched without an accountAddress");d.loading=!0;try{const r=await a.T.fetchTransactions({account:e,cursor:d.next,onramp:t,cache:"coinbase"===t?"no-cache":void 0,chainId:c.W.state.activeCaipNetwork?.caipNetworkId}),s=f.filterSpamTransactions(r.data),n=f.filterByConnectedChain(s),i=[...d.transactions,...n];d.loading=!1,"coinbase"===t?d.coinbaseTransactions=f.groupTransactionsByYearAndMonth(d.coinbaseTransactions,r.data):(d.transactions=i,d.transactionsByYear=f.groupTransactionsByYearAndMonth(d.transactionsByYear,n)),d.empty=0===i.length,d.next=r.next?r.next:void 0}catch(t){const r=c.W.state.activeChain;l.E.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:u.H.state.projectId,cursor:d.next,isSmartAccount:o.U.state.preferredAccountTypes?.[r]===n.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}}),h.P.showError("Failed to fetch transactions"),d.loading=!1,d.empty=!0,d.next=void 0}},groupTransactionsByYearAndMonth(e={},t=[]){const r=e;return t.forEach((e=>{const t=new Date(e.metadata.minedAt).getFullYear(),s=new Date(e.metadata.minedAt).getMonth(),n=r[t]??{},i=(n[s]??[]).filter((t=>t.id!==e.id));r[t]={...n,[s]:[...i,e].sort(((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime()))}})),r},filterSpamTransactions:e=>e.filter((e=>!e.transfers.every((e=>!0===e.nft_info?.flags.is_spam)))),filterByConnectedChain(e){const t=c.W.state.activeCaipNetwork?.caipNetworkId;return e.filter((e=>e.metadata.chain===t))},clearCursor(){d.next=void 0},resetTransactions(){d.transactions=[],d.transactionsByYear={},d.lastNetworkInView=void 0,d.loading=!1,d.empty=!1,d.next=void 0}},f=(0,i.X)(p,"API_ERROR")},6396:(e,t,r)=>{"use strict";r.d(t,{W:()=>w});var s=r(9073),n=r(4707),i=r(6742),o=r(5940),a=r(3450),c=r(8249),l=r(7388),u=r(9177),h=r(9088),d=r(184),p=r(2733),f=r(8467),g=r(8508);const m=(0,s.BX)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),y={state:m,subscribe:e=>(0,s.B1)(m,(()=>e(m))),subscribeKey:(e,t)=>(0,n.u$)(m,e,t),async open(e){const t="connected"===a.U.state.status;u.x.state.wcBasic?c.Np.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await c.Np.prefetch({fetchConnectorImages:!t,fetchFeaturedWallets:!t,fetchRecommendedWallets:!t}),e?.namespace?(await l.W.switchActiveNamespace(e.namespace),w.setLoading(!0,e.namespace)):w.setLoading(!0),h.a.setFilterByNamespace(e?.namespace);const r=l.W.getAccountData(e?.namespace)?.caipAddress,s=l.W.state.noAdapters;p.H.state.manualWCControl||s&&!r?i.w.isMobile()?g.I.reset("AllWallets"):g.I.reset("ConnectingWalletConnectBasic"):e?.view?g.I.reset(e.view,e.data):r?g.I.reset("Account"):g.I.reset("Connect"),m.open=!0,f.z.set({open:!0}),d.E.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:Boolean(r)}})},close(){const e=p.H.state.enableEmbedded,t=Boolean(l.W.state.activeCaipAddress);m.open&&d.E.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),m.open=!1,w.clearLoading(),e?t?g.I.replace("Account"):g.I.push("Connect"):f.z.set({open:!1}),u.x.resetUri()},setLoading(e,t){t&&m.loadingNamespaceMap.set(t,e),m.loading=e,f.z.set({loading:e})},clearLoading(){m.loadingNamespaceMap.clear(),m.loading=!1},shake(){m.shake||(m.shake=!0,setTimeout((()=>{m.shake=!1}),500))}},w=(0,o.X)(y)},6409:(e,t,r)=>{"use strict";r.d(t,{Q:()=>c});const s=/^0x(?:[A-Fa-f0-9]{64})$/u,n=/^0x(?:[a-fA-F0-9]{62,})$/u;var i=r(152),o=r(6508);const a=3e4,c={checkIfAllowedToTriggerEmail(){const e=o.o.get(i.s1.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<a){const e=Math.ceil((a-t)/1e3);throw new Error(`Please try again after ${e} seconds`)}}},getTimeToNextEmailLogin(){const e=o.o.get(i.s1.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<a)return Math.ceil((a-t)/1e3)}return 0},checkIfRequestExists:e=>i.Vl.NOT_SAFE_RPC_METHODS.includes(e.method)||i.Vl.SAFE_RPC_METHODS.includes(e.method),getResponseType:e=>"string"==typeof e&&(e?.match(s)||e?.match(n))?i.s1.RPC_RESPONSE_TYPE_TX:i.s1.RPC_RESPONSE_TYPE_OBJECT,checkIfRequestIsSafe:e=>i.Vl.SAFE_RPC_METHODS.includes(e.method),isClient:"undefined"!=typeof window}},6508:(e,t,r)=>{"use strict";r.d(t,{o:()=>i});var s=r(152),n=r(6409);const i={set(e,t){n.Q.isClient&&localStorage.setItem(`${s.s1.STORAGE_KEY}${e}`,t)},get:e=>n.Q.isClient?localStorage.getItem(`${s.s1.STORAGE_KEY}${e}`):null,delete(e,t){n.Q.isClient&&(t?localStorage.removeItem(e):localStorage.removeItem(`${s.s1.STORAGE_KEY}${e}`))}}},6742:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});var s=r(4376),n=r(2944),i=r(7508);const o={isMobile(){return!!this.isClient()&&Boolean(window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(e,t="")=>e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return o.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){if(!this.isClient())return!1;const e=window?.navigator.userAgent.toLowerCase();return e.includes("safari")},isClient:()=>"undefined"!=typeof window,isPairingExpired:e=>!e||e-Date.now()<=n.oU.TEN_SEC_MS,isAllowedRetry:(e,t=n.oU.ONE_SEC_MS)=>Date.now()-e>=t,copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch(e){return!1}},getPairingExpiry:()=>Date.now()+n.oU.FOUR_MINUTES_MS,getNetworkId:e=>e?.split(":")[1],getPlainAddress:e=>e?.split(":")[2],wait:async e=>new Promise((t=>{setTimeout(t,e)})),debounce(e,t=500){let r;return(...s)=>{r&&clearTimeout(r),r=setTimeout((function(){e(...s)}),t)}},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),formatNativeUrl(e,t,r=null){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t);let s=e,n=r;s.includes("://")||(s=e.replaceAll("/","").replaceAll(":",""),s=`${s}://`),s.endsWith("/")||(s=`${s}/`),n&&!n?.endsWith("/")&&(n=`${n}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));const i=encodeURIComponent(t);return{redirect:`${s}wc?uri=${i}`,redirectUniversalLink:n?`${n}wc?uri=${i}`:void 0,href:s}},formatUniversalUrl(e,t){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t);let r=e;return r.endsWith("/")||(r=`${r}/`),{redirect:`${r}wc?uri=${encodeURIComponent(t)}`,href:r}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?i.i.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,r){window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},returnOpenHref(e,t,r){return window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},isTelegram:()=>"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto)),isPWA(){if("undefined"==typeof window)return!1;const e=window.matchMedia?.("(display-mode: standalone)")?.matches,t=window?.navigator?.standalone;return Boolean(e||t)},async preloadImage(e){const t=new Promise(((t,r)=>{const s=new Image;s.onload=t,s.onerror=r,s.crossOrigin="anonymous",s.src=e}));return Promise.race([t,o.wait(2e3)])},formatBalance(e,t){let r="0.000";if("string"==typeof e){const t=Number(e);if(t){const e=Math.floor(1e3*t)/1e3;e&&(r=e.toString())}}return`${r}${t?` ${t}`:""}`},formatBalance2(e,t){let r;if("0"===e)r="0";else if("string"==typeof e){const t=Number(e);t&&(r=t.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:r??"0",rest:"0"===r?"000":"",symbol:t}},getApiUrl:()=>s.o.W3M_API_URL,getBlockchainApiUrl:()=>s.o.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>s.o.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),parseError:e=>"string"==typeof e?e:"string"==typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error",sortRequestedNetworks(e,t=[]){const r={};return t&&e&&(e.forEach(((e,t)=>{r[e]=t})),t.sort(((e,t)=>{const s=r[e.id],n=r[t.id];return void 0!==s&&void 0!==n?s-n:void 0!==s?-1:void 0!==n?1:0}))),t},calculateBalance(e){let t=0;for(const r of e)t+=r.value??0;return t},formatTokenBalance(e){const t=e.toFixed(2),[r,s]=t.split(".");return{dollars:r,pennies:s}},isAddress(e,t="eip155"){switch(t){case"eip155":return!(!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&!/^(?:0x)?[0-9A-F]{40}$/iu.test(e));case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){const r=new Set;return e.filter((e=>{const s=e[t];return!r.has(s)&&(r.add(s),!0)}))},generateSdkVersion:(e,t,r)=>`${t}-${0===e.length?n.oU.ADAPTER_TYPES.UNIVERSAL:e.map((e=>e.adapterType)).join(",")}-${r}`,createAccount:(e,t,r,s,n)=>({namespace:e,address:t,type:r,publicKey:s,path:n}),isCaipAddress(e){if("string"!=typeof e)return!1;const t=e.split(":"),r=t[0];return 3===t.filter(Boolean).length&&r in s.o.CHAIN_NAME_MAP},isMac(){const e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){const t=`--${encodeURIComponent(window?.location.href)}`,r="state=";if("auth.magic.link"===new URL(e).host){const s="provider_authorization_url=",n=e.substring(e.indexOf(s)+s.length),i=this.injectIntoUrl(decodeURIComponent(n),r,t);return e.replace(n,encodeURIComponent(i))}return this.injectIntoUrl(e,r,t)},injectIntoUrl(e,t,r){const s=e.indexOf(t);if(-1===s)throw new Error(`${t} parameter not found in the URL: ${e}`);const n=e.indexOf("&",s),i=t.length,o=-1!==n?n:e.length;return e.substring(0,s+i)+(e.substring(s+i,o)+r)+e.substring(n)}}},6752:(e,t,r)=>{"use strict";r.d(t,{JW:()=>N,XX:()=>W,c0:()=>I,ge:()=>H,qy:()=>_,s6:()=>S});const s=globalThis,n=s.trustedTypes,i=n?n.createPolicy("lit-html",{createHTML:e=>e}):void 0,o="$lit$",a=`lit$${Math.random().toFixed(9).slice(2)}$`,c="?"+a,l=`<${c}>`,u=document,h=()=>u.createComment(""),d=e=>null===e||"object"!=typeof e&&"function"!=typeof e,p=Array.isArray,f=e=>p(e)||"function"==typeof e?.[Symbol.iterator],g="[ \t\n\f\r]",m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,y=/-->/g,w=/>/g,b=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),v=/'/g,E=/"/g,A=/^(?:script|style|textarea|title)$/i,C=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),_=C(1),N=C(2),I=(C(3),Symbol.for("lit-noChange")),S=Symbol.for("lit-nothing"),T=new WeakMap,P=u.createTreeWalker(u,129);function O(e,t){if(!p(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==i?i.createHTML(t):t}const x=(e,t)=>{const r=e.length-1,s=[];let n,i=2===t?"<svg>":3===t?"<math>":"",c=m;for(let t=0;t<r;t++){const r=e[t];let u,h,d=-1,p=0;for(;p<r.length&&(c.lastIndex=p,h=c.exec(r),null!==h);)p=c.lastIndex,c===m?"!--"===h[1]?c=y:void 0!==h[1]?c=w:void 0!==h[2]?(A.test(h[2])&&(n=RegExp("</"+h[2],"g")),c=b):void 0!==h[3]&&(c=b):c===b?">"===h[0]?(c=n??m,d=-1):void 0===h[1]?d=-2:(d=c.lastIndex-h[2].length,u=h[1],c=void 0===h[3]?b:'"'===h[3]?E:v):c===E||c===v?c=b:c===y||c===w?c=m:(c=b,n=void 0);const f=c===b&&e[t+1].startsWith("/>")?" ":"";i+=c===m?r+l:d>=0?(s.push(u),r.slice(0,d)+o+r.slice(d)+a+f):r+a+(-2===d?t:f)}return[O(e,i+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),s]};class k{constructor({strings:e,_$litType$:t},r){let s;this.parts=[];let i=0,l=0;const u=e.length-1,d=this.parts,[p,f]=x(e,t);if(this.el=k.createElement(p,r),P.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(s=P.nextNode())&&d.length<u;){if(1===s.nodeType){if(s.hasAttributes())for(const e of s.getAttributeNames())if(e.endsWith(o)){const t=f[l++],r=s.getAttribute(e).split(a),n=/([.?@])?(.*)/.exec(t);d.push({type:1,index:i,name:n[2],strings:r,ctor:"."===n[1]?L:"?"===n[1]?M:"@"===n[1]?j:B}),s.removeAttribute(e)}else e.startsWith(a)&&(d.push({type:6,index:i}),s.removeAttribute(e));if(A.test(s.tagName)){const e=s.textContent.split(a),t=e.length-1;if(t>0){s.textContent=n?n.emptyScript:"";for(let r=0;r<t;r++)s.append(e[r],h()),P.nextNode(),d.push({type:2,index:++i});s.append(e[t],h())}}}else if(8===s.nodeType)if(s.data===c)d.push({type:2,index:i});else{let e=-1;for(;-1!==(e=s.data.indexOf(a,e+1));)d.push({type:7,index:i}),e+=a.length-1}i++}}static createElement(e,t){const r=u.createElement("template");return r.innerHTML=e,r}}function R(e,t,r=e,s){if(t===I)return t;let n=void 0!==s?r._$Co?.[s]:r._$Cl;const i=d(t)?void 0:t._$litDirective$;return n?.constructor!==i&&(n?._$AO?.(!1),void 0===i?n=void 0:(n=new i(e),n._$AT(e,r,s)),void 0!==s?(r._$Co??=[])[s]=n:r._$Cl=n),void 0!==n&&(t=R(e,n._$AS(e,t.values),n,s)),t}class U{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,s=(e?.creationScope??u).importNode(t,!0);P.currentNode=s;let n=P.nextNode(),i=0,o=0,a=r[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new D(n,n.nextSibling,this,e):1===a.type?t=new a.ctor(n,a.name,a.strings,this,e):6===a.type&&(t=new F(n,this,e)),this._$AV.push(t),a=r[++o]}i!==a?.index&&(n=P.nextNode(),i++)}return P.currentNode=u,s}p(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class D{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,s){this.type=2,this._$AH=S,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=R(this,e,t),d(e)?e===S||null==e||""===e?(this._$AH!==S&&this._$AR(),this._$AH=S):e!==this._$AH&&e!==I&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):f(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==S&&d(this._$AH)?this._$AA.nextSibling.data=e:this.T(u.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:r}=e,s="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=k.createElement(O(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(t);else{const e=new U(s,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=T.get(e.strings);return void 0===t&&T.set(e.strings,t=new k(e)),t}k(e){p(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,s=0;for(const n of e)s===t.length?t.push(r=new D(this.O(h()),this.O(h()),this,this.options)):r=t[s],r._$AI(n),s++;s<t.length&&(this._$AR(r&&r._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class B{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,s,n){this.type=1,this._$AH=S,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=S}_$AI(e,t=this,r,s){const n=this.strings;let i=!1;if(void 0===n)e=R(this,e,t,0),i=!d(e)||e!==this._$AH&&e!==I,i&&(this._$AH=e);else{const s=e;let o,a;for(e=n[0],o=0;o<n.length-1;o++)a=R(this,s[r+o],t,o),a===I&&(a=this._$AH[o]),i||=!d(a)||a!==this._$AH[o],a===S?e=S:e!==S&&(e+=(a??"")+n[o+1]),this._$AH[o]=a}i&&!s&&this.j(e)}j(e){e===S?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class L extends B{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===S?void 0:e}}class M extends B{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==S)}}class j extends B{constructor(e,t,r,s,n){super(e,t,r,s,n),this.type=5}_$AI(e,t=this){if((e=R(this,e,t,0)??S)===I)return;const r=this._$AH,s=e===S&&r!==S||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==S&&(r===S||s);s&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class F{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){R(this,e)}}const H={M:o,P:a,A:c,C:1,L:x,R:U,D:f,V:R,I:D,H:B,N:M,U:j,B:L,F},$=s.litHtmlPolyfillSupport;$?.(k,D),(s.litHtmlVersions??=[]).push("3.3.0");const W=(e,t,r)=>{const s=r?.renderBefore??t;let n=s._$litPart$;if(void 0===n){const e=r?.renderBefore??null;s._$litPart$=n=new D(t.insertBefore(h(),e),e,void 0,r??{})}return n._$AI(e),n}},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,s){function n(r){e.removeListener(t,i),s(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,i,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,r,s){var n,i,o,l;if(a(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"==typeof o?o=i[t]=s?[r,o]:[o,r]:s?o.unshift(r):o.push(r),(n=c(e))>0&&o.length>n&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=u.bind(s);return n.listener=r,s.wrapFn=n,n}function d(e,t,r){var s=e._events;if(void 0===s)return[];var n=s[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):f(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),s=0;s<t;++s)r[s]=e[s];return r}function g(e,t,r,s){if("function"==typeof e.on)s.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(i){s.once&&e.removeEventListener(t,n),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)s(c,this,t);else{var l=c.length,u=f(c,l);for(r=0;r<l;++r)s(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,s,n,i,o;if(a(t),void 0===(s=this._events))return this;if(void 0===(r=s[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,n=i;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(s[e]=r[0]),void 0!==s.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,s;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,i=Object.keys(r);for(s=0;s<i.length;++s)"removeListener"!==(n=i[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7135:(e,t,r)=>{"use strict";function s(e,t){let r=e.toString();const s=r.startsWith("-");s&&(r=r.slice(1)),r=r.padStart(t,"0");let[n,i]=[r.slice(0,r.length-t),r.slice(r.length-t)];return i=i.replace(/(0+)$/,""),`${s?"-":""}${n||"0"}${i?`.${i}`:""}`}r.d(t,{J:()=>s})},7173:(e,t,r)=>{"use strict";function s(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function n(){const e=s();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=s,t.getSubtleCrypto=n,t.isBrowserCryptoAvailable=function(){return!!s()&&!!n()}},7388:(e,t,r)=>{"use strict";r.d(t,{W:()=>N});var s=r(9073),n=r(4707),i=r(3495),o=r(4376),a=r(9088);function c(e,t){return a.a.getConnectorId(e)===t}var l=r(2944),u=r(6742),h=r(7508),d=r(5940),p=r(3450),f=r(9177),g=r(184),m=r(6396),y=r(2733),w=r(8467),b=r(8508),v=r(8351);const E={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},A={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},C=(0,s.BX)({chains:(0,n.zC)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),_={state:C,subscribe:e=>(0,s.B1)(C,(()=>{e(C)})),subscribeKey:(e,t)=>(0,n.u$)(C,e,t),subscribeChainProp(e,t,r){let n;return(0,s.B1)(C.chains,(()=>{const s=r||C.activeChain;if(s){const r=C.chains.get(s)?.[e];n!==r&&(n=r,t(r))}}))},initialize(e,t,r){const{chainId:n,namespace:i}=h.i.getActiveNetworkProps(),o=t?.find((e=>e.id.toString()===n?.toString())),a=e.find((e=>e?.namespace===i))||e?.[0],c=e.map((e=>e.namespace)).filter((e=>void 0!==e)),l=y.H.state.enableEmbedded?new Set([...c]):new Set([...t?.map((e=>e.chainNamespace))??[]]);0!==e?.length&&a||(C.noAdapters=!0),C.noAdapters||(C.activeChain=a?.namespace,C.activeCaipNetwork=o,N.setChainNetworkData(a?.namespace,{caipNetwork:o}),C.activeChain&&w.z.set({activeChain:a?.namespace})),l.forEach((e=>{const n=t?.filter((t=>t.chainNamespace===e));N.state.chains.set(e,{namespace:e,networkState:(0,s.BX)({...A,caipNetwork:n?.[0]}),accountState:(0,s.BX)(E),caipNetworks:n??[],...r}),N.setRequestedCaipNetworks(n??[],e)}))},removeAdapter(e){if(C.activeChain===e){const t=Array.from(C.chains.entries()).find((([t])=>t!==e));if(t){const e=t[1]?.caipNetworks?.[0];e&&N.setActiveCaipNetwork(e)}}C.chains.delete(e)},addAdapter(e,{networkControllerClient:t,connectionControllerClient:r},s){C.chains.set(e.namespace,{namespace:e.namespace,networkState:{...A,caipNetwork:s[0]},accountState:E,caipNetworks:s,connectionControllerClient:r,networkControllerClient:t}),N.setRequestedCaipNetworks(s?.filter((t=>t.chainNamespace===e.namespace))??[],e.namespace)},addNetwork(e){const t=C.chains.get(e.chainNamespace);if(t){const r=[...t.caipNetworks||[]];t.caipNetworks?.find((t=>t.id===e.id))||r.push(e),C.chains.set(e.chainNamespace,{...t,caipNetworks:r}),N.setRequestedCaipNetworks(r,e.chainNamespace),a.a.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,t){const r=C.chains.get(e);if(r){const s=C.activeCaipNetwork?.id===t,n=[...r.caipNetworks?.filter((e=>e.id!==t))||[]];s&&r?.caipNetworks?.[0]&&N.setActiveCaipNetwork(r.caipNetworks[0]),C.chains.set(e,{...r,caipNetworks:n}),N.setRequestedCaipNetworks(n||[],e),0===n.length&&a.a.filterByNamespace(e,!1)}},setAdapterNetworkState(e,t){const r=C.chains.get(e);r&&(r.networkState={...r.networkState||A,...t},C.chains.set(e,r))},setChainAccountData(e,t,r=!0){if(!e)throw new Error("Chain is required to update chain account data");const s=C.chains.get(e);if(s){const r={...s.accountState||E,...t};C.chains.set(e,{...s,accountState:r}),1!==C.chains.size&&C.activeChain!==e||(t.caipAddress&&(C.activeCaipAddress=t.caipAddress),p.U.replaceState(r))}},setChainNetworkData(e,t){if(!e)return;const r=C.chains.get(e);if(r){const s={...r.networkState||A,...t};C.chains.set(e,{...r,networkState:s})}},setAccountProp(e,t,r,s=!0){N.setChainAccountData(r,{[e]:t},s),"status"===e&&"disconnected"===t&&r&&a.a.removeConnectorId(r)},setActiveNamespace(e){C.activeChain=e;const t=e?C.chains.get(e):void 0,r=t?.networkState?.caipNetwork;r?.id&&e&&(C.activeCaipAddress=t?.accountState?.caipAddress,C.activeCaipNetwork=r,N.setChainNetworkData(e,{caipNetwork:r}),h.i.setActiveCaipNetworkId(r?.caipNetworkId),w.z.set({activeChain:e,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;C.activeChain!==e.chainNamespace&&N.setIsSwitchingNamespace(!0);const t=C.chains.get(e.chainNamespace);C.activeChain=e.chainNamespace,C.activeCaipNetwork=e,N.setChainNetworkData(e.chainNamespace,{caipNetwork:e}),C.activeCaipAddress=t?.accountState?.address?`${e.chainNamespace}:${e.id}:${t?.accountState?.address}`:void 0,N.setAccountProp("caipAddress",C.activeCaipAddress,e.chainNamespace),t&&p.U.replaceState(t.accountState),v.R.resetSend(),w.z.set({activeChain:C.activeChain,selectedNetworkId:C.activeCaipNetwork?.caipNetworkId}),h.i.setActiveCaipNetworkId(e.caipNetworkId),N.checkIfSupportedNetwork(e.chainNamespace)||!y.H.state.enableNetworkSwitch||y.H.state.allowUnsupportedChain||f.x.state.wcBasic||N.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;const t=C.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;const t=e!==N.state.activeChain,r=N.getNetworkData(e)?.caipNetwork,s=N.getCaipNetworkByNamespace(e,r?.id);t&&s&&await N.switchActiveNetwork(s)},async switchActiveNetwork(e){const t=N.state.chains.get(N.state.activeChain),r=!t?.caipNetworks?.some((e=>e.id===C.activeCaipNetwork?.id)),s=N.getNetworkControllerClient(e.chainNamespace);if(s){try{await s.switchCaipNetwork(e),r&&m.W.close()}catch(e){b.I.goBack()}g.E.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})}},getNetworkControllerClient(e){const t=e||C.activeChain,r=C.chains.get(t);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(e){const t=e||C.activeChain;if(!t)throw new Error("Chain is required to get connection controller client");const r=C.chains.get(t);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(e,t){let r=C.activeChain;if(t&&(r=t),!r)return;const s=C.chains.get(r)?.accountState;return s?s[e]:void 0},getNetworkProp(e,t){const r=C.chains.get(t)?.networkState;if(r)return r[e]},getRequestedCaipNetworks(e){const t=C.chains.get(e),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:s=[]}=t?.networkState||{};return u.w.sortRequestedNetworks(r,s)},getAllRequestedCaipNetworks(){const e=[];return C.chains.forEach((t=>{const r=N.getRequestedCaipNetworks(t.namespace);e.push(...r)})),e},setRequestedCaipNetworks(e,t){N.setAdapterNetworkState(t,{requestedCaipNetworks:e});const r=N.getAllRequestedCaipNetworks().map((e=>e.chainNamespace)),s=Array.from(new Set(r));a.a.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const e=[];return C.chains.forEach((t=>{const r=N.getApprovedCaipNetworkIds(t.namespace);e.push(...r)})),e},getActiveCaipNetwork:()=>C.activeCaipNetwork,getActiveCaipAddress:()=>C.activeCaipAddress,getApprovedCaipNetworkIds(e){const t=C.chains.get(e);return t?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(e){const t=N.getNetworkControllerClient(),r=await(t?.getApprovedCaipNetworksData());N.setAdapterNetworkState(e,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(e,t){const r=t||C.activeCaipNetwork,s=N.getRequestedCaipNetworks(e);return!s.length||s?.some((e=>e.id===r?.id))},checkIfSupportedChainId(e){if(!C.activeChain)return!0;const t=N.getRequestedCaipNetworks(C.activeChain);return t?.some((t=>t.id===e))},setSmartAccountEnabledNetworks(e,t){N.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled(){const e=i.L.caipNetworkIdToNumber(C.activeCaipNetwork?.caipNetworkId),t=C.activeChain;if(!t||!e)return!1;const r=N.getNetworkProp("smartAccountEnabledNetworks",t);return Boolean(r?.includes(Number(e)))},getActiveNetworkTokenAddress(){const e=C.activeCaipNetwork?.chainNamespace||"eip155";return`${e}:${C.activeCaipNetwork?.id||1}:${l.oU.NATIVE_TOKEN_ADDRESS[e]}`},showUnsupportedChainUI(){m.W.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const e=C.activeCaipNetwork;return Boolean(e?.chainNamespace&&l.oU.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){N.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(e){const t=e;if(!t)throw new Error("Chain is required to set account prop");C.activeCaipAddress=void 0,N.setChainAccountData(t,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),a.a.removeConnectorId(t)},async disconnect(e){const t=function(e){const t=Array.from(N.state.chains.keys());let r=[];return e?(r.push([e,N.state.chains.get(e)]),c(e,o.o.CONNECTOR_ID.WALLET_CONNECT)?t.forEach((t=>{t!==e&&c(t,o.o.CONNECTOR_ID.WALLET_CONNECT)&&r.push([t,N.state.chains.get(t)])})):c(e,o.o.CONNECTOR_ID.AUTH)&&t.forEach((t=>{t!==e&&c(t,o.o.CONNECTOR_ID.AUTH)&&r.push([t,N.state.chains.get(t)])}))):r=Array.from(N.state.chains.entries()),r}(e);try{v.R.resetSend();const r=await Promise.allSettled(t.map((async([e,t])=>{try{const{caipAddress:r}=N.getAccountData(e)||{};r&&t.connectionControllerClient?.disconnect&&await t.connectionControllerClient.disconnect(e),N.resetAccount(e),N.resetNetwork(e)}catch(t){throw new Error(`Failed to disconnect chain ${e}: ${t.message}`)}})));f.x.resetWcConnection();const s=r.filter((e=>"rejected"===e.status));if(s.length>0)throw new Error(s.map((e=>e.reason.message)).join(", "));h.i.deleteConnectedSocialProvider(),e?a.a.removeConnectorId(e):a.a.resetConnectorIds(),g.E.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(e){console.error(e.message||"Failed to disconnect chains"),g.E.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:e.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(e){C.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){const e=[];let t;if(C.chains.forEach((t=>{o.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.find((e=>e===t.namespace))&&t.namespace&&e.push(t.namespace)})),e.length>0){const r=e[0];return t=r?C.chains.get(r)?.caipNetworks?.[0]:void 0,t}},getAccountData:e=>e?N.state.chains.get(e)?.accountState:p.U.state,getNetworkData(e){const t=e||C.activeChain;if(t)return N.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;const r=N.state.chains.get(e),s=r?.caipNetworks?.find((e=>e.id===t));return s||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const e=a.a.state.filterByNamespace;return(e?[C.chains.get(e)]:Array.from(C.chains.values())).flatMap((e=>e?.caipNetworks||[])).map((e=>e.caipNetworkId))},getCaipNetworks:e=>e?N.getRequestedCaipNetworks(e):N.getAllRequestedCaipNetworks()},N=(0,d.X)(_)},7508:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});var s=r(6036);const n={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired:(e,t)=>Date.now()-e>t,getActiveNetworkProps(){const e=n.getActiveNamespace(),t=n.getActiveCaipNetworkId(),r=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:r?isNaN(Number(r))?r:Number(r):void 0}},setWalletConnectDeepLink({name:e,href:t}){try{s.Ud.setItem(s.Ws.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const e=s.Ud.getItem(s.Ws.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{s.Ud.removeItem(s.Ws.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{s.Ud.setItem(s.Ws.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{s.Ud.setItem(s.Ws.ACTIVE_CAIP_NETWORK_ID,e),n.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return s.Ud.getItem(s.Ws.ACTIVE_CAIP_NETWORK_ID)}catch{return void console.info("Unable to get active caip network id")}},deleteActiveCaipNetworkId(){try{s.Ud.removeItem(s.Ws.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{const t=(0,s.T8)(e);s.Ud.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{const t=n.getRecentWallets();t.find((t=>t.id===e.id))||(t.unshift(e),t.length>2&&t.pop(),s.Ud.setItem(s.Ws.RECENT_WALLETS,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const e=s.Ud.getItem(s.Ws.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(e,t){try{const r=(0,s.T8)(e);s.Ud.setItem(r,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return s.Ud.getItem(s.Ws.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{const t=(0,s.T8)(e);return s.Ud.getItem(t)}catch(t){console.info("Unable to get connected connector id in namespace ",e)}},setConnectedSocialProvider(e){try{s.Ud.setItem(s.Ws.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return s.Ud.getItem(s.Ws.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{s.Ud.removeItem(s.Ws.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return s.Ud.getItem(s.Ws.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){const e=s.Ud.getItem(s.Ws.ACTIVE_CAIP_NETWORK_ID),t=e?.split(":")?.[1];return t},setConnectionStatus(e){try{s.Ud.setItem(s.Ws.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return s.Ud.getItem(s.Ws.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const e=s.Ud.getItem(s.Ws.CONNECTED_NAMESPACES);return e?.length?e.split(","):[]}catch{return[]}},setConnectedNamespaces(e){try{const t=Array.from(new Set(e));s.Ud.setItem(s.Ws.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{const t=n.getConnectedNamespaces();t.includes(e)||(t.push(e),n.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{const t=n.getConnectedNamespaces(),r=t.indexOf(e);r>-1&&(t.splice(r,1),n.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return s.Ud.getItem(s.Ws.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{s.Ud.setItem(s.Ws.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{s.Ud.removeItem(s.Ws.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{const t=s.Ud.getItem(s.Ws.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{const t=n.getBalanceCache();s.Ud.setItem(s.Ws.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{const t=n.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{const t=n.getBalanceCache();t[e.caipAddress]=e,s.Ud.setItem(s.Ws.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{const t=s.Ud.getItem(s.Ws.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{const t=n.getBalanceCache();s.Ud.setItem(s.Ws.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{const t=n.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{const t=n.getNativeBalanceCache();t[e.caipAddress]=e,s.Ud.setItem(s.Ws.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{const t=s.Ud.getItem(s.Ws.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{const t=n.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;n.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{const t=n.getEnsCache();t[e.address]=e,s.Ud.setItem(s.Ws.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{const t=n.getEnsCache();s.Ud.setItem(s.Ws.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{const t=s.Ud.getItem(s.Ws.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{const t=n.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;n.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{const t=n.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},s.Ud.setItem(s.Ws.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{const t=n.getIdentityCache();s.Ud.setItem(s.Ws.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{s.Ud.removeItem(s.Ws.PORTFOLIO_CACHE),s.Ud.removeItem(s.Ws.NATIVE_BALANCE_CACHE),s.Ud.removeItem(s.Ws.ENS_CACHE),s.Ud.removeItem(s.Ws.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{s.Ud.setItem(s.Ws.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{const e=s.Ud.getItem(s.Ws.PREFERRED_ACCOUNT_TYPES);return e?JSON.parse(e):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,t){try{const r={...n.getConnections(),[t]:e};s.Ud.setItem(s.Ws.CONNECTIONS,JSON.stringify(r))}catch(e){console.error("Unable to sync connections to storage",e)}},getConnections(){try{const e=s.Ud.getItem(s.Ws.CONNECTIONS);return e?JSON.parse(e):{}}catch(e){return console.error("Unable to get connections from storage",e),{}}}}},7601:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(9073),n=r(8249),i=r(3337);const o={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},a=(0,s.BX)({networkImagePromises:{}}),c={async fetchWalletImage(e){if(e)return await n.Np._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(!e)return;return this.getNetworkImageById(e)||(a.networkImagePromises[e]||(a.networkImagePromises[e]=n.Np._fetchNetworkImage(e)),await a.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return i.j.state.walletImages[e]},getWalletImage:e=>e?.image_url?e?.image_url:e?.image_id?i.j.state.walletImages[e.image_id]:void 0,getNetworkImage:e=>e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?i.j.state.networkImages[e.assets.imageId]:void 0,getNetworkImageById(e){if(e)return i.j.state.networkImages[e]},getConnectorImage:e=>e?.imageUrl?e.imageUrl:e?.imageId?i.j.state.connectorImages[e.imageId]:void 0,getChainImage:e=>i.j.state.networkImages[o[e]]}},8169:(e,t,r)=>{"use strict";r.d(t,{r:()=>l});var s=r(4353),n=r(5826),i=r(6279),o=r(3581);s.extend(i),s.extend(o);const a={...n,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}},c=["January","February","March","April","May","June","July","August","September","October","November","December"];s.locale("en-web3-modal",a);const l={getMonthNameByIndex:e=>c[e],getYear:(e=(new Date).toISOString())=>s(e).year(),getRelativeDateFromNow:e=>s(e).locale("en-web3-modal").fromNow(!0),formatDate:(e,t="DD MMM")=>s(e).format(t)}},8196:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function s(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=s,t.getDocumentOrThrow=function(){return s("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return s("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return s("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return s("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return s("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},8249:(e,t,r)=>{"use strict";r.d(t,{Np:()=>w});var s=r(9073),n=r(4707),i=r(7601),o=r(6742),a=r(5905),c=r(7508),l=r(3337),u=r(7388),h=r(9088),d=r(184),p=r(2733);const f={PHANTOM:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",COINBASE:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa"},g=o.w.getApiUrl(),m=new a.Z({baseUrl:g,clientId:null}),y=(0,s.BX)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),w={state:y,subscribeKey:(e,t)=>(0,n.u$)(y,e,t),_getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:r}=p.H.state;return{projectId:e,st:t||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions:e=>p.H.state.isUniversalProvider?e.filter((e=>Boolean(e.mobile_link||e.desktop_link||e.webapp_link))):e,async _fetchWalletImage(e){const t=`${m.baseUrl}/getWalletImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setWalletImage(e,URL.createObjectURL(r))},async _fetchNetworkImage(e){const t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setNetworkImage(e,URL.createObjectURL(r))},async _fetchConnectorImage(e){const t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setConnectorImage(e,URL.createObjectURL(r))},async _fetchCurrencyImage(e){const t=`${m.baseUrl}/public/getCurrencyImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setCurrencyImage(e,URL.createObjectURL(r))},async _fetchTokenImage(e){const t=`${m.baseUrl}/public/getTokenImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setTokenImage(e,URL.createObjectURL(r))},_filterWalletsByPlatform:e=>o.w.isMobile()?e?.filter((e=>e.mobile_link||e.id===f.COINBASE||e.id===f.PHANTOM&&"solana"===u.W.state.activeChain)):e,fetchProjectConfig:async()=>(await m.get({path:"/appkit/v1/config",params:w._getSdkProperties()})).features,async fetchAllowedOrigins(){try{const{allowedOrigins:e}=await m.get({path:"/projects/v1/origins",params:w._getSdkProperties()});return e}catch(e){return[]}},async fetchNetworkImages(){const e=u.W.getAllRequestedCaipNetworks(),t=e?.map((({assets:e})=>e?.imageId)).filter(Boolean).filter((e=>!i.$.getNetworkImageById(e)));t&&await Promise.allSettled(t.map((e=>w._fetchNetworkImage(e))))},async fetchConnectorImages(){const{connectors:e}=h.a.state,t=e.map((({imageId:e})=>e)).filter(Boolean);await Promise.allSettled(t.map((e=>w._fetchConnectorImage(e))))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map((e=>w._fetchCurrencyImage(e))))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map((e=>w._fetchTokenImage(e))))},async fetchWallets(e){const t=e.exclude??[];w._getSdkProperties().sv.startsWith("html-core-")&&t.push(...Object.values(f));const r=await m.get({path:"/getWallets",params:{...w._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:t.join(",")}});return{data:w._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:e}=p.H.state;if(e?.length){const t={...w._getSdkProperties(),page:1,entries:e?.length??4,include:e},{data:r}=await w.fetchWallets(t),s=[...r].sort(((t,r)=>e.indexOf(t.id)-e.indexOf(r.id))),n=s.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled(n.map((e=>w._fetchWalletImage(e)))),y.featured=s,y.allFeatured=s}},async fetchRecommendedWallets(){try{y.isFetchingRecommendedWallets=!0;const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=p.H.state,s={page:1,entries:4,include:e,exclude:[...t??[],...r??[]].filter(Boolean),chains:u.W.getRequestedCaipNetworkIds().join(",")},{data:n,count:i}=await w.fetchWallets(s),o=c.i.getRecentWallets(),a=n.map((e=>e.image_id)).filter(Boolean),l=o.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled([...a,...l].map((e=>w._fetchWalletImage(e)))),y.recommended=n,y.allRecommended=n,y.count=i??0}catch{}finally{y.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){const{includeWalletIds:t,excludeWalletIds:r,featuredWalletIds:s}=p.H.state,n=u.W.getRequestedCaipNetworkIds().join(","),i={page:e,entries:40,include:t,exclude:[...y.recommended.map((({id:e})=>e)),...r??[],...s??[]].filter(Boolean),chains:n},{data:a,count:c}=await w.fetchWallets(i),l=a.slice(0,20).map((e=>e.image_id)).filter(Boolean);await Promise.allSettled(l.map((e=>w._fetchWalletImage(e)))),y.wallets=o.w.uniqueBy([...y.wallets,...w._filterOutExtensions(a)],"id").filter((e=>e.chains?.some((e=>n.includes(e))))),y.count=c>y.count?c:y.count,y.page=e},async initializeExcludedWallets({ids:e}){const t={page:1,entries:e.length,include:e},{data:r}=await w.fetchWallets(t);r&&r.forEach((e=>{y.excludedWallets.push({rdns:e.rdns,name:e.name})}))},async searchWallet({search:e,badge:t}){const{includeWalletIds:r,excludeWalletIds:s}=p.H.state,n=u.W.getRequestedCaipNetworkIds().join(",");y.search=[];const i={page:1,entries:100,search:e?.trim(),badge_type:t,include:r,exclude:s,chains:n},{data:a}=await w.fetchWallets(i);d.E.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});const c=a.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled([...c.map((e=>w._fetchWalletImage(e))),o.w.wait(300)]),y.search=w._filterOutExtensions(a)},initPromise:(e,t)=>y.promises[e]||(y.promises[e]=t()),prefetch({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:s=!0}={}){const n=[e&&w.initPromise("connectorImages",w.fetchConnectorImages),t&&w.initPromise("featuredWallets",w.fetchFeaturedWallets),r&&w.initPromise("recommendedWallets",w.fetchRecommendedWallets),s&&w.initPromise("networkImages",w.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(n)},prefetchAnalyticsConfig(){p.H.state.features?.analytics&&w.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:e}=await m.get({path:"/getAnalyticsConfig",params:w._getSdkProperties()});p.H.setFeatures({analytics:e})}catch(e){p.H.setFeatures({analytics:!1})}},filterByNamespaces(e){if(!e?.length)return y.featured=y.allFeatured,void(y.recommended=y.allRecommended);const t=u.W.getRequestedCaipNetworkIds().join(",");y.featured=y.allFeatured.filter((e=>e.chains?.some((e=>t.includes(e))))),y.recommended=y.allRecommended.filter((e=>e.chains?.some((e=>t.includes(e))))),y.filteredWallets=y.wallets.filter((e=>e.chains?.some((e=>t.includes(e)))))},clearFilterByNamespaces(){y.filteredWallets=[]},setFilterByNamespace(e){if(!e)return y.featured=y.allFeatured,void(y.recommended=y.allRecommended);const t=u.W.getRequestedCaipNetworkIds().join(",");y.featured=y.allFeatured.filter((e=>e.chains?.some((e=>t.includes(e))))),y.recommended=y.allRecommended.filter((e=>e.chains?.some((e=>t.includes(e))))),y.filteredWallets=y.wallets.filter((e=>e.chains?.some((e=>t.includes(e)))))}}},8351:(e,t,r)=>{"use strict";r.d(t,{R:()=>v});var s=r(9073),n=r(4707),i=r(3768),o=r(6210),a=r(152),c=r(2944),l=r(6742),u=r(3326),h=r(5940),d=r(3450),p=r(7388),f=r(9177),g=r(184),m=r(8508),y=r(1871);const w=(0,s.BX)({tokenBalances:[],loading:!1}),b={state:w,subscribe:e=>(0,s.B1)(w,(()=>e(w))),subscribeKey:(e,t)=>(0,n.u$)(w,e,t),setToken(e){e&&(w.token=(0,s.KR)(e))},setTokenAmount(e){w.sendTokenAmount=e},setReceiverAddress(e){w.receiverAddress=e},setReceiverProfileImageUrl(e){w.receiverProfileImageUrl=e},setReceiverProfileName(e){w.receiverProfileName=e},setNetworkBalanceInUsd(e){w.networkBalanceInUSD=e},setLoading(e){w.loading=e},async sendToken(){try{switch(v.setLoading(!0),p.W.state.activeCaipNetwork?.chainNamespace){case"eip155":return void await v.sendEvmToken();case"solana":return void await v.sendSolanaToken();default:throw new Error("Unsupported chain")}}finally{v.setLoading(!1)}},async sendEvmToken(){const e=p.W.state.activeChain,t=d.U.state.preferredAccountTypes?.[e];if(!v.state.sendTokenAmount||!v.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!v.state.token)throw new Error("A token is required");v.state.token?.address?(g.E.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===a.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:v.state.token.address,amount:v.state.sendTokenAmount,network:p.W.state.activeCaipNetwork?.caipNetworkId||""}}),await v.sendERC20Token({receiverAddress:v.state.receiverAddress,tokenAddress:v.state.token.address,sendTokenAmount:v.state.sendTokenAmount,decimals:v.state.token.quantity.decimals})):(g.E.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===a.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:v.state.token.symbol||"",amount:v.state.sendTokenAmount,network:p.W.state.activeCaipNetwork?.caipNetworkId||""}}),await v.sendNativeToken({receiverAddress:v.state.receiverAddress,sendTokenAmount:v.state.sendTokenAmount,decimals:v.state.token.quantity.decimals}))},async fetchTokenBalance(e){w.loading=!0;const t=p.W.state.activeCaipNetwork?.caipNetworkId,r=p.W.state.activeCaipNetwork?.chainNamespace,s=p.W.state.activeCaipAddress,n=s?l.w.getPlainAddress(s):void 0;if(w.lastRetry&&!l.w.isAllowedRetry(w.lastRetry,30*c.oU.ONE_SEC_MS))return w.loading=!1,[];try{if(n&&t&&r){const e=await u.t.getMyTokensWithBalance();return w.tokenBalances=e,w.lastRetry=void 0,e}}catch(t){w.lastRetry=Date.now(),e?.(t),y.P.showError("Token Balance Unavailable")}finally{w.loading=!1}return[]},fetchNetworkBalance(){if(0===w.tokenBalances.length)return;const e=u.t.mapBalancesToSwapTokens(w.tokenBalances);if(!e)return;const t=e.find((e=>e.address===p.W.getActiveNetworkTokenAddress()));t&&(w.networkBalanceInUSD=t?i.S.multiply(t.quantity.numeric,t.price).toString():"0")},async sendNativeToken(e){m.I.pushTransactionStack({});const t=e.receiverAddress,r=d.U.state.address,s=f.x.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));await f.x.sendTransaction({chainNamespace:"eip155",to:t,address:r,data:"0x",value:s??BigInt(0)}),g.E.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:d.U.state.preferredAccountTypes?.eip155===a.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:v.state.token?.symbol||"",amount:e.sendTokenAmount,network:p.W.state.activeCaipNetwork?.caipNetworkId||""}}),f.x._getClient()?.updateBalance("eip155"),v.resetSend()},async sendERC20Token(e){m.I.pushTransactionStack({onSuccess(){m.I.replace("Account")}});const t=f.x.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));if(d.U.state.address&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){const r=l.w.getPlainAddress(e.tokenAddress);await f.x.writeContract({fromAddress:d.U.state.address,tokenAddress:r,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:o.v.getERC20Abi(r),chainNamespace:"eip155"}),v.resetSend()}},async sendSolanaToken(){if(!v.state.sendTokenAmount||!v.state.receiverAddress)throw new Error("An amount and receiver address are required");m.I.pushTransactionStack({onSuccess(){m.I.replace("Account")}}),await f.x.sendTransaction({chainNamespace:"solana",to:v.state.receiverAddress,value:v.state.sendTokenAmount}),f.x._getClient()?.updateBalance("solana"),v.resetSend()},resetSend(){w.token=void 0,w.sendTokenAmount=void 0,w.receiverAddress=void 0,w.receiverProfileImageUrl=void 0,w.receiverProfileName=void 0,w.loading=!1,w.tokenBalances=[]}},v=(0,h.X)(b)},8467:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var s=r(9073),n=r(4707);const i=(0,s.BX)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),o={state:i,subscribe:e=>(0,s.B1)(i,(()=>e(i))),subscribeOpen:e=>(0,n.u$)(i,"open",e),set(e){Object.assign(i,{...i,...e})}}},8508:(e,t,r)=>{"use strict";r.d(t,{I:()=>p});var s=r(9073),n=r(4707),i=r(5940),o=r(3450),a=r(7388),c=r(9088),l=r(6396),u=r(2733);const h=(0,s.BX)({view:"Connect",history:["Connect"],transactionStack:[]}),d={state:h,subscribeKey:(e,t)=>(0,n.u$)(h,e,t),pushTransactionStack(e){h.transactionStack.push(e)},popTransactionStack(e){const t=h.transactionStack.pop();if(!t)return;const{onSuccess:r,onError:s,onCancel:n}=t;switch(e){case"success":r?.();break;case"error":s?.(),p.goBack();break;case"cancel":n?.(),p.goBack()}},push(e,t){e!==h.view&&(h.view=e,h.history.push(e),h.data=t)},reset(e,t){h.view=e,h.history=[e],h.data=t},replace(e,t){h.history.at(-1)===e||(h.view=e,h.history[h.history.length-1]=e,h.data=t)},goBack(){const e=!a.W.state.activeCaipAddress&&"ConnectingFarcaster"===p.state.view;if(h.history.length>1){h.history.pop();const[e]=h.history.slice(-1);e&&(h.view=e)}else l.W.close();h.data?.wallet&&(h.data.wallet=void 0),setTimeout((()=>{if(e){o.U.setFarcasterUrl(void 0,a.W.state.activeChain);const e=c.a.getAuthConnector();e?.provider?.reload();const t=(0,s.P9)(u.H.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}}),100)},goBackToIndex(e){if(h.history.length>1){h.history=h.history.slice(0,e+1);const[t]=h.history.slice(-1);t&&(h.view=t)}},goBackOrCloseModal(){p.state.history.length>1?p.goBack():l.W.close()}},p=(0,i.X)(d)},8900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(5215);s.__exportStar(r(9606),t),s.__exportStar(r(9883),t),s.__exportStar(r(2010),t),s.__exportStar(r(9026),t)},8990:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(9073),n=r(4707);const i={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},o=(0,s.BX)({providers:{...i},providerIds:{...i}}),a={state:o,subscribeKey:(e,t)=>(0,n.u$)(o,e,t),subscribe:e=>(0,s.B1)(o,(()=>{e(o)})),subscribeProviders:e=>(0,s.B1)(o.providers,(()=>e(o.providers))),setProvider(e,t){t&&(o.providers[e]=(0,s.KR)(t))},getProvider:e=>o.providers[e],setProviderId(e,t){t&&(o.providerIds[e]=t)},getProviderId(e){if(e)return o.providerIds[e]},reset(){o.providers={...i},o.providerIds={...i}},resetChain(e){o.providers[e]=void 0,o.providerIds[e]=void 0}}},8996:(e,t,r)=>{"use strict";r.d(t,{W:()=>l});var s=r(9073),n=r(3096),i=r(5940),o=r(9088);const a=(0,s.BX)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),c={state:a,subscribe:e=>(0,s.B1)(a,(()=>e(a))),setThemeMode(e){a.themeMode=e;try{const t=o.a.getAuthConnector();if(t){const r=c.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:r,w3mThemeVariables:(0,n.o)(r,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){a.themeVariables={...a.themeVariables,...e};try{const e=o.a.getAuthConnector();if(e){const t=c.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,n.o)(a.themeVariables,a.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>(0,s.P9)(a)},l=(0,i.X)(c)},9026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(5215);s.__exportStar(r(9244),t),s.__exportStar(r(1861),t)},9073:(e,t,r)=>{"use strict";r.d(t,{BX:()=>h,KR:()=>f,P9:()=>p,B1:()=>d}),Symbol();const s=Symbol(),n=Object.getPrototypeOf,i=new WeakMap,o=(e,t=!0)=>{i.set(e,t)},a=e=>"object"==typeof e&&null!==e,c=new WeakMap,l=new WeakSet,[u]=((e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>a(e)&&!l.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),u=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},h=new WeakMap,d=(e,t,r=u)=>{const s=h.get(e);if((null==s?void 0:s[0])===t)return s[1];const n=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return o(n,!0),h.set(e,[t,n]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(n,t))return;const s=Reflect.get(e,t),{enumerable:i}=Reflect.getOwnPropertyDescriptor(e,t),a={value:s,enumerable:i,configurable:!0};if(l.has(s))o(s,!1);else if(s instanceof Promise)delete a.value,a.get=()=>r(s);else if(c.has(s)){const[e,t]=c.get(s);a.value=d(e,t(),r)}Object.defineProperty(n,t,a)})),Object.preventExtensions(n)},p=new WeakMap,f=[1,1],g=o=>{if(!a(o))throw new Error("object required");const u=p.get(o);if(u)return u;let h=f[0];const m=new Set,y=(e,t=++f[0])=>{h!==t&&(h=t,m.forEach((r=>r(e,t))))};let w=f[1];const b=e=>(t,r)=>{const s=[...t];s[1]=[e,...s[1]],y(s,r)},v=new Map,E=e=>{var t;const r=v.get(e);r&&(v.delete(e),null==(t=r[1])||t.call(r))},A=Array.isArray(o)?[]:Object.create(Object.getPrototypeOf(o)),C=t(A,{deleteProperty(e,t){const r=Reflect.get(e,t);E(t);const s=Reflect.deleteProperty(e,t);return s&&y(["delete",[t],r]),s},set(t,o,u,h){const d=Reflect.has(t,o),f=Reflect.get(t,o,h);if(d&&(e(f,u)||p.has(u)&&e(f,p.get(u))))return!0;var w;E(o),a(u)&&(u=(e=>e&&(i.has(e)?i.get(e):n(e)===Object.prototype||n(e)===Array.prototype))(w=u)&&w[s]||null||u);let A=u;if(u instanceof Promise)u.then((e=>{u.status="fulfilled",u.value=e,y(["resolve",[o],e])})).catch((e=>{u.status="rejected",u.reason=e,y(["reject",[o],e])}));else{!c.has(u)&&r(u)&&(A=g(u));const e=!l.has(A)&&c.get(A);e&&((e,t)=>{if(v.has(e))throw new Error("prop listener already exists");if(m.size){const r=t[3](b(e));v.set(e,[t,r])}else v.set(e,[t])})(o,e)}return Reflect.set(t,o,A,h),y(["set",[o],u,f]),!0}});p.set(o,C);const _=[A,(e=++f[1])=>(w===e||m.size||(w=e,v.forEach((([t])=>{const r=t[1](e);r>h&&(h=r)}))),h),d,e=>(m.add(e),1===m.size&&v.forEach((([e,t],r)=>{if(t)throw new Error("remove already exists");const s=e[3](b(r));v.set(r,[e,s])})),()=>{m.delete(e),0===m.size&&v.forEach((([e,t],r)=>{t&&(t(),v.set(r,[e]))}))})];return c.set(C,_),Reflect.ownKeys(o).forEach((e=>{const t=Object.getOwnPropertyDescriptor(o,e);"value"in t&&(C[e]=o[e],delete t.value,delete t.writable),Object.defineProperty(A,e,t)})),C})=>[g,c,l,e,t,r,u,h,d,p,f])();function h(e={}){return u(e)}function d(e,t,r){const s=c.get(e);let n;s||console.warn("Please use proxy object");const i=[],o=s[3];let a=!1;const l=o((e=>{i.push(e),r?t(i.splice(0)):n||(n=Promise.resolve().then((()=>{n=void 0,a&&t(i.splice(0))})))}));return a=!0,()=>{a=!1,l()}}function p(e,t){const r=c.get(e);r||console.warn("Please use proxy object");const[s,n,i]=r;return i(s,n(),t)}function f(e){return l.add(e),e}},9088:(e,t,r)=>{"use strict";r.d(t,{a:()=>w});var s=r(9073),n=r(4707),i=r(4376),o=r(3096),a=r(7388);const c={handleMobileDeeplinkRedirect(e){const t=window.location.href,r=encodeURIComponent(t);if("Phantom"===e&&!("phantom"in window)){const e=t.startsWith("https")?"https":"http",s=t.split("/")[2],n=encodeURIComponent(`${e}://${s}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${n}`}a.W.state.activeChain===i.o.CHAIN.SOLANA&&("Coinbase Wallet"!==e||"coinbaseSolana"in window||(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`))}};var l=r(7508),u=r(5940),h=r(8249),d=r(2733),p=r(8508),f=r(8996);const g={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},m=(0,s.BX)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...g},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),y={state:m,subscribe:e=>(0,s.B1)(m,(()=>{e(m)})),subscribeKey:(e,t)=>(0,n.u$)(m,e,t),initialize(e){e.forEach((e=>{const t=l.i.getConnectedConnectorId(e);t&&w.setConnectorId(t,e)}))},setActiveConnector(e){e&&(m.activeConnector=(0,s.KR)(e))},setConnectors(e){e.filter((e=>!m.allConnectors.some((t=>t.id===e.id&&w.getConnectorName(t.name)===w.getConnectorName(e.name)&&t.chain===e.chain)))).forEach((e=>{"MULTI_CHAIN"!==e.type&&m.allConnectors.push((0,s.KR)(e))}));const t=w.getEnabledNamespaces(),r=w.getEnabledConnectors(t);m.connectors=w.mergeMultiChainConnectors(r)},filterByNamespaces(e){Object.keys(m.filterByNamespaceMap).forEach((e=>{m.filterByNamespaceMap[e]=!1})),e.forEach((e=>{m.filterByNamespaceMap[e]=!0})),w.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,t){m.filterByNamespaceMap[e]=t,w.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const e=w.getEnabledNamespaces(),t=w.getEnabledConnectors(e),r=w.areAllNamespacesEnabled();m.connectors=w.mergeMultiChainConnectors(t),r?h.Np.clearFilterByNamespaces():h.Np.filterByNamespaces(e)},getEnabledNamespaces:()=>Object.entries(m.filterByNamespaceMap).filter((([e,t])=>t)).map((([e])=>e)),getEnabledConnectors:e=>m.allConnectors.filter((t=>e.includes(t.chain))),areAllNamespacesEnabled:()=>Object.values(m.filterByNamespaceMap).every((e=>e)),mergeMultiChainConnectors(e){const t=w.generateConnectorMapByName(e),r=[];return t.forEach((e=>{const t=e[0],s=t?.id===i.o.CONNECTOR_ID.AUTH;e.length>1&&t?r.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&r.push(t)})),r},generateConnectorMapByName(e){const t=new Map;return e.forEach((e=>{const{name:r}=e,s=w.getConnectorName(r);if(!s)return;const n=t.get(s)||[];n.find((t=>t.chain===e.chain))||n.push(e),t.set(s,n)})),t},getConnectorName:e=>e&&{"Trust Wallet":"Trust"}[e]||e,getUniqueConnectorsByName(e){const t=[];return e.forEach((e=>{t.find((t=>t.chain===e.chain))||t.push(e)})),t},addConnector(e){if(e.id===i.o.CONNECTOR_ID.AUTH){const t=e,r=(0,s.P9)(d.H.state),n=f.W.getSnapshot().themeMode,i=f.W.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),t?.provider?.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:(0,o.o)(i,n)}),w.setConnectors([e])}else w.setConnectors([e])},getAuthConnector(e){const t=e||a.W.state.activeChain,r=m.connectors.find((e=>e.id===i.o.CONNECTOR_ID.AUTH));if(r)return r?.connectors?.length?r.connectors.find((e=>e.chain===t)):r},getAnnouncedConnectorRdns:()=>m.connectors.filter((e=>"ANNOUNCED"===e.type)).map((e=>e.info?.rdns)),getConnectorById:e=>m.allConnectors.find((t=>t.id===e)),getConnector:(e,t)=>m.allConnectors.filter((e=>e.chain===a.W.state.activeChain)).find((r=>r.explorerId===e||r.info?.rdns===t)),syncIfAuthConnector(e){if("ID_AUTH"!==e.id)return;const t=e,r=(0,s.P9)(d.H.state),n=f.W.getSnapshot().themeMode,i=f.W.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),t.provider.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:(0,o.o)(i,n)})},getConnectorsByNamespace(e){const t=m.allConnectors.filter((t=>t.chain===e));return w.mergeMultiChainConnectors(t)},selectWalletConnector(e){const t=w.getConnector(e.id,e.rdns);c.handleMobileDeeplinkRedirect(t?.name||e.name||""),t?p.I.push("ConnectingExternal",{connector:t}):p.I.push("ConnectingWalletConnect",{wallet:e})},getConnectors:e=>e?w.getConnectorsByNamespace(e):w.mergeMultiChainConnectors(m.allConnectors),setFilterByNamespace(e){m.filterByNamespace=e,m.connectors=w.getConnectors(e),h.Np.setFilterByNamespace(e)},setConnectorId(e,t){e&&(m.activeConnectorIds={...m.activeConnectorIds,[t]:e},l.i.setConnectedConnectorId(t,e))},removeConnectorId(e){m.activeConnectorIds={...m.activeConnectorIds,[e]:void 0},l.i.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return m.activeConnectorIds[e]},isConnected:e=>e?Boolean(m.activeConnectorIds[e]):Object.values(m.activeConnectorIds).some((e=>Boolean(e))),resetConnectorIds(){m.activeConnectorIds={...g}}},w=(0,u.X)(y)},9177:(e,t,r)=>{"use strict";r.d(t,{x:()=>b});var s=r(9073),n=r(4707),i=r(6742),o=r(1122),a=r(7508),c=r(5940),l=r(3450),u=r(7388),h=r(9088),d=r(184),p=r(6396),f=r(8508),g=r(6360);const m=(0,s.BX)({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let y;const w={state:m,subscribeKey:(e,t)=>(0,n.u$)(m,e,t),_getClient:()=>m._client,setClient(e){m._client=(0,s.KR)(e)},async connectWalletConnect(){if(i.w.isTelegram()||i.w.isSafari()&&i.w.isIos()){if(y)return await y,void(y=void 0);if(!i.w.isPairingExpired(m?.wcPairingExpiry)){const e=m.wcUri;return void(m.wcUri=e)}y=b._getClient()?.connectWalletConnect?.().catch((()=>{})),b.state.status="connecting",await y,y=void 0,m.wcPairingExpiry=void 0,b.state.status="connected"}else await(b._getClient()?.connectWalletConnect?.())},async connectExternal(e,t,r=!0){await(b._getClient()?.connectExternal?.(e)),r&&u.W.setActiveNamespace(t)},async reconnectExternal(e){await(b._getClient()?.reconnectExternal?.(e));const t=e.chain||u.W.state.activeChain;t&&h.a.setConnectorId(e.id,t)},async setPreferredAccountType(e,t){p.W.setLoading(!0,u.W.state.activeChain);const r=h.a.getAuthConnector();r&&(l.U.setPreferredAccountType(e,t),await r.provider.setPreferredAccount(e),a.i.setPreferredAccountTypes(l.U.state.preferredAccountTypes??{[t]:e}),await b.reconnectExternal(r),p.W.setLoading(!1,u.W.state.activeChain),d.E.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:u.W.state.activeCaipNetwork?.caipNetworkId||""}}))},signMessage:async e=>b._getClient()?.signMessage(e),parseUnits:(e,t)=>b._getClient()?.parseUnits(e,t),formatUnits:(e,t)=>b._getClient()?.formatUnits(e,t),sendTransaction:async e=>b._getClient()?.sendTransaction(e),getCapabilities:async e=>b._getClient()?.getCapabilities(e),grantPermissions:async e=>b._getClient()?.grantPermissions(e),walletGetAssets:async e=>b._getClient()?.walletGetAssets(e)??{},estimateGas:async e=>b._getClient()?.estimateGas(e),writeContract:async e=>b._getClient()?.writeContract(e),getEnsAddress:async e=>b._getClient()?.getEnsAddress(e),getEnsAvatar:async e=>b._getClient()?.getEnsAvatar(e),checkInstalled:e=>b._getClient()?.checkInstalled?.(e)||!1,resetWcConnection(){m.wcUri=void 0,m.wcPairingExpiry=void 0,m.wcLinking=void 0,m.recentWallet=void 0,m.status="disconnected",g.W.resetTransactions(),a.i.deleteWalletConnectDeepLink()},resetUri(){m.wcUri=void 0,m.wcPairingExpiry=void 0,y=void 0},finalizeWcConnection(){const{wcLinking:e,recentWallet:t}=b.state;e&&a.i.setWalletConnectDeepLink(e),t&&a.i.setAppKitRecent(t),d.E.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:e?"mobile":"qrcode",name:f.I.state.data?.wallet?.name||"Unknown"}})},setWcBasic(e){m.wcBasic=e},setUri(e){m.wcUri=e,m.wcPairingExpiry=i.w.getPairingExpiry()},setWcLinking(e){m.wcLinking=e},setWcError(e){m.wcError=e,m.buffering=!1},setRecentWallet(e){m.recentWallet=e},setBuffering(e){m.buffering=e},setStatus(e){m.status=e},async disconnect(e){try{p.W.setLoading(!0,e),await o.U.clearSessions(),await u.W.disconnect(e),p.W.setLoading(!1,e),h.a.setFilterByNamespace(void 0)}catch(e){throw new c.A("Failed to disconnect","INTERNAL_SDK_ERROR",e)}},setConnections(e,t){m.connections.set(t,e)},switchAccount({connection:e,address:t,namespace:r}){if(h.a.state.activeConnectorIds[r]===e.connectorId){const e=u.W.state.activeCaipNetwork;if(e){const s=`${r}:${e.id}:${t}`;l.U.setCaipAddress(s,r)}else console.warn(`No current network found for namespace "${r}"`)}else{const t=h.a.getConnector(e.connectorId);t?b.connectExternal(t,r):console.warn(`No connector found for namespace "${r}"`)}}},b=(0,c.X)(w)},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},9510:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});const s={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"}},9606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(5215);s.__exportStar(r(2985),t),s.__exportStar(r(221),t)},9835:(e,t,r)=>{"use strict";r.d(t,{Y:()=>$r});var s,n,i=r(4376),o=r(152),a=r(6409);!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),s={};for(const e of r)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(s||(s={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(n||(n={}));const c=s.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),l=e=>{switch(typeof e){case"undefined":return c.undefined;case"string":return c.string;case"number":return isNaN(e)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":return Array.isArray(e)?c.array:null===e?c.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?c.promise:"undefined"!=typeof Map&&e instanceof Map?c.map:"undefined"!=typeof Set&&e instanceof Set?c.set:"undefined"!=typeof Date&&e instanceof Date?c.date:c.object;default:return c.unknown}},u=s.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class h extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},s=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(s);else if("invalid_return_type"===n.code)s(n.returnTypeError);else if("invalid_arguments"===n.code)s(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,s=0;for(;s<n.path.length;){const r=n.path[s];s===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}h.create=e=>new h(e);const d=(e,t)=>{let r;switch(e.code){case u.invalid_type:r=e.received===c.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case u.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,s.jsonStringifyReplacer)}`;break;case u.unrecognized_keys:r=`Unrecognized key(s) in object: ${s.joinValues(e.keys,", ")}`;break;case u.invalid_union:r="Invalid input";break;case u.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${s.joinValues(e.options)}`;break;case u.invalid_enum_value:r=`Invalid enum value. Expected ${s.joinValues(e.options)}, received '${e.received}'`;break;case u.invalid_arguments:r="Invalid function arguments";break;case u.invalid_return_type:r="Invalid function return type";break;case u.invalid_date:r="Invalid date";break;case u.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:s.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case u.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case u.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case u.custom:r="Invalid input";break;case u.invalid_intersection_types:r="Intersection results could not be merged";break;case u.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case u.not_finite:r="Number must be finite";break;default:r=t.defaultError,s.assertNever(e)}return{message:r}};let p=d;function f(){return p}const g=e=>{const{data:t,path:r,errorMaps:s,issueData:n}=e,i=[...r,...n.path||[]],o={...n,path:i};let a="";const c=s.filter((e=>!!e)).slice().reverse();for(const e of c)a=e(o,{data:t,defaultError:a}).message;return{...n,path:i,message:n.message||a}};function m(e,t){const r=g({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,f(),d].filter((e=>!!e))});e.common.issues.push(r)}class y{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if("aborted"===s.status)return w;"dirty"===s.status&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return y.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:t,value:n}=s;if("aborted"===t.status)return w;if("aborted"===n.status)return w;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!s.alwaysSet||(r[t.value]=n.value)}return{status:e.value,value:r}}}const w=Object.freeze({status:"aborted"}),b=e=>({status:"dirty",value:e}),v=e=>({status:"valid",value:e}),E=e=>"aborted"===e.status,A=e=>"dirty"===e.status,C=e=>"valid"===e.status,_=e=>"undefined"!=typeof Promise&&e instanceof Promise;var N;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(N||(N={}));class I{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const S=(e,t)=>{if(C(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new h(e.common.issues);return this._error=t,this._error}}};function T(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:n}=e;if(t&&(r||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=s?s:t.defaultError}:{message:null!=r?r:t.defaultError},description:n}}class P{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return l(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new y,ctx:{common:e.parent.common,data:e.data,parsedType:l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:l(e)},n=this._parseSync({data:e,path:s.path,parent:s});return S(s,n)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:l(e)},s=this._parse({data:e,path:r.path,parent:r}),n=await(_(s)?s:Promise.resolve(s));return S(r,n)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,s)=>{const n=e(t),i=()=>s.addIssue({code:u.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(i(),!1))):!!n||(i(),!1)}))}refinement(e,t){return this._refinement(((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1)))}_refinement(e){return new me({schema:this,typeName:Te.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ye.create(this,this._def)}nullable(){return we.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Z.create(this,this._def)}promise(){return ge.create(this,this._def)}or(e){return ee.create([this,e],this._def)}and(e){return ne.create(this,e,this._def)}transform(e){return new me({...T(this._def),schema:this,typeName:Te.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new be({...T(this._def),innerType:this,defaultValue:t,typeName:Te.ZodDefault})}brand(){return new Ce({typeName:Te.ZodBranded,type:this,...T(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ve({...T(this._def),innerType:this,catchValue:t,typeName:Te.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return _e.create(this,e)}readonly(){return Ne.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const O=/^c[^\s-]{8,}$/i,x=/^[a-z][a-z0-9]*$/,k=/^[0-9A-HJKMNP-TV-Z]{26}$/,R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,U=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let D;const B=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,L=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class M extends P{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==c.string){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.string,received:t.parsedType}),w}const t=new y;let r;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),m(r,{code:u.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),m(r,{code:u.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const s=e.data.length>a.value,n=e.data.length<a.value;(s||n)&&(r=this._getOrReturnCtx(e,r),s?m(r,{code:u.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):n&&m(r,{code:u.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)U.test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{validation:"email",code:u.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)D||(D=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),D.test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{validation:"emoji",code:u.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)R.test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{validation:"uuid",code:u.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)O.test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{validation:"cuid",code:u.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)x.test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{validation:"cuid2",code:u.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)k.test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{validation:"ulid",code:u.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(s){r=this._getOrReturnCtx(e,r),m(r,{validation:"url",code:u.invalid_string,message:a.message}),t.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{validation:"regex",code:u.invalid_string,message:a.message}),t.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),m(r,{code:u.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),m(r,{code:u.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),m(r,{code:u.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty()):"datetime"===a.kind?((o=a).precision?o.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${o.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${o.precision}}Z$`):0===o.precision?o.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):o.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),m(r,{code:u.invalid_string,validation:"datetime",message:a.message}),t.dirty()):"ip"===a.kind?(n=e.data,("v4"!==(i=a.version)&&i||!B.test(n))&&("v6"!==i&&i||!L.test(n))&&(r=this._getOrReturnCtx(e,r),m(r,{validation:"ip",code:u.invalid_string,message:a.message}),t.dirty())):s.assertNever(a);var n,i,o;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:u.invalid_string,...N.errToObj(r)})}_addCheck(e){return new M({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...N.errToObj(e)})}url(e){return this._addCheck({kind:"url",...N.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...N.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...N.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...N.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...N.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...N.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...N.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...N.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...N.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...N.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...N.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...N.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...N.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...N.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...N.errToObj(t)})}nonempty(e){return this.min(1,N.errToObj(e))}trim(){return new M({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new M({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new M({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function j(e,t){const r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=r>s?r:s;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}M.create=e=>{var t;return new M({checks:[],typeName:Te.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...T(e)})};class F extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==c.number){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.number,received:t.parsedType}),w}let t;const r=new y;for(const n of this._def.checks)"int"===n.kind?s.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),m(t,{code:u.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),m(t,{code:u.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),m(t,{code:u.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==j(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),m(t,{code:u.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),m(t,{code:u.not_finite,message:n.message}),r.dirty()):s.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,N.toString(t))}gt(e,t){return this.setLimit("min",e,!1,N.toString(t))}lte(e,t){return this.setLimit("max",e,!0,N.toString(t))}lt(e,t){return this.setLimit("max",e,!1,N.toString(t))}setLimit(e,t,r,s){return new F({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:N.toString(s)}]})}_addCheck(e){return new F({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:N.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:N.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:N.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:N.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:N.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:N.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:N.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:N.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:N.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&s.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}F.create=e=>new F({checks:[],typeName:Te.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...T(e)});class H extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==c.bigint){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.bigint,received:t.parsedType}),w}let t;const r=new y;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),m(t,{code:u.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),m(t,{code:u.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),m(t,{code:u.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):s.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,N.toString(t))}gt(e,t){return this.setLimit("min",e,!1,N.toString(t))}lte(e,t){return this.setLimit("max",e,!0,N.toString(t))}lt(e,t){return this.setLimit("max",e,!1,N.toString(t))}setLimit(e,t,r,s){return new H({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:N.toString(s)}]})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:N.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:N.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:N.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:N.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:N.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}H.create=e=>{var t;return new H({checks:[],typeName:Te.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...T(e)})};class $ extends P{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==c.boolean){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.boolean,received:t.parsedType}),w}return v(e.data)}}$.create=e=>new $({typeName:Te.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...T(e)});class W extends P{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==c.date){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.date,received:t.parsedType}),w}if(isNaN(e.data.getTime()))return m(this._getOrReturnCtx(e),{code:u.invalid_date}),w;const t=new y;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),m(r,{code:u.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),m(r,{code:u.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):s.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new W({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:N.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:N.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}W.create=e=>new W({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Te.ZodDate,...T(e)});class z extends P{_parse(e){if(this._getType(e)!==c.symbol){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.symbol,received:t.parsedType}),w}return v(e.data)}}z.create=e=>new z({typeName:Te.ZodSymbol,...T(e)});class q extends P{_parse(e){if(this._getType(e)!==c.undefined){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.undefined,received:t.parsedType}),w}return v(e.data)}}q.create=e=>new q({typeName:Te.ZodUndefined,...T(e)});class V extends P{_parse(e){if(this._getType(e)!==c.null){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.null,received:t.parsedType}),w}return v(e.data)}}V.create=e=>new V({typeName:Te.ZodNull,...T(e)});class G extends P{constructor(){super(...arguments),this._any=!0}_parse(e){return v(e.data)}}G.create=e=>new G({typeName:Te.ZodAny,...T(e)});class K extends P{constructor(){super(...arguments),this._unknown=!0}_parse(e){return v(e.data)}}K.create=e=>new K({typeName:Te.ZodUnknown,...T(e)});class J extends P{_parse(e){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.never,received:t.parsedType}),w}}J.create=e=>new J({typeName:Te.ZodNever,...T(e)});class Q extends P{_parse(e){if(this._getType(e)!==c.undefined){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.void,received:t.parsedType}),w}return v(e.data)}}Q.create=e=>new Q({typeName:Te.ZodVoid,...T(e)});class Z extends P{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==c.array)return m(t,{code:u.invalid_type,expected:c.array,received:t.parsedType}),w;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,n=t.data.length<s.exactLength.value;(e||n)&&(m(t,{code:e?u.too_big:u.too_small,minimum:n?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(m(t,{code:u.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(m(t,{code:u.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>s.type._parseAsync(new I(t,e,t.path,r))))).then((e=>y.mergeArray(r,e)));const n=[...t.data].map(((e,r)=>s.type._parseSync(new I(t,e,t.path,r))));return y.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new Z({...this._def,minLength:{value:e,message:N.toString(t)}})}max(e,t){return new Z({...this._def,maxLength:{value:e,message:N.toString(t)}})}length(e,t){return new Z({...this._def,exactLength:{value:e,message:N.toString(t)}})}nonempty(e){return this.min(1,e)}}function Y(e){if(e instanceof X){const t={};for(const r in e.shape){const s=e.shape[r];t[r]=ye.create(Y(s))}return new X({...e._def,shape:()=>t})}return e instanceof Z?new Z({...e._def,type:Y(e.element)}):e instanceof ye?ye.create(Y(e.unwrap())):e instanceof we?we.create(Y(e.unwrap())):e instanceof ie?ie.create(e.items.map((e=>Y(e)))):e}Z.create=(e,t)=>new Z({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Te.ZodArray,...T(t)});class X extends P{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=s.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==c.object){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.object,received:t.parsedType}),w}const{status:t,ctx:r}=this._processInputParams(e),{shape:s,keys:n}=this._getCached(),i=[];if(!(this._def.catchall instanceof J&&"strip"===this._def.unknownKeys))for(const e in r.data)n.includes(e)||i.push(e);const o=[];for(const e of n){const t=s[e],n=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new I(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof J){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(m(r,{code:u.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const s=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new I(r,s,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>y.mergeObjectSync(t,e))):y.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return N.errToObj,new X({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var s,n,i,o;const a=null!==(i=null===(n=(s=this._def).errorMap)||void 0===n?void 0:n.call(s,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=N.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new X({...this._def,unknownKeys:"strip"})}passthrough(){return new X({...this._def,unknownKeys:"passthrough"})}extend(e){return new X({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new X({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Te.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new X({...this._def,catchall:e})}pick(e){const t={};return s.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new X({...this._def,shape:()=>t})}omit(e){const t={};return s.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new X({...this._def,shape:()=>t})}deepPartial(){return Y(this)}partial(e){const t={};return s.objectKeys(this.shape).forEach((r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()})),new X({...this._def,shape:()=>t})}required(e){const t={};return s.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ye;)e=e._def.innerType;t[r]=e}})),new X({...this._def,shape:()=>t})}keyof(){return de(s.objectKeys(this.shape))}}X.create=(e,t)=>new X({shape:()=>e,unknownKeys:"strip",catchall:J.create(),typeName:Te.ZodObject,...T(t)}),X.strictCreate=(e,t)=>new X({shape:()=>e,unknownKeys:"strict",catchall:J.create(),typeName:Te.ZodObject,...T(t)}),X.lazycreate=(e,t)=>new X({shape:e,unknownKeys:"strip",catchall:J.create(),typeName:Te.ZodObject,...T(t)});class ee extends P{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new h(e.ctx.common.issues)));return m(t,{code:u.invalid_union,unionErrors:r}),w}));{let e;const s=[];for(const n of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&s.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=s.map((e=>new h(e)));return m(t,{code:u.invalid_union,unionErrors:n}),w}}get options(){return this._def.options}}ee.create=(e,t)=>new ee({options:e,typeName:Te.ZodUnion,...T(t)});const te=e=>e instanceof ue?te(e.schema):e instanceof me?te(e.innerType()):e instanceof he?[e.value]:e instanceof pe?e.options:e instanceof fe?Object.keys(e.enum):e instanceof be?te(e._def.innerType):e instanceof q?[void 0]:e instanceof V?[null]:null;class re extends P{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.object)return m(t,{code:u.invalid_type,expected:c.object,received:t.parsedType}),w;const r=this.discriminator,s=t.data[r],n=this.optionsMap.get(s);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(m(t,{code:u.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),w)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const r of t){const t=te(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(s.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);s.set(n,r)}}return new re({typeName:Te.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...T(r)})}}function se(e,t){const r=l(e),n=l(t);if(e===t)return{valid:!0,data:e};if(r===c.object&&n===c.object){const r=s.objectKeys(t),n=s.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const s=se(e[r],t[r]);if(!s.valid)return{valid:!1};i[r]=s.data}return{valid:!0,data:i}}if(r===c.array&&n===c.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let s=0;s<e.length;s++){const n=se(e[s],t[s]);if(!n.valid)return{valid:!1};r.push(n.data)}return{valid:!0,data:r}}return r===c.date&&n===c.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class ne extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(e,s)=>{if(E(e)||E(s))return w;const n=se(e.value,s.value);return n.valid?((A(e)||A(s))&&t.dirty(),{status:t.value,value:n.data}):(m(r,{code:u.invalid_intersection_types}),w)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>s(e,t))):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ne.create=(e,t,r)=>new ne({left:e,right:t,typeName:Te.ZodIntersection,...T(r)});class ie extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.array)return m(r,{code:u.invalid_type,expected:c.array,received:r.parsedType}),w;if(r.data.length<this._def.items.length)return m(r,{code:u.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w;!this._def.rest&&r.data.length>this._def.items.length&&(m(r,{code:u.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map(((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new I(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(s).then((e=>y.mergeArray(t,e))):y.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new ie({...this._def,rest:e})}}ie.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ie({items:e,typeName:Te.ZodTuple,rest:null,...T(t)})};class oe extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.object)return m(r,{code:u.invalid_type,expected:c.object,received:r.parsedType}),w;const s=[],n=this._def.keyType,i=this._def.valueType;for(const e in r.data)s.push({key:n._parse(new I(r,e,r.path,e)),value:i._parse(new I(r,r.data[e],r.path,e))});return r.common.async?y.mergeObjectAsync(t,s):y.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return new oe(t instanceof P?{keyType:e,valueType:t,typeName:Te.ZodRecord,...T(r)}:{keyType:M.create(),valueType:e,typeName:Te.ZodRecord,...T(t)})}}class ae extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.map)return m(r,{code:u.invalid_type,expected:c.map,received:r.parsedType}),w;const s=this._def.keyType,n=this._def.valueType,i=[...r.data.entries()].map((([e,t],i)=>({key:s._parse(new I(r,e,r.path,[i,"key"])),value:n._parse(new I(r,t,r.path,[i,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of i){const s=await r.key,n=await r.value;if("aborted"===s.status||"aborted"===n.status)return w;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of i){const s=r.key,n=r.value;if("aborted"===s.status||"aborted"===n.status)return w;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}}}ae.create=(e,t,r)=>new ae({valueType:t,keyType:e,typeName:Te.ZodMap,...T(r)});class ce extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.set)return m(r,{code:u.invalid_type,expected:c.set,received:r.parsedType}),w;const s=this._def;null!==s.minSize&&r.data.size<s.minSize.value&&(m(r,{code:u.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&r.data.size>s.maxSize.value&&(m(r,{code:u.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const n=this._def.valueType;function i(e){const r=new Set;for(const s of e){if("aborted"===s.status)return w;"dirty"===s.status&&t.dirty(),r.add(s.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>n._parse(new I(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>i(e))):i(o)}min(e,t){return new ce({...this._def,minSize:{value:e,message:N.toString(t)}})}max(e,t){return new ce({...this._def,maxSize:{value:e,message:N.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ce.create=(e,t)=>new ce({valueType:e,minSize:null,maxSize:null,typeName:Te.ZodSet,...T(t)});class le extends P{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.function)return m(t,{code:u.invalid_type,expected:c.function,received:t.parsedType}),w;function r(e,r){return g({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,f(),d].filter((e=>!!e)),issueData:{code:u.invalid_arguments,argumentsError:r}})}function s(e,r){return g({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,f(),d].filter((e=>!!e)),issueData:{code:u.invalid_return_type,returnTypeError:r}})}const n={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof ge){const e=this;return v((async function(...t){const o=new h([]),a=await e._def.args.parseAsync(t,n).catch((e=>{throw o.addIssue(r(t,e)),o})),c=await Reflect.apply(i,this,a);return await e._def.returns._def.type.parseAsync(c,n).catch((e=>{throw o.addIssue(s(c,e)),o}))}))}{const e=this;return v((function(...t){const o=e._def.args.safeParse(t,n);if(!o.success)throw new h([r(t,o.error)]);const a=Reflect.apply(i,this,o.data),c=e._def.returns.safeParse(a,n);if(!c.success)throw new h([s(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new le({...this._def,args:ie.create(e).rest(K.create())})}returns(e){return new le({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new le({args:e||ie.create([]).rest(K.create()),returns:t||K.create(),typeName:Te.ZodFunction,...T(r)})}}class ue extends P{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ue.create=(e,t)=>new ue({getter:e,typeName:Te.ZodLazy,...T(t)});class he extends P{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return m(t,{received:t.data,code:u.invalid_literal,expected:this._def.value}),w}return{status:"valid",value:e.data}}get value(){return this._def.value}}function de(e,t){return new pe({values:e,typeName:Te.ZodEnum,...T(t)})}he.create=(e,t)=>new he({value:e,typeName:Te.ZodLiteral,...T(t)});class pe extends P{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return m(t,{expected:s.joinValues(r),received:t.parsedType,code:u.invalid_type}),w}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return m(t,{received:t.data,code:u.invalid_enum_value,options:r}),w}return v(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return pe.create(e)}exclude(e){return pe.create(this.options.filter((t=>!e.includes(t))))}}pe.create=de;class fe extends P{_parse(e){const t=s.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==c.string&&r.parsedType!==c.number){const e=s.objectValues(t);return m(r,{expected:s.joinValues(e),received:r.parsedType,code:u.invalid_type}),w}if(-1===t.indexOf(e.data)){const e=s.objectValues(t);return m(r,{received:r.data,code:u.invalid_enum_value,options:e}),w}return v(e.data)}get enum(){return this._def.values}}fe.create=(e,t)=>new fe({values:e,typeName:Te.ZodNativeEnum,...T(t)});class ge extends P{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.promise&&!1===t.common.async)return m(t,{code:u.invalid_type,expected:c.promise,received:t.parsedType}),w;const r=t.parsedType===c.promise?t.data:Promise.resolve(t.data);return v(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ge.create=(e,t)=>new ge({type:e,typeName:Te.ZodPromise,...T(t)});class me extends P{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{m(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===s.status?w:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?w:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!C(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>C(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}s.assertNever(n)}}me.create=(e,t,r)=>new me({schema:e,typeName:Te.ZodEffects,effect:t,...T(r)}),me.createWithPreprocess=(e,t,r)=>new me({schema:t,effect:{type:"preprocess",transform:e},typeName:Te.ZodEffects,...T(r)});class ye extends P{_parse(e){return this._getType(e)===c.undefined?v(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ye.create=(e,t)=>new ye({innerType:e,typeName:Te.ZodOptional,...T(t)});class we extends P{_parse(e){return this._getType(e)===c.null?v(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}we.create=(e,t)=>new we({innerType:e,typeName:Te.ZodNullable,...T(t)});class be extends P{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===c.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}be.create=(e,t)=>new be({innerType:e,typeName:Te.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...T(t)});class ve extends P{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _(s)?s.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new h(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new h(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ve.create=(e,t)=>new ve({innerType:e,typeName:Te.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...T(t)});class Ee extends P{_parse(e){if(this._getType(e)!==c.nan){const t=this._getOrReturnCtx(e);return m(t,{code:u.invalid_type,expected:c.nan,received:t.parsedType}),w}return{status:"valid",value:e.data}}}Ee.create=e=>new Ee({typeName:Te.ZodNaN,...T(e)});const Ae=Symbol("zod_brand");class Ce extends P{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class _e extends P{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?w:"dirty"===e.status?(t.dirty(),b(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?w:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new _e({in:e,out:t,typeName:Te.ZodPipeline})}}class Ne extends P{_parse(e){const t=this._def.innerType._parse(e);return C(t)&&(t.value=Object.freeze(t.value)),t}}Ne.create=(e,t)=>new Ne({innerType:e,typeName:Te.ZodReadonly,...T(t)});const Ie=(e,t={},r)=>e?G.create().superRefine(((s,n)=>{var i,o;if(!e(s)){const e="function"==typeof t?t(s):"string"==typeof t?{message:t}:t,a=null===(o=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===o||o,c="string"==typeof e?{message:e}:e;n.addIssue({code:"custom",...c,fatal:a})}})):G.create(),Se={object:X.lazycreate};var Te;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Te||(Te={}));const Pe=M.create,Oe=F.create,xe=Ee.create,ke=H.create,Re=$.create,Ue=W.create,De=z.create,Be=q.create,Le=V.create,Me=G.create,je=K.create,Fe=J.create,He=Q.create,$e=Z.create,We=X.create,ze=X.strictCreate,qe=ee.create,Ve=re.create,Ge=ne.create,Ke=ie.create,Je=oe.create,Qe=ae.create,Ze=ce.create,Ye=le.create,Xe=ue.create,et=he.create,tt=pe.create,rt=fe.create,st=ge.create,nt=me.create,it=ye.create,ot=we.create,at=me.createWithPreprocess,ct=_e.create,lt={string:e=>M.create({...e,coerce:!0}),number:e=>F.create({...e,coerce:!0}),boolean:e=>$.create({...e,coerce:!0}),bigint:e=>H.create({...e,coerce:!0}),date:e=>W.create({...e,coerce:!0})},ut=w;var ht=Object.freeze({__proto__:null,defaultErrorMap:d,setErrorMap:function(e){p=e},getErrorMap:f,makeIssue:g,EMPTY_PATH:[],addIssueToContext:m,ParseStatus:y,INVALID:w,DIRTY:b,OK:v,isAborted:E,isDirty:A,isValid:C,isAsync:_,get util(){return s},get objectUtil(){return n},ZodParsedType:c,getParsedType:l,ZodType:P,ZodString:M,ZodNumber:F,ZodBigInt:H,ZodBoolean:$,ZodDate:W,ZodSymbol:z,ZodUndefined:q,ZodNull:V,ZodAny:G,ZodUnknown:K,ZodNever:J,ZodVoid:Q,ZodArray:Z,ZodObject:X,ZodUnion:ee,ZodDiscriminatedUnion:re,ZodIntersection:ne,ZodTuple:ie,ZodRecord:oe,ZodMap:ae,ZodSet:ce,ZodFunction:le,ZodLazy:ue,ZodLiteral:he,ZodEnum:pe,ZodNativeEnum:fe,ZodPromise:ge,ZodEffects:me,ZodTransformer:me,ZodOptional:ye,ZodNullable:we,ZodDefault:be,ZodCatch:ve,ZodNaN:Ee,BRAND:Ae,ZodBranded:Ce,ZodPipeline:_e,ZodReadonly:Ne,custom:Ie,Schema:P,ZodSchema:P,late:Se,get ZodFirstPartyTypeKind(){return Te},coerce:lt,any:Me,array:$e,bigint:ke,boolean:Re,date:Ue,discriminatedUnion:Ve,effect:nt,enum:tt,function:Ye,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ie((t=>t instanceof e),t),intersection:Ge,lazy:Xe,literal:et,map:Qe,nan:xe,nativeEnum:rt,never:Fe,null:Le,nullable:ot,number:Oe,object:We,oboolean:()=>Re().optional(),onumber:()=>Oe().optional(),optional:it,ostring:()=>Pe().optional(),pipeline:ct,preprocess:at,promise:st,record:Je,set:Ze,strictObject:ze,string:Pe,symbol:De,transformer:nt,tuple:Ke,undefined:Be,union:qe,unknown:je,void:He,NEVER:ut,ZodIssueCode:u,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:h});const dt=ht.object({message:ht.string()});function pt(e){return ht.literal(o.s1[e])}ht.object({accessList:ht.array(ht.string()),blockHash:ht.string().nullable(),blockNumber:ht.string().nullable(),chainId:ht.string().or(ht.number()),from:ht.string(),gas:ht.string(),hash:ht.string(),input:ht.string().nullable(),maxFeePerGas:ht.string(),maxPriorityFeePerGas:ht.string(),nonce:ht.string(),r:ht.string(),s:ht.string(),to:ht.string(),transactionIndex:ht.string().nullable(),type:ht.string(),v:ht.string(),value:ht.string()});const ft=ht.object({chainId:ht.string().or(ht.number())}),gt=ht.object({email:ht.string().email()}),mt=ht.object({otp:ht.string()}),yt=ht.object({uri:ht.string(),preferredAccountType:ht.optional(ht.string()),chainId:ht.optional(ht.string().or(ht.number()))}),wt=ht.object({chainId:ht.optional(ht.string().or(ht.number())),preferredAccountType:ht.optional(ht.string()),socialUri:ht.optional(ht.string())}),bt=ht.object({provider:ht.enum(["google","github","apple","facebook","x","discord"])}),vt=ht.object({email:ht.string().email()}),Et=ht.object({otp:ht.string()}),At=ht.object({otp:ht.string()}),Ct=ht.object({themeMode:ht.optional(ht.enum(["light","dark"])),themeVariables:ht.optional(ht.record(ht.string(),ht.string().or(ht.number()))),w3mThemeVariables:ht.optional(ht.record(ht.string(),ht.string()))}),_t=ht.object({metadata:ht.object({name:ht.string(),description:ht.string(),url:ht.string(),icons:ht.array(ht.string())}).optional(),sdkVersion:ht.string().optional(),sdkType:ht.string().optional(),projectId:ht.string()}),Nt=ht.object({type:ht.string()}),It=ht.object({action:ht.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),St=ht.object({url:ht.string()}),Tt=ht.object({userName:ht.string()}),Pt=ht.object({email:ht.string().optional().nullable(),address:ht.string(),chainId:ht.string().or(ht.number()),accounts:ht.array(ht.object({address:ht.string(),type:ht.enum([o.Vl.ACCOUNT_TYPES.EOA,o.Vl.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:ht.string().optional().nullable(),preferredAccountType:ht.optional(ht.string())}),Ot=ht.object({action:ht.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),xt=ht.object({email:ht.string().email().optional().nullable(),address:ht.string(),chainId:ht.string().or(ht.number()),smartAccountDeployed:ht.optional(ht.boolean()),accounts:ht.array(ht.object({address:ht.string(),type:ht.enum([o.Vl.ACCOUNT_TYPES.EOA,o.Vl.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:ht.optional(ht.string())}),kt=ht.object({uri:ht.string()}),Rt=ht.object({isConnected:ht.boolean()}),Ut=ht.object({chainId:ht.string().or(ht.number())}),Dt=ht.object({chainId:ht.string().or(ht.number())}),Bt=ht.object({newEmail:ht.string().email()}),Lt=ht.object({smartAccountEnabledNetworks:ht.array(ht.number())}),Mt=(ht.object({address:ht.string(),isDeployed:ht.boolean()}),ht.object({version:ht.string().optional()})),jt=ht.object({type:ht.string(),address:ht.string()}),Ft=ht.any(),Ht=ht.object({method:ht.literal("eth_accounts")}),$t=ht.object({method:ht.literal("eth_blockNumber")}),Wt=ht.object({method:ht.literal("eth_call"),params:ht.array(ht.any())}),zt=ht.object({method:ht.literal("eth_chainId")}),qt=ht.object({method:ht.literal("eth_estimateGas"),params:ht.array(ht.any())}),Vt=ht.object({method:ht.literal("eth_feeHistory"),params:ht.array(ht.any())}),Gt=ht.object({method:ht.literal("eth_gasPrice")}),Kt=ht.object({method:ht.literal("eth_getAccount"),params:ht.array(ht.any())}),Jt=ht.object({method:ht.literal("eth_getBalance"),params:ht.array(ht.any())}),Qt=ht.object({method:ht.literal("eth_getBlockByHash"),params:ht.array(ht.any())}),Zt=ht.object({method:ht.literal("eth_getBlockByNumber"),params:ht.array(ht.any())}),Yt=ht.object({method:ht.literal("eth_getBlockReceipts"),params:ht.array(ht.any())}),Xt=ht.object({method:ht.literal("eth_getBlockTransactionCountByHash"),params:ht.array(ht.any())}),er=ht.object({method:ht.literal("eth_getBlockTransactionCountByNumber"),params:ht.array(ht.any())}),tr=ht.object({method:ht.literal("eth_getCode"),params:ht.array(ht.any())}),rr=ht.object({method:ht.literal("eth_getFilterChanges"),params:ht.array(ht.any())}),sr=ht.object({method:ht.literal("eth_getFilterLogs"),params:ht.array(ht.any())}),nr=ht.object({method:ht.literal("eth_getLogs"),params:ht.array(ht.any())}),ir=ht.object({method:ht.literal("eth_getProof"),params:ht.array(ht.any())}),or=ht.object({method:ht.literal("eth_getStorageAt"),params:ht.array(ht.any())}),ar=ht.object({method:ht.literal("eth_getTransactionByBlockHashAndIndex"),params:ht.array(ht.any())}),cr=ht.object({method:ht.literal("eth_getTransactionByBlockNumberAndIndex"),params:ht.array(ht.any())}),lr=ht.object({method:ht.literal("eth_getTransactionByHash"),params:ht.array(ht.any())}),ur=ht.object({method:ht.literal("eth_getTransactionCount"),params:ht.array(ht.any())}),hr=ht.object({method:ht.literal("eth_getTransactionReceipt"),params:ht.array(ht.any())}),dr=ht.object({method:ht.literal("eth_getUncleCountByBlockHash"),params:ht.array(ht.any())}),pr=ht.object({method:ht.literal("eth_getUncleCountByBlockNumber"),params:ht.array(ht.any())}),fr=ht.object({method:ht.literal("eth_maxPriorityFeePerGas")}),gr=ht.object({method:ht.literal("eth_newBlockFilter")}),mr=ht.object({method:ht.literal("eth_newFilter"),params:ht.array(ht.any())}),yr=ht.object({method:ht.literal("eth_newPendingTransactionFilter")}),wr=ht.object({method:ht.literal("eth_sendRawTransaction"),params:ht.array(ht.any())}),br=ht.object({method:ht.literal("eth_syncing"),params:ht.array(ht.any())}),vr=ht.object({method:ht.literal("eth_uninstallFilter"),params:ht.array(ht.any())}),Er=ht.object({method:ht.literal("personal_sign"),params:ht.array(ht.any())}),Ar=ht.object({method:ht.literal("eth_signTypedData_v4"),params:ht.array(ht.any())}),Cr=ht.object({method:ht.literal("eth_sendTransaction"),params:ht.array(ht.any())}),_r=ht.object({method:ht.literal("solana_signMessage"),params:ht.object({message:ht.string(),pubkey:ht.string()})}),Nr=ht.object({method:ht.literal("solana_signTransaction"),params:ht.object({transaction:ht.string()})}),Ir=ht.object({method:ht.literal("solana_signAllTransactions"),params:ht.object({transactions:ht.array(ht.string())})}),Sr=ht.object({method:ht.literal("solana_signAndSendTransaction"),params:ht.object({transaction:ht.string(),options:ht.object({skipPreflight:ht.boolean().optional(),preflightCommitment:ht.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:ht.number().optional(),minContextSlot:ht.number().optional()}).optional()})}),Tr=ht.object({method:ht.literal("wallet_sendCalls"),params:ht.array(ht.object({chainId:ht.string().or(ht.number()).optional(),from:ht.string().optional(),version:ht.string().optional(),capabilities:ht.any().optional(),calls:ht.array(ht.object({to:ht.string().startsWith("0x"),data:ht.string().startsWith("0x").optional(),value:ht.string().optional()}))}))}),Pr=ht.object({method:ht.literal("wallet_getCallsStatus"),params:ht.array(ht.string())}),Or=ht.object({method:ht.literal("wallet_getCapabilities")}),xr=ht.object({method:ht.literal("wallet_grantPermissions"),params:ht.array(ht.any())}),kr=ht.object({method:ht.literal("wallet_revokePermissions"),params:ht.any()}),Rr=ht.object({method:ht.literal("wallet_getAssets"),params:ht.any()}),Ur=ht.object({token:ht.string()}),Dr=ht.object({id:ht.string().optional()}),Br={appEvent:Dr.extend({type:pt("APP_SWITCH_NETWORK"),payload:ft}).or(Dr.extend({type:pt("APP_CONNECT_EMAIL"),payload:gt})).or(Dr.extend({type:pt("APP_CONNECT_DEVICE")})).or(Dr.extend({type:pt("APP_CONNECT_OTP"),payload:mt})).or(Dr.extend({type:pt("APP_CONNECT_SOCIAL"),payload:yt})).or(Dr.extend({type:pt("APP_GET_FARCASTER_URI")})).or(Dr.extend({type:pt("APP_CONNECT_FARCASTER")})).or(Dr.extend({type:pt("APP_GET_USER"),payload:ht.optional(wt)})).or(Dr.extend({type:pt("APP_GET_SOCIAL_REDIRECT_URI"),payload:bt})).or(Dr.extend({type:pt("APP_SIGN_OUT")})).or(Dr.extend({type:pt("APP_IS_CONNECTED"),payload:ht.optional(Ur)})).or(Dr.extend({type:pt("APP_GET_CHAIN_ID")})).or(Dr.extend({type:pt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Dr.extend({type:pt("APP_INIT_SMART_ACCOUNT")})).or(Dr.extend({type:pt("APP_SET_PREFERRED_ACCOUNT"),payload:Nt})).or(Dr.extend({type:pt("APP_RPC_REQUEST"),payload:Er.or(Rr).or(Ht).or($t).or(Wt).or(zt).or(qt).or(Vt).or(Gt).or(Kt).or(Jt).or(Qt).or(Zt).or(Yt).or(Xt).or(er).or(tr).or(rr).or(sr).or(nr).or(ir).or(or).or(ar).or(cr).or(lr).or(ur).or(hr).or(dr).or(pr).or(fr).or(gr).or(mr).or(yr).or(wr).or(br).or(vr).or(Er).or(Ar).or(Cr).or(_r).or(Nr).or(Ir).or(Sr).or(Pr).or(Tr).or(Or).or(xr).or(kr)})).or(Dr.extend({type:pt("APP_UPDATE_EMAIL"),payload:vt})).or(Dr.extend({type:pt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Et})).or(Dr.extend({type:pt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:At})).or(Dr.extend({type:pt("APP_SYNC_THEME"),payload:Ct})).or(Dr.extend({type:pt("APP_SYNC_DAPP_DATA"),payload:_t})).or(Dr.extend({type:pt("APP_RELOAD")})),frameEvent:Dr.extend({type:pt("FRAME_SWITCH_NETWORK_ERROR"),payload:dt}).or(Dr.extend({type:pt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Dt})).or(Dr.extend({type:pt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:It})).or(Dr.extend({type:pt("FRAME_CONNECT_EMAIL_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:St})).or(Dr.extend({type:pt("FRAME_GET_FARCASTER_URI_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Tt})).or(Dr.extend({type:pt("FRAME_CONNECT_FARCASTER_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_CONNECT_OTP_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_CONNECT_OTP_SUCCESS")})).or(Dr.extend({type:pt("FRAME_CONNECT_DEVICE_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Dr.extend({type:pt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Pt})).or(Dr.extend({type:pt("FRAME_CONNECT_SOCIAL_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_GET_USER_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_GET_USER_SUCCESS"),payload:xt})).or(Dr.extend({type:pt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:kt})).or(Dr.extend({type:pt("FRAME_SIGN_OUT_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_SIGN_OUT_SUCCESS")})).or(Dr.extend({type:pt("FRAME_IS_CONNECTED_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_IS_CONNECTED_SUCCESS"),payload:Rt})).or(Dr.extend({type:pt("FRAME_GET_CHAIN_ID_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Ut})).or(Dr.extend({type:pt("FRAME_RPC_REQUEST_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_RPC_REQUEST_SUCCESS"),payload:Ft})).or(Dr.extend({type:pt("FRAME_SESSION_UPDATE"),payload:Ur})).or(Dr.extend({type:pt("FRAME_UPDATE_EMAIL_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Ot})).or(Dr.extend({type:pt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Dr.extend({type:pt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Bt})).or(Dr.extend({type:pt("FRAME_SYNC_THEME_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_SYNC_THEME_SUCCESS")})).or(Dr.extend({type:pt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Dr.extend({type:pt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Lt})).or(Dr.extend({type:pt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:jt})).or(Dr.extend({type:pt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_READY"),payload:Mt})).or(Dr.extend({type:pt("FRAME_RELOAD_ERROR"),payload:dt})).or(Dr.extend({type:pt("FRAME_RELOAD_SUCCESS")}))};function Lr(e,t={}){return"string"==typeof t?.type&&t?.type?.includes(e)}class Mr{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=i.o.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const e=document.getElementById("w3m-iframe");this.iframe&&!e&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(e,t,r)=>{function s({data:r}){if(!Lr(o.s1.FRAME_EVENT_KEY,r))return;const n=Br.frameEvent.parse(r);n.id===e&&(t(n),window.removeEventListener("message",s))}a.Q.isClient&&(window.addEventListener("message",s),r.addEventListener("abort",(()=>{window.removeEventListener("message",s)})))},onFrameEvent:e=>{a.Q.isClient&&window.addEventListener("message",(({data:t})=>{if(!Lr(o.s1.FRAME_EVENT_KEY,t))return;const r=Br.frameEvent.parse(t);e(r)}))},onAppEvent:e=>{a.Q.isClient&&window.addEventListener("message",(({data:t})=>{if(!Lr(o.s1.APP_EVENT_KEY,t))return;const r=Br.appEvent.parse(t);e(r)}))},postAppEvent:e=>{if(a.Q.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");Br.appEvent.parse(e),this.iframe.contentWindow.postMessage(e,"*")}},postFrameEvent:e=>{if(a.Q.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Br.frameEvent.parse(e),parent.postMessage(e,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),t&&(this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),a.Q.isClient)){const t=document.createElement("iframe");t.id="w3m-iframe",t.src=`${o.hy}?projectId=${e}&chainId=${r}&version=${o.gS}&enableLogger=${s}`,t.name="w3m-secure-iframe",t.style.position="fixed",t.style.zIndex="999999",t.style.display="none",t.style.border="none",t.style.animationDelay="0s, 50ms",t.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",t.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=t,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent((e=>{"@w3m-frame/READY"===e.type&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))}))}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map((e=>({[e]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${e}&projectId=${this.projectId}`,chainId:e}})));return Object.assign({},...e)}}var jr=r(9838);class Fr{constructor(e){const t=(0,jr.iP)({level:o.OH}),{logger:r,chunkLoggerController:s}=(0,jr.D5)({opts:t});this.logger=(0,jr.U5)(r,this.constructor.name),this.chunkLoggerController=s,"undefined"!=typeof window&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}var Hr=r(6508);class $r{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:s,abortController:n}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Fr(e)),this.abortController=n,this.w3mFrame=new Mr({projectId:e,isAppClient:!0,chainId:t,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise((e=>{this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_READY&&setTimeout((()=>{e()}),500)}))})),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){this.isInitialized||(this.initPromise?await this.initPromise:await this.createFrame())}getLoginEmailUsed(){return Boolean(Hr.o.get(o.s1.EMAIL_LOGIN_USED_KEY))}getEmail(){return Hr.o.get(o.s1.EMAIL)}getUsername(){return Hr.o.get(o.s1.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:o.s1.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{a.Q.checkIfAllowedToTriggerEmail(),await this.init();const t=await this.appEvent({type:o.s1.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting email"),e}}async connectDevice(){try{return this.appEvent({type:o.s1.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:o.s1.APP_CONNECT_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting otp"),e}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:o.s1.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:o.s1.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:o.s1.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting social redirect uri"),e}}async updateEmail(e){try{const t=await this.appEvent({type:o.s1.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email"),e}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:o.s1.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email primary otp"),e}}async updateEmailSecondaryOtp(e){try{const t=await this.appEvent({type:o.s1.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(t.newEmail),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email secondary otp"),e}}async syncTheme(e){try{return this.appEvent({type:o.s1.APP_SYNC_THEME,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing theme"),e}}async syncDappData(e){try{return this.appEvent({type:o.s1.APP_SYNC_DAPP_DATA,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing dapp data"),e}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:o.s1.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:o.s1.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error setting preferred account"),e}}async connect(e){if(e?.socialUri)try{await this.init();const t=await this.appEvent({type:o.s1.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return t.userName&&this.setSocialLoginSuccess(t.userName),this.setLoginSuccess(t.email),this.setLastUsedChainId(t.chainId),this.user=t,t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting social"),e}else try{const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:t,preferredAccountType:e?.preferredAccountType});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async getUser(e){try{await this.init();const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:o.s1.APP_GET_USER,payload:{...e,chainId:t}});return this.user=r,r}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async connectSocial(e){try{await this.init();const t=await this.appEvent({type:o.s1.APP_CONNECT_SOCIAL,payload:{uri:e}});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting social"),e}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:o.s1.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:o.s1.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork(e){try{const t=await this.appEvent({type:o.s1.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(t.chainId),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error switching network"),e}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise((async e=>{const t=setTimeout((()=>{e()}),3e3);await this.appEvent({type:o.s1.APP_SIGN_OUT}),clearTimeout(t),e()}))}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){try{if(o.Vl.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();this.rpcRequestHandler?.(e);const t=await this.appEvent({type:o.s1.APP_RPC_REQUEST,payload:e});return this.rpcSuccessHandler?.(t,e),t}catch(t){throw this.rpcErrorHandler?.(t,e),this.w3mLogger?.logger.error({error:t},"Error requesting"),t}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()}))}onNotConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_IS_CONNECTED_ERROR&&e(),t.type!==o.s1.FRAME_IS_CONNECTED_SUCCESS||t.payload.isConnected||e()}))}onConnect(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_GET_USER_SUCCESS&&e(t.payload)}))}onSocialConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)}))}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===o.s1.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:o.Vl.ACCOUNT_TYPES.EOA})}))}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(t.payload.smartAccountEnabledNetworks):t.type===o.s1.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])}))}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){try{this.openRpcRequests.forEach((({abortController:e,method:t})=>{o.Vl.SAFE_RPC_METHODS.includes(t)||e.abort()})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let t,r;function s(e){return e.replace("@w3m-app/","")}const n=[o.s1.APP_SYNC_DAPP_DATA,o.s1.APP_SYNC_THEME,o.s1.APP_SET_PREFERRED_ACCOUNT],i=s(e.type);return this.w3mFrame.iframeIsReady||n.includes(e.type)||(r=setTimeout((()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()}),2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[o.s1.APP_CONNECT_EMAIL,o.s1.APP_CONNECT_DEVICE,o.s1.APP_CONNECT_OTP,o.s1.APP_CONNECT_SOCIAL,o.s1.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(i)&&(t=setTimeout((()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()}),3e4)),new Promise(((s,n)=>{const o=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:o},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:o});const a=new AbortController;if("RPC_REQUEST"===i){const t=e;this.openRpcRequests=[...this.openRpcRequests,{...t.payload,abortController:a}]}a.signal.addEventListener("abort",(()=>{"RPC_REQUEST"===i?n(new Error("Request was aborted")):"GET_FARCASTER_URI"!==i&&n(new Error("Something went wrong"))})),this.w3mFrame.events.registerFrameEventHandler(o,(e=>{return a=e,c=this.w3mLogger,void(a.id===o&&(c?.logger.info?.({framEvent:a,id:o},"Received frame response"),a.type===`@w3m-frame/${i}_SUCCESS`?(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in a&&s(a.payload),s(void 0)):a.type===`@w3m-frame/${i}_ERROR`&&(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in a&&n(new Error(a.payload?.message||"An error occurred")),n(new Error("An error occurred")))));var a,c}),this.abortController.signal)}))}setNewLastEmailLoginTime(){Hr.o.set(o.s1.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Hr.o.set(o.s1.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Hr.o.set(o.s1.EMAIL,e),Hr.o.set(o.s1.EMAIL_LOGIN_USED_KEY,"true"),Hr.o.delete(o.s1.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Hr.o.delete(o.s1.EMAIL_LOGIN_USED_KEY),Hr.o.delete(o.s1.EMAIL),Hr.o.delete(o.s1.LAST_USED_CHAIN_KEY),Hr.o.delete(o.s1.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Hr.o.set(o.s1.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Hr.o.get(o.s1.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){Hr.o.set(o.s1.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}},9838:(e,t,r)=>{"use strict";r.d(t,{D5:()=>I,U5:()=>N,h6:()=>n.a,iP:()=>C,oI:()=>_});var s=r(4874),n=r.n(s),i=r(3554);const o={level:"info"},a="custom_context",c=1024e3;class l{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class u{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new l(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class h{constructor(e,t=c){this.level=e??"error",this.levelValue=s.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new u(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===s.levels.values.error?console.error(e):t===s.levels.values.warn?console.warn(e):t===s.levels.values.debug?console.debug(e):t===s.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append((0,i.h)({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new u(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push((0,i.h)({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class d{constructor(e,t=c){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class p{constructor(e,t=c){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var f=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))b.call(t,r)&&v(e,r,t[r]);return e},A=(e,t)=>g(e,m(t));function C(e){return A(E({},e),{level:e?.level||o.level})}function _(e,t=a){let r="";return r=typeof e.bindings>"u"?function(e,t=a){return e[t]||""}(e,t):e.bindings().context||"",r}function N(e,t,r=a){const s=function(e,t,r=a){const s=_(e,r);return s.trim()?`${s}/${t}`:t}(e,t,r);return function(e,t,r=a){return e[r]=t,e}(e.child({context:s}),s,r)}function I(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function(e){var t,r;const s=new d(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:n()(A(E({},e.opts),{level:"trace",browser:A(E({},null==(r=e.opts)?void 0:r.browser),{write:e=>s.write(e)})})),chunkLoggerController:s}}(e):function(e){var t;const r=new p(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:n()(A(E({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}},9883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return r[e].call(i.exports,i,i.exports,n),i.exports}n.m=r,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="vanillajs-ethers:",n.l=(r,s,i,o)=>{if(e[r])e[r].push(s);else{var a,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+i){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[s];var d=(t,s)=>{a.onerror=a.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(s))),t)return t(s)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={8792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise(((r,n)=>s=e[t]=[r,n]));r.push(s[2]=i);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,s[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,i,[o,a,c]=r,l=0;if(o.some((t=>0!==e[t]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);c&&c(n)}for(t&&t(r);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkvanillajs_ethers=self.webpackChunkvanillajs_ethers||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};function t(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}n.r(e),n.d(e,{OG:()=>dc,My:()=>sc,Ph:()=>oc,lX:()=>ac,Id:()=>hc,fg:()=>gc,qj:()=>uc,aT:()=>ic,lq:()=>cc,z:()=>lc,Q5:()=>yc});const r=t({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),s=t({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),i=t({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function o(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}const a=o({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),c=o({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});o({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),o({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),o({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var l=n(6742),u=n(4376),h=n(3096),d=n(9088),p=n(9177),f=n(184),g=n(8467),m=n(8249),y=n(2944),w=n(3450),b=n(7388),v=n(2733),E=n(8996),A=n(7508),C=n(1655),_=n(5306),N=n(9510),I=n(1785),S=n(8990),T=n(6409),P=n(152),O=n(9835);class x{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:n}){return x.instance||(x.instance=new O.Y({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:n})),x.instance}}var k=n(4013),R=n(5910),U=n(3495),D=n(5595),B=n(4549),L=n(7601),M=n(5884),j=n(6396),F=n(1871),H=n(8508),$=(n(6092),n(1482),n(5042)),W=n(148);const z=(e,t,r)=>JSON.stringify(e,((e,r)=>{const s="bigint"==typeof r?r.toString():r;return"function"==typeof t?t(e,s):s}),r),q="2.30.1";let V=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,G=`viem@${q}`;class K extends Error{constructor(e,t={}){const r=t.cause instanceof K?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof K&&t.cause.docsPath||t.docsPath,n=V?.({...t,docsPath:s});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...G?[`Version: ${G}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=q}walk(e){return J(this,e)}}function J(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?J(e.cause,t):t?null:e}class Q extends K{constructor({body:e,cause:t,details:r,headers:s,status:n,url:i}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[n&&`Status: ${n}`,`URL: ${i}`,e&&`Request body: ${z(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=n,this.url=i}}class Z extends K{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${r}`,`Request body: ${z(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class Y extends K{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${t}`,`Request body: ${z(e)}`],name:"TimeoutError"})}}class X extends K{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}const ee=new Map;function te(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const re=te();class se extends K{constructor(e,{code:t,docsPath:r,metaMessages:s,name:n,shortMessage:i}){super(i,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:n||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=n||e.name,this.code=e instanceof Z?e.code:t??-1}}class ne extends se{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class ie extends se{constructor(e){super(e,{code:ie.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(ie,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class oe extends se{constructor(e){super(e,{code:oe.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(oe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class ae extends se{constructor(e,{method:t}={}){super(e,{code:ae.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(ae,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class ce extends se{constructor(e){super(e,{code:ce.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(ce,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class le extends se{constructor(e){super(e,{code:le.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(le,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ue extends se{constructor(e){super(e,{code:ue.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(ue,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class he extends se{constructor(e){super(e,{code:he.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(he,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class de extends se{constructor(e){super(e,{code:de.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(de,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class pe extends se{constructor(e){super(e,{code:pe.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(pe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fe extends se{constructor(e,{method:t}={}){super(e,{code:fe.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(fe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ge extends se{constructor(e){super(e,{code:ge.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ge,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class me extends se{constructor(e){super(e,{code:me.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(me,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ye extends ne{constructor(e){super(e,{code:ye.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(ye,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class we extends ne{constructor(e){super(e,{code:we.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(we,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class be extends ne{constructor(e,{method:t}={}){super(e,{code:be.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(be,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ve extends ne{constructor(e){super(e,{code:ve.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ve,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Ee extends ne{constructor(e){super(e,{code:Ee.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Ee,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ae extends ne{constructor(e){super(e,{code:Ae.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ae,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Ce extends ne{constructor(e){super(e,{code:Ce.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Ce,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class _e extends ne{constructor(e){super(e,{code:_e.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(_e,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Ne extends ne{constructor(e){super(e,{code:Ne.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Ne,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Ie extends ne{constructor(e){super(e,{code:Ie.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Ie,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Se extends ne{constructor(e){super(e,{code:Se.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Se,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Te extends ne{constructor(e){super(e,{code:Te.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Te,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Pe extends ne{constructor(e){super(e,{code:Pe.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Pe,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Oe extends se{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class xe extends K{constructor({max:e,min:t,signed:r,size:s,value:n}){super(`Number "${n}" is not in safe ${s?`${8*s}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class ke extends K{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}class Re extends K{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ue(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const s=e.replace("0x","");if(s.length>2*r)throw new Re({size:Math.ceil(s.length/2),targetSize:r,type:"hex"});return`0x${s["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new Re({size:e.length,targetSize:r,type:"bytes"});const s=new Uint8Array(r);for(let n=0;n<r;n++){const i="right"===t;s[i?n:r-n-1]=e[i?n:e.length-n-1]}return s}(e,{dir:t,size:r})}function De(e){return function(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function Be(e,{size:t}){if(De(e)>t)throw new ke({givenSize:De(e),maxSize:t})}const Le=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Me(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t={}){const{signed:r,size:s}=t,n=BigInt(e);let i;s?i=r?(1n<<8n*BigInt(s)-1n)-1n:2n**(8n*BigInt(s))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof i&&r?-i-1n:0;if(i&&n>i||n<o){const t="bigint"==typeof e?"n":"";throw new xe({max:i?`${i}${t}`:void 0,min:`${o}${t}`,signed:r,size:s,value:`${e}${t}`})}const a=`0x${(r&&n<0?(1n<<BigInt(8*s))+BigInt(n):n).toString(16)}`;return s?Ue(a,{size:s}):a}(e,t):"string"==typeof e?He(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;return"number"==typeof t.size?(Be(r,{size:t.size}),Ue(r,{size:t.size})):r}(e,t):je(e,t)}function je(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=Le[e[t]];const s=`0x${r}`;return"number"==typeof t.size?(Be(s,{size:t.size}),Ue(s,{dir:"right",size:t.size})):s}const Fe=new TextEncoder;function He(e,t={}){return je(Fe.encode(e),t)}class $e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const We=new $e(8192);async function ze(e){return new Promise((t=>setTimeout(t,e)))}function qe(e,t={}){return async(r,s={})=>{const{dedupe:n=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...t,...s},{method:l}=r;if(i?.exclude?.includes(l))throw new fe(new Error("method not supported"),{method:l});if(i?.include&&!i.include.includes(l))throw new fe(new Error("method not supported"),{method:l});return function(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(We.get(r))return We.get(r);const s=e().finally((()=>We.delete(r)));return We.set(r,s),s}((()=>function(e,{delay:t=100,retryCount:r=2,shouldRetry:s=()=>!0}={}){return new Promise(((n,i)=>{const o=async({count:a=0}={})=>{try{const t=await e();n(t)}catch(e){if(a<r&&await s({count:a,error:e}))return(async({error:e})=>{const r="function"==typeof t?t({count:a,error:e}):t;r&&await ze(r),o({count:a+1})})({error:e});i(e)}};o()}))}((async()=>{try{return await e(r)}catch(e){const t=e;switch(t.code){case ie.code:throw new ie(t);case oe.code:throw new oe(t);case ae.code:throw new ae(t,{method:r.method});case ce.code:throw new ce(t);case le.code:throw new le(t);case ue.code:throw new ue(t);case he.code:throw new he(t);case de.code:throw new de(t);case pe.code:throw new pe(t);case fe.code:throw new fe(t,{method:r.method});case ge.code:throw new ge(t);case me.code:throw new me(t);case ye.code:throw new ye(t);case we.code:throw new we(t);case be.code:throw new be(t);case ve.code:throw new ve(t);case Ee.code:throw new Ee(t);case Ae.code:throw new Ae(t);case Ce.code:throw new Ce(t);case _e.code:throw new _e(t);case Ne.code:throw new Ne(t);case Ie.code:throw new Ie(t);case Se.code:throw new Se(t);case Te.code:throw new Te(t);case Pe.code:throw new Pe(t);case 5e3:throw new ye(t);default:if(e instanceof K)throw e;throw new Oe(t)}}}),{delay:({count:e,error:t})=>{if(t&&t instanceof Q){const e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e)}return(1<<e)*o},retryCount:a,shouldRetry:({error:e})=>function(e){return"code"in e&&"number"==typeof e.code?-1===e.code||e.code===ge.code||e.code===le.code:!(e instanceof Q&&e.status)||(403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status)}(e)})),{enabled:n,id:n?He(`${c}.${z(r)}`):void 0})}}let Ve,Ge=256;function Ke({key:e,methods:t,name:r,request:s,retryCount:n=3,retryDelay:i=150,timeout:o,type:a},c){return{config:{key:e,methods:t,name:r,request:s,retryCount:n,retryDelay:i,timeout:o,type:a},request:qe(s,{methods:t,retryCount:n,retryDelay:i,uid:function(e=11){if(!Ve||Ge+e>512){Ve="",Ge=0;for(let e=0;e<256;e++)Ve+=(256+256*Math.random()|0).toString(16).substring(1)}return Ve.substring(Ge,Ge+++e)}()}),value:c}}function Je(e,t={}){const{batch:r,fetchOptions:s,key:n="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=t;return({chain:h,retryCount:d,timeout:p})=>{const{batchSize:f=1e3,wait:g=0}="object"==typeof r?r:{},m=t.retryCount??d,y=p??t.timeout??1e4,w=e||h?.rpcUrls.default.http[0];if(!w)throw new X;const b=function(e,t={}){return{async request(r){const{body:s,onRequest:n=t.onRequest,onResponse:i=t.onResponse,timeout:o=t.timeout??1e4}=r,a={...t.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const t=await function(e,{errorInstance:t=new Error("timed out"),timeout:r,signal:s}){return new Promise(((n,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout((()=>{s?a.abort():i(t)}),r)),n(await e({signal:a?.signal||null}))}catch(e){"AbortError"===e?.name&&i(t),i(e)}finally{clearTimeout(o)}})()}))}((async({signal:t})=>{const r={...a,body:Array.isArray(s)?z(s.map((e=>({jsonrpc:"2.0",id:e.id??re.take(),...e})))):z({jsonrpc:"2.0",id:s.id??re.take(),...s}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?t:null)},i=new Request(e,r),h=await(n?.(i,r))??{...r,url:e};return await fetch(h.url??e,h)}),{errorInstance:new Y({body:s,url:e}),timeout:o,signal:!0});let r;if(i&&await i(t),t.headers.get("Content-Type")?.startsWith("application/json"))r=await t.json();else{r=await t.text();try{r=JSON.parse(r||"{}")}catch(e){if(t.ok)throw e;r={error:r}}}if(!t.ok)throw new Q({body:s,details:z(r.error)||t.statusText,headers:t.headers,status:t.status,url:e});return r}catch(t){if(t instanceof Q)throw t;if(t instanceof Y)throw t;throw new Q({body:s,cause:t,url:e})}}}}(w,{fetchOptions:s,onRequest:a,onResponse:c,timeout:y});return Ke({key:n,methods:i,name:o,async request({method:e,params:t}){const s={method:e,params:t},{schedule:n}=function({fn:e,id:t,shouldSplitBatch:r,wait:s=0,sort:n}){const i=async()=>{const t=a();o();const r=t.map((({args:e})=>e));0!==r.length&&e(r).then((e=>{n&&Array.isArray(e)&&e.sort(n);for(let r=0;r<t.length;r++){const{resolve:s}=t[r];s?.([e[r],e])}})).catch((e=>{for(let r=0;r<t.length;r++){const{reject:s}=t[r];s?.(e)}}))},o=()=>ee.delete(t),a=()=>ee.get(t)||[],c=e=>ee.set(t,[...a(),e]);return{flush:o,async schedule(e){const{promise:t,resolve:n,reject:o}=function(){let e=()=>{},t=()=>{};return{promise:new Promise(((r,s)=>{e=r,t=s})),resolve:e,reject:t}}(),l=r?.([...a().map((({args:e})=>e)),e]);return l&&i(),a().length>0?(c({args:e,resolve:n,reject:o}),t):(c({args:e,resolve:n,reject:o}),setTimeout(i,s),t)}}}({id:w,wait:g,shouldSplitBatch:e=>e.length>f,fn:e=>b.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:i,result:o}]=await(async e=>r?n(e):[await b.request({body:e})])(s);if(u)return{error:i,result:o};if(i)throw new Z({body:s,error:i,url:w});return o},retryCount:m,retryDelay:l,timeout:y,type:"http"},{fetchOptions:s,url:w})}}const Qe={ether:-9,wei:9};var Ze=n(7135);function Ye(e,t="wei"){return(0,Ze.J)(e,Qe[t])}class Xe extends K{constructor({cause:e,message:t}={}){const r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}function et(e,t={}){const{key:r="fallback",name:s="Fallback",rank:n=!1,shouldThrow:i=tt,retryCount:o,retryDelay:a}=t;return({chain:t,pollingInterval:c=4e3,timeout:l,...u})=>{let h=e,d=()=>{};const p=Ke({key:r,name:s,async request({method:e,params:r}){let s;const n=async(o=0)=>{const a=h[o]({...u,chain:t,retryCount:0,timeout:l});try{const t=await a.request({method:e,params:r});return d({method:e,params:r,response:t,transport:a,status:"success"}),t}catch(c){if(d({error:c,method:e,params:r,transport:a,status:"error"}),i(c))throw c;if(o===h.length-1)throw c;if(s??=h.slice(o+1).some((r=>{const{include:s,exclude:n}=r({chain:t}).config.methods||{};return s?s.includes(e):!n||!n.includes(e)})),!s)throw c;return n(o+1)}};return n()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:e=>d=e,transports:h.map((e=>e({chain:t,retryCount:0})))});if(n){const e="object"==typeof n?n:{};!function({chain:e,interval:t=4e3,onTransports:r,ping:s,sampleCount:n=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const a=await Promise.all(o.map((async t=>{const r=t({chain:e,retryCount:0,timeout:i}),n=Date.now();let o,a;try{await(s?s({transport:r}):r.request({method:"net_listening"})),a=1}catch{a=0}finally{o=Date.now()}return{latency:o-n,success:a}})));u.push(a),u.length>n&&u.shift();const d=Math.max(...u.map((e=>Math.max(...e.map((({latency:e})=>e)))))),p=o.map(((e,t)=>{const r=u.map((e=>e[t].latency)),s=1-r.reduce(((e,t)=>e+t),0)/r.length/d,n=u.map((e=>e[t].success)),i=n.reduce(((e,t)=>e+t),0)/n.length;return 0===i?[0,t]:[l*s+c*i,t]})).sort(((e,t)=>t[0]-e[0]));r(p.map((([,e])=>o[e]))),await ze(t),h()};h()}({chain:t,interval:e.interval??c,onTransports:e=>h=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:h,weights:e.weights})}return p}}function tt(e){return!(!("code"in e)||"number"!=typeof e.code||e.code!==pe.code&&e.code!==ye.code&&!Xe.nodeMessage.test(e.message)&&5e3!==e.code)}Object.defineProperty(Xe,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Xe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/}),Object.defineProperty(class extends K{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ye(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/}),Object.defineProperty(class extends K{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ye(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/}),Object.defineProperty(class extends K{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/}),Object.defineProperty(class extends K{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/}),Object.defineProperty(class extends K{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/}),Object.defineProperty(class extends K{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/}),Object.defineProperty(class extends K{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/}),Object.defineProperty(class extends K{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/}),Object.defineProperty(class extends K{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/}),Object.defineProperty(class extends K{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${Ye(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Ye(r)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});const rt={ConnectorExplorerIds:{[u.o.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[u.o.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[u.o.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[u.o.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[u.o.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[N.o.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[N.o.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[N.o.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[N.o.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[N.o.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[N.o.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[N.o.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[N.o.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[N.o.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[N.o.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[N.o.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[u.o.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[u.o.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[u.o.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[u.o.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[u.o.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[u.o.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[u.o.CONNECTOR_ID.INJECTED]:"Browser Wallet",[u.o.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[u.o.CONNECTOR_ID.COINBASE]:"Coinbase",[u.o.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[u.o.CONNECTOR_ID.LEDGER]:"Ledger",[u.o.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[u.o.CONNECTOR_ID.INJECTED]:"INJECTED",[u.o.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[u.o.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[u.o.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]};function st(e,t){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",e),r.searchParams.set("projectId",t),r.toString()}const nt=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],it={extendRpcUrlWithProjectId(e,t){let r=!1;try{r="rpc.walletconnect.org"===new URL(e).host}catch(e){r=!1}if(r){const r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork:e=>"chainNamespace"in e&&"caipNetworkId"in e,getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:u.o.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${u.o.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,r){const s=e.rpcUrls?.default?.http?.[0];return nt.includes(t)?st(t,r):s||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:s}){const n=this.getChainNamespace(e),i=this.getCaipNetworkId(e),o=e.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(e,i,r),c=e?.rpcUrls?.chainDefault?.http?.[0]||o,l=s?.[i]?.map((e=>e.url))||[],u=[...l,a],h=[...l];return c&&!h.includes(c)&&h.push(c),{...e,chainNamespace:n,caipNetworkId:i,assets:{imageId:rt.NetworkImageIds[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks:(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:s})=>e.map((e=>it.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:s,projectId:r}))),getViemTransport(e,t,r){const s=[];return r?.forEach((e=>{s.push(Je(e.url,e.config))})),nt.includes(e.caipNetworkId)&&s.push(Je(st(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),e?.rpcUrls?.default?.http?.forEach((e=>{s.push(Je(e))})),et(s)},extendWagmiTransports(e,t,r){return nt.includes(e.caipNetworkId)?et([r,Je(this.getDefaultRpcUrl(e,e.caipNetworkId,t))]):r},getUnsupportedNetwork:e=>({id:e.split(":")[1],caipNetworkId:e,name:u.o.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(e){const t=A.i.getActiveCaipNetworkId(),r=b.W.getAllRequestedCaipNetworks(),s=Array.from(b.W.state.chains?.keys()||[]),n=t?.split(":")[0],i=!!n&&s.includes(n),o=r?.find((e=>e.caipNetworkId===t));return i&&!o&&t?this.getUnsupportedNetwork(t):o||e||r?.[0]}};var ot=n(9838);const at={createLogger(e,t="error"){const r=(0,ot.iP)({level:t}),{logger:s}=(0,ot.D5)({opts:r});return s.error=(...t)=>{for(const r of t)if(r instanceof Error)return void e(r,...t);e(void 0,...t)},s}};var ct=n(1307),lt=n(1122);const ut=4902,ht=["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"],dt={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},pt={getMethodsByChainNamespace:e=>dt[e]||[],createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};const r={...e},s=new Set;if(t.methods&&Object.keys(t.methods).forEach((e=>s.add(e))),t.chains&&Object.keys(t.chains).forEach((e=>s.add(e))),t.events&&Object.keys(t.events).forEach((e=>s.add(e))),t.rpcMap&&Object.keys(t.rpcMap).forEach((e=>{const[t]=e.split(":");t&&s.add(t)})),s.forEach((e=>{r[e]||(r[e]=this.createDefaultNamespace(e))})),t.methods&&Object.entries(t.methods).forEach((([e,t])=>{r[e]&&(r[e].methods=t)})),t.chains&&Object.entries(t.chains).forEach((([e,t])=>{r[e]&&(r[e].chains=t)})),t.events&&Object.entries(t.events).forEach((([e,t])=>{r[e]&&(r[e].events=t)})),t.rpcMap){const e=new Set;Object.entries(t.rpcMap).forEach((([t,s])=>{const[n,i]=t.split(":");n&&i&&r[n]&&(r[n].rpcMap||(r[n].rpcMap={}),e.has(n)||(r[n].rpcMap={},e.add(n)),r[n].rpcMap[i]=s)}))}return r},createNamespaces(e,t){const r=e.reduce(((e,t)=>{const{id:r,chainNamespace:s,rpcUrls:n}=t,i=n.default.http[0];e[s]||(e[s]=this.createDefaultNamespace(s));const o=`${s}:${r}`,l=e[s];switch(l.chains.push(o),o){case a.caipNetworkId:l.chains.push(a.deprecatedCaipNetworkId);break;case c.caipNetworkId:l.chains.push(c.deprecatedCaipNetworkId)}return l?.rpcMap&&i&&(l.rpcMap[r]=i),e}),{});return this.applyNamespaceOverrides(r,t)},resolveReownName:async e=>{const t=await B.f.resolveName(e),r=Object.values(t?.addresses)||[];return r[0]?.address||!1},getChainsFromNamespaces:(e={})=>Object.values(e).flatMap((e=>{const t=e.chains||[],r=e.accounts.map((e=>{const[t,r]=e.split(":");return`${t}:${r}`}));return Array.from(new Set([...t,...r]))})),isSessionEventData:e=>"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event,isOriginAllowed(e,t,r){for(const s of[...t,...r])if(s.includes("*")){const t=`^${s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(t,"u").test(e))return!0}else if(s===e)return!0;return!1}};class ft{constructor({provider:e,namespace:t}){this.id=u.o.CONNECTOR_ID.WALLET_CONNECT,this.name=rt.ConnectorNamesMap[u.o.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=rt.ConnectorImageIds[u.o.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=b.W.getCaipNetworks.bind(b.W),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const e=this.getCaipNetworks(),t=v.H.state.universalProviderConfigOverride,r=pt.createNamespaces(e,t);await this.provider.connect({optionalNamespaces:r})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map((e=>e.caipNetworkId));return lt.U.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:gt})}}const gt=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class mt{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=e=>b.W.getCaipNetworks(e),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:u.o.CONNECTOR_ID.AUTH,type:"AUTH",name:u.o.CONNECTOR_NAMES.AUTH,provider:e,imageId:rt.ConnectorImageIds[u.o.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter((e=>!t.has(e.id)&&(t.add(e.id),!0))),this.emit("connectors",this.availableConnectors)}setStatus(e,t){w.U.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){const r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach((e=>{e.clear()}))}emit(e,t){const r=this.eventListeners.get(e);r&&r.forEach((e=>e(t)))}async connectWalletConnect(e){const t=this.getWalletConnectConnector();return{clientId:(await t.connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if("WALLET_CONNECT"!==r){if(s&&"AUTH"===r){const e=s,r=w.U.state.preferredAccountTypes?.[t.chainNamespace];await e.switchNetwork(t.caipNetworkId);const n=await e.getUser({chainId:t.caipNetworkId,preferredAccountType:r});this.emit("switchNetwork",n)}}else s.setDefaultChain(t.caipNetworkId)}getWalletConnectConnector(){const e=this.connectors.find((e=>e instanceof ft));if(!e)throw new Error("WalletConnectConnector not found");return e}}class yt extends mt{setUniversalProvider(e){this.addConnector(new ft({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{const e=this.getWalletConnectConnector();await e.disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){const t=this.provider,r=t?.session?.namespaces?.[e]?.accounts?.map((e=>{const[,,t]=e.split(":");return t})).filter(((e,t,r)=>r.indexOf(e)===t))||[];return Promise.resolve({accounts:r.map((t=>l.w.createAccount(e,t,"bip122"===e?"payment":"eoa")))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!e.caipNetwork||!y.oU.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace)||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(w.U.state.balanceLoading&&e.chainId===b.W.state.activeCaipNetwork?.id)return{balance:w.U.state.balance||"0.00",symbol:w.U.state.balanceSymbol||""};const t=(await w.U.fetchTokenBalance()).find((t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol));return{balance:t?.quantity.numeric||"0.00",symbol:t?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:t,message:r,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let n="";return n=b.W.state.activeCaipNetwork?.chainNamespace===u.o.CHAIN.SOLANA?(await t.request({method:"solana_signMessage",params:{message:ct.A.encode((new TextEncoder).encode(r)),pubkey:s}},b.W.state.activeCaipNetwork?.caipNetworkId)).signature:await t.request({method:"personal_sign",params:[r,s]},b.W.state.activeCaipNetwork?.caipNetworkId),{signature:n}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===u.o.CHAIN.EVM)try{await(r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:Me(t.id)}]}))}catch(e){if(e.code===ut||32603===e.code||5e3===e.code||e?.data?.originalError?.code===ut)try{await(r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:Me(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]}))}catch(e){throw new Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find((e=>"WALLET_CONNECT"===e.type)),t=e?.provider;return t}}const wt=["email","socials","swaps","onramp","activity","reownBranding"],bt={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return Boolean(e.isEnabled)&&t.includes("email")},processFallback:e=>void 0===e?y.oU.DEFAULT_REMOTE_FEATURES.email:Boolean(e)},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t.filter((e=>"email"!==e))},processFallback:e=>void 0===e?y.oU.DEFAULT_REMOTE_FEATURES.socials:"boolean"==typeof e?!!e&&y.oU.DEFAULT_REMOTE_FEATURES.socials:e},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:e=>void 0===e?y.oU.DEFAULT_REMOTE_FEATURES.swaps:"boolean"==typeof e?!!e&&y.oU.DEFAULT_REMOTE_FEATURES.swaps:e},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:e=>void 0===e?y.oU.DEFAULT_REMOTE_FEATURES.onramp:"boolean"==typeof e?!!e&&y.oU.DEFAULT_REMOTE_FEATURES.onramp:e},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,processApi:e=>Boolean(e.isEnabled),processFallback:e=>void 0===e?y.oU.DEFAULT_REMOTE_FEATURES.activity:Boolean(e)},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,processApi:e=>Boolean(e.isEnabled),processFallback:e=>void 0===e?y.oU.DEFAULT_REMOTE_FEATURES.reownBranding:Boolean(e)}},vt={localSettingsOverridden:new Set,getApiConfig:(e,t)=>t?.find((t=>t.id===e)),addWarning(e,t){if(void 0!==e){const e=bt[t],r=e.isLegacy?`"features.${e.localFeatureName}" (now "${t}")`:`"features.${t}"`;this.localSettingsOverridden.add(r)}},processFeature(e,t,r,s){const n=bt[e],i=t[n.localFeatureName];if(s){const t=this.getApiConfig(n.apiFeatureName,r);return null===t?.config?this.processFallbackFeature(e,i):!!t?.config&&(void 0!==i&&this.addWarning(i,e),this.processApiFeature(e,t))}return this.processFallbackFeature(e,i)},processApiFeature:(e,t)=>bt[e].processApi(t),processFallbackFeature:(e,t)=>bt[e].processFallback(t),async fetchRemoteFeatures(e){const t=e.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await m.Np.fetchProjectConfig(),s=null!=r}catch(e){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",e)}const n=s?y.oU.DEFAULT_REMOTE_FEATURES:y.oU.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const e of wt){const i=this.processFeature(e,t,r,s);Object.assign(n,{[e]:i})}}catch(e){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",e),y.oU.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const e=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;C.h.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${e}`},"warning")}return n}};class Et{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(e,t)=>{if(e){const r=b.W.getNetworkData(e)?.requestedCaipNetworks?.find((e=>e.id===t));if(r)return r;const s=b.W.getNetworkData(e)?.caipNetwork;if(s)return s;const n=b.W.getRequestedCaipNetworks(e);return n.filter((t=>t.chainNamespace===e))?.[0]}return b.W.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>b.W.getCaipNetworks(e),this.getActiveChainNamespace=()=>b.W.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{b.W.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>b.W.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>b.W.state.activeChain!==e&&e?b.W.getAccountProp("caipAddress",e):b.W.state.activeCaipAddress,this.setClientId=e=>{D.T.setClientId(e)},this.getProvider=e=>S.A.getProvider(e),this.getProviderType=e=>S.A.getProviderId(e),this.getPreferredAccountType=e=>w.U.state.preferredAccountTypes?.[e],this.setCaipAddress=(e,t)=>{w.U.setCaipAddress(e,t),e&&v.H.state.enableEmbedded&&this.close()},this.setBalance=(e,t,r)=>{w.U.setBalance(e,t,r)},this.setProfileName=(e,t)=>{w.U.setProfileName(e,t)},this.setProfileImage=(e,t)=>{w.U.setProfileImage(e,t)},this.setUser=(e,t)=>{w.U.setUser(e,t)},this.resetAccount=e=>{w.U.resetAccount(e)},this.setCaipNetwork=e=>{b.W.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{b.W.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=(e,t)=>{w.U.setAllAccounts(e,t),v.H.setHasMultipleAddresses(e?.length>1)},this.setStatus=(e,t)=>{w.U.setStatus(e,t),d.a.isConnected()?A.i.setConnectionStatus("connected"):A.i.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>b.W.getAccountProp("address",e),this.setConnectors=e=>{const t=[...d.a.state.allConnectors,...e];d.a.setConnectors(t)},this.setConnections=(e,t)=>{p.x.setConnections(e,t)},this.fetchIdentity=e=>D.T.fetchIdentity(e),this.getReownName=e=>B.f.getNamesForAddress(e),this.getConnectors=()=>d.a.getConnectors(),this.getConnectorImage=e=>L.$.getConnectorImage(e),this.setConnectedWalletInfo=(e,t)=>{const r=S.A.getProviderId(t),s=e?{...e,type:r}:void 0;w.U.setConnectedWalletInfo(s,t)},this.getIsConnectedState=()=>Boolean(b.W.state.activeCaipAddress),this.addAddressLabel=(e,t,r)=>{w.U.addAddressLabel(e,t,r)},this.removeAddressLabel=(e,t)=>{w.U.removeAddressLabel(e,t)},this.getAddress=e=>b.W.state.activeChain!==e&&e?b.W.getAccountProp("address",e):w.U.state.address,this.setApprovedCaipNetworksData=e=>b.W.setApprovedCaipNetworksData(e),this.resetNetwork=e=>{b.W.resetNetwork(e)},this.addConnector=e=>{d.a.addConnector(e)},this.resetWcConnection=()=>{p.x.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{w.U.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=(e,t)=>{w.U.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=(e,t)=>{b.W.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=(e,t)=>{w.U.setPreferredAccountType(e,t)},this.setEIP6963Enabled=e=>{v.H.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){const r=e?.map((e=>e.namespace)).filter((e=>Boolean(e)));if(r?.length)return[...new Set(r)];const s=t?.map((e=>e.chainNamespace));return[...new Set(s)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await vt.fetchRemoteFeatures(e),v.H.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&M.aG.setOnrampProviders(this.remoteFeatures.onramp),(v.H.state.remoteFeatures?.email||Array.isArray(v.H.state.remoteFeatures?.socials)&&v.H.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await m.Np.fetchAllowedOrigins();if(e&&l.w.isClient()){const t=window.location.origin;pt.isOriginAllowed(t,e,ht)||C.h.open(I.R.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else C.h.open(I.R.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){const{...t}=e;delete t.adapters,delete t.universalProvider,f.E.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map((e=>e.id)),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&E.W.setThemeMode(e.themeMode),e.themeVariables&&E.W.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");b.W.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&b.W.setActiveCaipNetwork(t)}initializeConnectionController(e){p.x.setWcBasic(e.basic??!1)}initializeConnectorController(){d.a.initialize(this.chainNamespaces)}initializeProjectSettings(e){v.H.setProjectId(e.projectId),v.H.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){v.H.setDebug(!1!==e.debug),v.H.setEnableWalletConnect(!1!==e.enableWalletConnect),v.H.setEnableWalletGuide(!1!==e.enableWalletGuide),v.H.setEnableWallets(!1!==e.enableWallets),v.H.setEIP6963Enabled(!1!==e.enableEIP6963),v.H.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),v.H.setEnableAuthLogger(!1!==e.enableAuthLogger),v.H.setCustomRpcUrls(e.customRpcUrls),v.H.setEnableEmbedded(e.enableEmbedded),v.H.setAllWallets(e.allWallets),v.H.setIncludeWalletIds(e.includeWalletIds),v.H.setExcludeWalletIds(e.excludeWalletIds),v.H.setFeaturedWalletIds(e.featuredWalletIds),v.H.setTokens(e.tokens),v.H.setTermsConditionsUrl(e.termsConditionsUrl),v.H.setPrivacyPolicyUrl(e.privacyPolicyUrl),v.H.setCustomWallets(e.customWallets),v.H.setFeatures(e.features),v.H.setAllowUnsupportedChain(e.allowUnsupportedChain),v.H.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),v.H.setPreferUniversalLinks(e.experimental_preferUniversalLinks),v.H.setDefaultAccountTypes(e.defaultAccountTypes);const t=A.i.getPreferredAccountTypes()||{},r={...v.H.state.defaultAccountTypes,...t};w.U.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),v.H.setMetadata(e.metadata),v.H.setDisableAppend(e.disableAppend),v.H.setEnableEmbedded(e.enableEmbedded),v.H.setSIWX(e.siwx),!e.projectId)return void C.h.open(I.R.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const n=e.adapters?.find((e=>e.namespace===u.o.CHAIN.EVM));if(n&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");v.H.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return l.w.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const r=it.getUnsupportedNetwork(`${t}:${e}`);b.W.setActiveCaipNetwork(r)}}getDefaultNetwork(){return it.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return it.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return it.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find((t=>t.id===e.defaultNetwork?.id));return t?it.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=b.W.state.activeChain,t=this.getAdapter(e),r=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");const s=await t.connectWalletConnect(r);this.close(),this.setClientId(s?.clientId||null),A.i.setConnectedNamespaces([...b.W.state.chains.keys()]),this.chainNamespaces.forEach((e=>{d.a.setConnectorId(N.o.CONNECTOR_TYPE_WALLET_CONNECT,e)})),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:r,provider:s,chain:n,caipNetwork:i,socialUri:o})=>{const a=b.W.state.activeChain,c=n||a,l=this.getAdapter(c);if(n&&n!==a&&!i){const e=this.getCaipNetworks().find((e=>e.chainNamespace===n));e&&this.setCaipNetwork(e)}if(!l)throw new Error("Adapter not found");const u=this.getCaipNetwork(c),h=await l.connect({id:e,info:t,type:r,provider:s,socialUri:o,chainId:i?.id||u?.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]||u?.rpcUrls?.default?.http?.[0]});if(!h)return;A.i.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c});const d=w.U.state.allAccounts,{accounts:p}=d?.length>0?{accounts:[...d]}:await l.getAccounts({namespace:c,id:e});this.setAllAccounts(p,c),this.setStatus("connected",c),this.syncConnectedWalletInfo(c)},reconnectExternal:async({id:e,info:t,type:r,provider:s})=>{const n=b.W.state.activeChain,i=this.getAdapter(n);i?.reconnect&&(await(i?.reconnect({id:e,info:t,type:r,provider:s,chainId:this.getCaipNetwork()?.id})),A.i.addConnectedNamespace(n),this.syncConnectedWalletInfo(n))},disconnect:async e=>{const t=e||b.W.state.activeChain,r=this.getAdapter(t),s=S.A.getProvider(t),n=S.A.getProviderId(t);await(r?.disconnect({provider:s,providerType:n})),A.i.removeConnectedNamespace(t),S.A.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t)},checkInstalled:e=>e?e.some((e=>Boolean(window.ethereum?.[String(e)]))):Boolean(window.ethereum),signMessage:async e=>{const t=this.getAdapter(b.W.state.activeChain),r=await(t?.signMessage({message:e,address:w.U.state.address,provider:S.A.getProvider(b.W.state.activeChain)}));return r?.signature||""},sendTransaction:async e=>{const t=e.chainNamespace;if(y.oU.SEND_SUPPORTED_NAMESPACES.includes(t)){const r=this.getAdapter(b.W.state.activeChain),s=S.A.getProvider(t),n=await(r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return n?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===u.o.CHAIN.EVM){const t=this.getAdapter(b.W.state.activeChain),r=S.A.getProvider(b.W.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const n=await(t?.estimateGas({...e,provider:r,caipNetwork:s}));return n?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:w.U.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:b.W.state.activeChain}),w.U.state.profileImage||!1),getEnsAddress:async e=>await pt.resolveReownName(e),writeContract:async e=>{const t=this.getAdapter(b.W.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),n=S.A.getProvider(b.W.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const i=await(t?.writeContract({...e,caipNetwork:r,provider:n,caipAddress:s}));return i?.hash},parseUnits:(e,t)=>{const r=this.getAdapter(b.W.state.activeChain);return r?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{const r=this.getAdapter(b.W.state.activeChain);return r?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{const t=this.getAdapter(b.W.state.activeChain);return await(t?.getCapabilities(e))},grantPermissions:async e=>{const t=this.getAdapter(b.W.state.activeChain);return await(t?.grantPermissions(e))},revokePermissions:async e=>{const t=this.getAdapter(b.W.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{const t=this.getAdapter(b.W.state.activeChain);return await(t?.walletGetAssets(e))??{}},updateBalance:e=>{const t=this.getCaipNetwork(e);t&&w.U.state.address&&this.updateNativeBalance(w.U.state.address,t?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},p.x.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(S.A.getProviderId(b.W.state.activeChain)===N.o.CONNECTOR_TYPE_WALLET_CONNECT){const e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:"MetaMask Wallet"===this.universalProvider?.session?.peer?.metadata.name,approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const r=S.A.getProvider(t),s=S.A.getProviderId(t);if(e.chainNamespace===b.W.state.activeChain){const n=this.getAdapter(t);await(n?.switchNetwork({caipNetwork:e,provider:r,providerType:s}))}else if(this.setCaipNetwork(e),s===N.o.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const r=this.getAddressByChainNamespace(t);r&&this.syncAccount({address:r,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap((e=>{const t=e.chains||[],r=e.accounts.map((e=>{const{chainId:t,chainNamespace:r}=R.C.parseCaipAddress(e);return`${r}:${t}`}));return Array.from(new Set([...t,...r]))}))}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce(((t,r)=>{const s=e?.find((e=>e.namespace===r));return s?(s.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[r]=s):t[r]=new yt({namespace:r,networks:this.getCaipNetworks()}),t}),{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map((async e=>{await this.initChainAdapter(e)})))}onConnectors(e){const t=this.getAdapter(e);t?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const r=A.i.getConnectionStatus();"connected"===r?this.setStatus("connecting",e):"disconnected"===r?(A.i.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),t.on("switchNetwork",(({address:t,chainId:r})=>{const s=this.getCaipNetworks().find((e=>e.id===r||e.caipNetworkId===r)),n=b.W.state.activeChain===e,i=b.W.getAccountProp("address",e);if(s){const r=n&&t?t:i;r&&this.syncAccount({address:r,chainId:s.id,chainNamespace:e})}else this.setUnsupportedNetwork(r)})),t.on("disconnect",this.disconnect.bind(this,e)),t.on("connections",(t=>{this.setConnections(t,e)})),t.on("pendingTransactions",(()=>{const e=w.U.state.address,t=b.W.state.activeCaipNetwork;e&&t?.id&&this.updateNativeBalance(e,t.id,t.chainNamespace)})),t.on("accountChanged",(({address:t,chainId:r})=>{const s=b.W.state.activeChain===e;s&&r?this.syncAccount({address:t,chainId:r,chainNamespace:e}):s&&b.W.state.activeCaipNetwork?.id?this.syncAccount({address:t,chainId:b.W.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(t,r,e),this.syncAllAccounts(e)}))}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map((e=>this.syncNamespaceConnection(e))))}async syncNamespaceConnection(e){try{const t=d.a.getConnectorId(e);switch(this.setStatus("connecting",e),t){case u.o.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case u.o.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){const t=this.getAdapter(e),r=d.a.getConnectorId(e),s=this.getCaipNetwork(e),n=d.a.getConnectors(e).find((e=>e.id===r));try{if(!t||!n)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");const r=await(t?.syncConnection({namespace:e,id:n.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]}));if(r){const s=await(t?.getAccounts({namespace:e,id:n.id}));s&&s.accounts.length>0?this.setAllAccounts(s.accounts,e):this.setAllAccounts([l.w.createAccount(e,r.address,"eoa")],e),this.syncProvider({...r,chainNamespace:e}),await this.syncAccount({...r,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch(t){this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map((async e=>{const t=this.getAdapter(e),r=this.universalProvider?.session?.namespaces?.[e]?.accounts||[],s=b.W.state.activeCaipNetwork?.id,n=r.find((e=>{const{chainId:t}=R.C.parseCaipAddress(e);return t===s?.toString()}))||r[0];if(n){const r=R.C.validateCaipAddress(n),{chainId:s,address:i}=R.C.parseCaipAddress(r);if(S.A.setProviderId(e,N.o.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&b.W.state.activeCaipNetwork&&t?.namespace!==u.o.CHAIN.EVM){const r=t?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:b.W.state.activeCaipNetwork});S.A.setProvider(e,r)}else S.A.setProvider(e,this.universalProvider);d.a.setConnectorId(u.o.CONNECTOR_ID.WALLET_CONNECT,e),A.i.addConnectedNamespace(e),this.syncWalletConnectAccounts(e),await this.syncAccount({address:i,chainId:s,chainNamespace:e})}else this.setStatus("disconnected",e);this.syncConnectedWalletInfo(e),await b.W.setApprovedCaipNetworksData(e)}));await Promise.all(e)}syncWalletConnectAccounts(e){const t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map((e=>{const{address:t}=R.C.parseCaipAddress(e);return t})).filter(((e,t,r)=>r.indexOf(e)===t));t&&this.setAllAccounts(t.map((t=>l.w.createAccount(e,t,"bip122"===e?"payment":"eoa"))),e)}syncProvider({type:e,provider:t,id:r,chainNamespace:s}){S.A.setProviderId(s,e),S.A.setProvider(s,t),d.a.setConnectorId(r,s)}async syncAllAccounts(e){const t=d.a.getConnectorId(e);if(!t)return;const r=this.getAdapter(e),s=await(r?.getAccounts({namespace:e,id:t}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){const t=e.chainNamespace===b.W.state.activeChain,r=b.W.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:n,chainNamespace:i}=e,{chainId:o}=A.i.getActiveNetworkProps(),a=n||o,c=b.W.state.activeCaipNetwork?.name===u.o.UNSUPPORTED_NETWORK_NAME,l=b.W.getNetworkProp("supportsAllNetworks",i);if(this.setStatus("connected",i),(!c||l)&&a){let e=this.getCaipNetworks().find((e=>e.id.toString()===a.toString())),n=this.getCaipNetworks().find((e=>e.chainNamespace===i));if(!l&&!e&&!n){const t=this.getApprovedCaipNetworkIds()||[],r=t.find((e=>R.C.parseCaipNetworkId(e)?.chainId===a.toString())),s=t.find((e=>R.C.parseCaipNetworkId(e)?.chainNamespace===i));e=this.getCaipNetworks().find((e=>e.caipNetworkId===r)),n=this.getCaipNetworks().find((e=>e.caipNetworkId===s||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===s))}const o=e||n;o?.chainNamespace===b.W.state.activeChain?v.H.state.enableNetworkSwitch&&!v.H.state.allowUnsupportedChain&&b.W.state.activeCaipNetwork?.name===u.o.UNSUPPORTED_NETWORK_NAME?b.W.showUnsupportedChainUI():this.setCaipNetwork(o):t||r&&this.setCaipNetworkOfNamespace(r,i),this.syncConnectedWalletInfo(i),_.y.isLowerCaseMatch(s,w.U.state.address)||this.syncAccountInfo(s,o?.id,i),t?await this.syncBalance({address:s,chainId:o?.id,chainNamespace:i}):await this.syncBalance({address:s,chainId:r?.id,chainNamespace:i})}}async syncAccountInfo(e,t,r){const s=this.getCaipAddress(r),n=t||s?.split(":")[1];if(!n)return;const i=`${r}:${n}:${e}`;this.setCaipAddress(i,r),await this.syncIdentity({address:e,chainId:n,chainNamespace:r})}async syncReownName(e,t){try{const r=await this.getReownName(e);if(r[0]){const e=r[0];this.setProfileName(e.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){const t=d.a.getConnectorId(e),r=S.A.getProviderId(e);if(r===N.o.CONNECTOR_TYPE_ANNOUNCED||r===N.o.CONNECTOR_TYPE_INJECTED){if(t){const r=this.getConnectors().find((e=>e.id===t));if(r){const{info:t,name:s,imageUrl:n}=r,i=n||this.getConnectorImage(r);this.setConnectedWalletInfo({name:s,icon:i,...t},e)}}}else if(r===N.o.CONNECTOR_TYPE_WALLET_CONNECT){const t=S.A.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t&&t===u.o.CONNECTOR_ID.COINBASE){const t=this.getConnectors().find((e=>e.id===u.o.CONNECTOR_ID.COINBASE));this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(t)},e)}}async syncBalance(e){const t=U.L.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find((t=>t.id.toString()===e.chainId?.toString()));t&&e.chainId&&await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,r){const s=this.getAdapter(r),n=b.W.getCaipNetworkByNamespace(r,t);if(s){const i=await s.getBalance({address:e,chainId:t,caipNetwork:n,tokens:this.options.tokens});return this.setBalance(i.balance,i.symbol,r),i}}async initializeUniversalAdapter(){const e=at.createLogger(((e,...t)=>{e&&this.handleAlertError(e),console.error(...t)})),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};v.H.setManualWCControl(Boolean(this.options?.manualWCControl)),this.universalProvider=this.options.universalProvider??await k.A.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",(e=>{p.x.setUri(e)})),this.universalProvider.on("connect",p.x.finalizeWcConnection),this.universalProvider.on("disconnect",(()=>{this.chainNamespaces.forEach((e=>{this.resetAccount(e)})),p.x.resetWcConnection()})),this.universalProvider.on("chainChanged",(e=>{const t=this.getCaipNetworks().find((t=>t.id==e)),r=this.getCaipNetwork();t?r?.id!==t?.id&&this.setCaipNetwork(t):this.setUnsupportedNetwork(e)})),this.universalProvider.on("session_event",(e=>{if(pt.isSessionEventData(e)){const{name:t,data:r}=e.params.event;"accountsChanged"===t&&Array.isArray(r)&&l.w.isCaipAddress(r[0])&&this.syncAccount(R.C.parseCaipAddress(r[0]))}})))}createUniversalProvider(){return!this.universalProviderInitPromise&&l.w.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){f.E.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(I.R.UniversalProviderErrors).find((([,{message:t}])=>e.message.includes(t))),[r,s]=t??[],{message:n,alertErrorKey:i}=s??{};if(r&&n&&!this.reportedAlertErrors[r]){const e=I.R.ALERT_ERRORS[i];e&&(C.h.open(e,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const r=e;r.namespace=t,r.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=r)}async open(e){return await this.injectModalUi(),e?.uri&&p.x.setUri(e.uri),e?.arguments&&"Swap"===e?.view?j.W.open({...e,data:{swap:e.arguments}}):j.W.open(e)}async close(){await this.injectModalUi(),j.W.close()}setLoading(e,t){j.W.setLoading(e,t)}async disconnect(e){await p.x.disconnect(e)}getSIWX(){return v.H.state.siwx}getError(){return""}getChainId(){return b.W.state.activeCaipNetwork?.id}async switchNetwork(e){const t=this.getCaipNetworks().find((t=>t.id===e.id));t?await b.W.switchActiveNetwork(t):C.h.open(I.R.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error")}getWalletProvider(){return b.W.state.activeChain?S.A.state.providers[b.W.state.activeChain]:null}getWalletProviderType(){return S.A.getProviderId(b.W.state.activeChain)}subscribeProviders(e){return S.A.subscribeProviders(e)}getThemeMode(){return E.W.state.themeMode}getThemeVariables(){return E.W.state.themeVariables}setThemeMode(e){E.W.setThemeMode(e),(0,W.JX)(E.W.state.themeMode)}setTermsConditionsUrl(e){v.H.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){v.H.setPrivacyPolicyUrl(e)}setThemeVariables(e){E.W.setThemeVariables(e),(0,W.ds)(E.W.state.themeVariables)}subscribeTheme(e){return E.W.subscribe(e)}getWalletInfo(){return w.U.state.connectedWalletInfo}getAccount(e){const t=d.a.getAuthConnector(e),r=b.W.getAccountData(e),s=b.W.state.activeChain,n=A.i.getConnectedConnectorId(e);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:l.w.getPlainAddress(r.caipAddress),isConnected:Boolean(r.caipAddress),status:r.status,embeddedWalletInfo:t&&n===u.o.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:A.i.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:r.preferredAccountTypes?.[e||s],isSmartAccountDeployed:Boolean(r.smartAccountDeployed)}:void 0}}subscribeAccount(e,t){const r=()=>{const r=this.getAccount(t);r&&e(r)};t?b.W.subscribeChainProp("accountState",r,t):b.W.subscribe(r),d.a.subscribe(r)}subscribeNetwork(e){return b.W.subscribe((({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})}))}subscribeWalletInfo(e){return w.U.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){w.U.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){b.W.subscribeKey("activeCaipNetwork",e)}getState(){return g.z.state}subscribeState(e){return g.z.subscribe(e)}showErrorMessage(e){F.P.showError(e)}showSuccessMessage(e){F.P.showSuccess(e)}getEvent(){return{...f.E.state}}subscribeEvents(e){return f.E.subscribe(e)}replace(e){H.I.replace(e)}redirect(e){H.I.push(e)}popTransactionStack(e){H.I.popTransactionStack(e)}isOpen(){return j.W.state.open}isTransactionStackEmpty(){return 0===H.I.state.transactionStack.length}static getInstance(){return this.instance}updateFeatures(e){v.H.setFeatures(e)}updateRemoteFeatures(e){v.H.setRemoteFeatures(e)}updateOptions(e){const t={...v.H.state||{},...e};v.H.setOptions(t)}setConnectMethodsOrder(e){v.H.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){v.H.setWalletFeaturesOrder(e)}setCollapseWallets(e){v.H.setCollapseWallets(e)}setSocialsOrder(e){v.H.setSocialsOrder(e)}getConnectMethodsOrder(){return $.A.getConnectOrderMethod(v.H.state.features,d.a.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find((e=>e.id===r.id))||b.W.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.getCaipNetworks().find((e=>e.id===t));r&&b.W.removeNetwork(e,t)}}let At=!1;function Ct(e,t,r){const s=t.split("|").map((e=>e.trim()));for(let r=0;r<s.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const n=new Error(`invalid value for type ${t}`);throw n.code="INVALID_ARGUMENT",n.argument=`value.${r}`,n.value=e,n}async function _t(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,r,s)=>(e[t[s]]=r,e)),{})}function Nt(e,t,r){for(let s in t){let n=t[s];const i=r?r[s]:null;i&&Ct(n,i,s),Object.defineProperty(e,s,{enumerable:!0,value:n,writable:!1})}}function It(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(It).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let s=0;s<e.length;s++)r+=t[e[s]>>4],r+=t[15&e[s]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return It(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${It(t)}: ${It(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function St(e,t){return e&&e.code===t}function Tt(e){return St(e,"CALL_EXCEPTION")}function Pt(e,t,r){let s,n=e;{const s=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${It(r)}`);for(const e in r){if("shortMessage"===e)continue;const t=r[e];s.push(e+"="+It(t))}}s.push(`code=${t}`),s.push("version=6.13.2"),s.length&&(e+=" ("+s.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":s=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(e);break;default:s=new Error(e)}return Nt(s,{code:t}),r&&Object.assign(s,r),null==s.shortMessage&&Nt(s,{shortMessage:n}),s}function Ot(e,t,r,s){if(!e)throw Pt(t,r,s)}function xt(e,t,r,s){Ot(e,t,"INVALID_ARGUMENT",{argument:r,value:s})}function kt(e,t,r){null==r&&(r=""),r&&(r=": "+r),Ot(e>=t,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Ot(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const Rt=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(e){}return e}),[]);function Ut(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),Ot(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function Dt(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let r=2;for(let s=0;s<t.length;s++)t[s]=parseInt(e.substring(r,r+2),16),r+=2;return t}xt(!1,"invalid BytesLike value",t||"value",e)}function Bt(e,t){return Dt(e,t,!1)}function Lt(e,t){return Dt(e,t,!0)}function Mt(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof t&&e.length!==2+2*t||!0===t&&e.length%2!=0)}function jt(e){return Mt(e,!0)||e instanceof Uint8Array}const Ft="0123456789abcdef";function Ht(e){const t=Bt(e);let r="0x";for(let e=0;e<t.length;e++){const s=t[e];r+=Ft[(240&s)>>4]+Ft[15&s]}return r}function $t(e){return"0x"+e.map((e=>Ht(e).substring(2))).join("")}function Wt(e){return Mt(e,!0)?(e.length-2)/2:Bt(e).length}function zt(e,t,r){const s=Bt(e);return null!=r&&r>s.length&&Ot(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:r}),Ht(s.slice(null==t?0:t,null==r?s.length:r))}function qt(e,t,r){const s=Bt(e);Ot(t>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:t,offset:t+1});const n=new Uint8Array(t);return n.fill(0),r?n.set(s,t-s.length):n.set(s,0),Ht(n)}function Vt(e,t){return qt(e,t,!0)}const Gt=BigInt(0),Kt=BigInt(1),Jt=9007199254740991;function Qt(e,t){const r=er(e,"value"),s=BigInt(sr(t,"width"));return Ot(r>>s===Gt,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>s-Kt?-((~r&(Kt<<s)-Kt)+Kt):r}function Zt(e,t){let r=Xt(e,"value");const s=BigInt(sr(t,"width")),n=Kt<<s-Kt;return r<Gt?(r=-r,Ot(r<=n,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(Kt<<s)-Kt)+Kt):(Ot(r<n,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)}function Yt(e,t){const r=er(e,"value"),s=BigInt(sr(t,"bits"));return r&(Kt<<s)-Kt}function Xt(e,t){switch(typeof e){case"bigint":return e;case"number":return xt(Number.isInteger(e),"underflow",t||"value",e),xt(e>=-Jt&&e<=Jt,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(r){xt(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}xt(!1,"invalid BigNumberish value",t||"value",e)}function er(e,t){const r=Xt(e,t);return Ot(r>=Gt,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}const tr="0123456789abcdef";function rr(e){if(e instanceof Uint8Array){let t="0x0";for(const r of e)t+=tr[r>>4],t+=tr[15&r];return BigInt(t)}return Xt(e)}function sr(e,t){switch(typeof e){case"bigint":return xt(e>=-Jt&&e<=Jt,"overflow",t||"value",e),Number(e);case"number":return xt(Number.isInteger(e),"underflow",t||"value",e),xt(e>=-Jt&&e<=Jt,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return sr(BigInt(e),t)}catch(r){xt(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}xt(!1,"invalid numeric value",t||"value",e)}function nr(e,t){let r=er(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{const s=sr(t,"width");for(Ot(2*s>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*s;)r="0"+r}return"0x"+r}function ir(e){const t=er(e,"value");if(t===Gt)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);const s=new Uint8Array(r.length/2);for(let e=0;e<s.length;e++){const t=2*e;s[e]=parseInt(r.substring(t,t+2),16)}return s}function or(e){let t=Ht(jt(e)?e:ir(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const ar=32,cr=new Uint8Array(ar),lr=["then"],ur={},hr=new WeakMap;function dr(e){return hr.get(e)}function pr(e,t){hr.set(e,t)}function fr(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}function gr(e,t,r){return e.indexOf(null)>=0?t.map(((e,t)=>e instanceof mr?gr(dr(e),e,r):e)):e.reduce(((e,s,n)=>{let i=t.getValue(s);return s in e||(r&&i instanceof mr&&(i=gr(dr(i),i,r)),e[s]=i),e}),{})}class mr extends Array{#e;constructor(...e){const t=e[0];let r=e[1],s=(e[2]||[]).slice(),n=!0;t!==ur&&(r=e,s=[],n=!1),super(r.length),r.forEach(((e,t)=>{this[t]=e}));const i=s.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(pr(this,Object.freeze(r.map(((e,t)=>{const r=s[t];return null!=r&&1===i.get(r)?r:null})))),this.#e=[],null==this.#e&&this.#e,!n)return;Object.freeze(this);const o=new Proxy(this,{get:(e,t,r)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const r=sr(t,"%index");if(r<0||r>=this.length)throw new RangeError("out of result range");const s=e[r];return s instanceof Error&&fr(`index ${r}`,s),s}if(lr.indexOf(t)>=0)return Reflect.get(e,t,r);const s=e[t];if(s instanceof Function)return function(...t){return s.apply(this===r?e:this,t)};if(!(t in e))return e.getValue.apply(this===r?e:this,[t])}return Reflect.get(e,t,r)}});return pr(o,dr(this)),o}toArray(e){const t=[];return this.forEach(((r,s)=>{r instanceof Error&&fr(`index ${s}`,r),e&&r instanceof mr&&(r=r.toArray(e)),t.push(r)})),t}toObject(e){const t=dr(this);return t.reduce(((r,s,n)=>(Ot(null!=s,`value at index ${n} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),gr(t,this,e))),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const r=dr(this),s=[],n=[];for(let i=e;i<t;i++)s.push(this[i]),n.push(r[i]);return new mr(ur,s,n)}filter(e,t){const r=dr(this),s=[],n=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&fr(`index ${i}`,o),e.call(t,o,i,this)&&(s.push(o),n.push(r[i]))}return new mr(ur,s,n)}map(e,t){const r=[];for(let s=0;s<this.length;s++){const n=this[s];n instanceof Error&&fr(`index ${s}`,n),r.push(e.call(t,n,s,this))}return r}getValue(e){const t=dr(this).indexOf(e);if(-1===t)return;const r=this[t];return r instanceof Error&&fr(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new mr(ur,e,t)}}function yr(e){let t=ir(e);return Ot(t.length<=ar,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:ar,offset:t.length}),t.length!==ar&&(t=Lt($t([cr.slice(t.length%ar),t]))),t}class wr{name;type;localName;dynamic;constructor(e,t,r,s){Nt(this,{name:e,type:t,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){xt(!1,e,this.localName,t)}}class br{#t;#r;constructor(){this.#t=[],this.#r=0}get data(){return $t(this.#t)}get length(){return this.#r}#s(e){return this.#t.push(e),this.#r+=e.length,e.length}appendWriter(e){return this.#s(Lt(e.data))}writeBytes(e){let t=Lt(e);const r=t.length%ar;return r&&(t=Lt($t([t,cr.slice(r)]))),this.#s(t)}writeValue(e){return this.#s(yr(e))}writeUpdatableValue(){const e=this.#t.length;return this.#t.push(cr),this.#r+=ar,t=>{this.#t[e]=yr(t)}}}class vr{allowLoose;#t;#n;#i;#o;#a;constructor(e,t,r){Nt(this,{allowLoose:!!t}),this.#t=Lt(e),this.#i=0,this.#o=null,this.#a=null!=r?r:1024,this.#n=0}get data(){return Ht(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#n}get bytes(){return new Uint8Array(this.#t)}#c(e){if(this.#o)return this.#o.#c(e);this.#i+=e,Ot(this.#a<1||this.#i<=this.#a*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#a} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Lt(this.#t),offset:this.#n,length:e,info:{bytesRead:this.#i,dataLength:this.dataLength}})}#l(e,t,r){let s=Math.ceil(t/ar)*ar;return this.#n+s>this.#t.length&&(this.allowLoose&&r&&this.#n+t<=this.#t.length?s=t:Ot(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Lt(this.#t),length:this.#t.length,offset:this.#n+s})),this.#t.slice(this.#n,this.#n+s)}subReader(e){const t=new vr(this.#t.slice(this.#n+e),this.allowLoose,this.#a);return t.#o=this,t}readBytes(e,t){let r=this.#l(0,e,!!t);return this.#c(e),this.#n+=r.length,r.slice(0,e)}readValue(){return rr(this.readBytes(ar))}readIndex(){return sr(rr(this.readBytes(ar)))}}function Er(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ar(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Cr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function _r(e,t){Ar(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Nr=BigInt(2**32-1),Ir=BigInt(32);function Sr(e,t=!1){return t?{h:Number(e&Nr),l:Number(e>>Ir&Nr)}:{h:0|Number(e>>Ir&Nr),l:0|Number(e&Nr)}}function Tr(e,t=!1){let r=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:i,l:o}=Sr(e[n],t);[r[n],s[n]]=[i,o]}return[r,s]}const Pr=(e,t,r)=>e<<r|t>>>32-r,Or=(e,t,r)=>t<<r|e>>>32-r,xr=(e,t,r)=>t<<r-32|e>>>64-r,kr=(e,t,r)=>e<<r-32|t>>>64-r,Rr={fromBig:Sr,split:Tr,toBig:(e,t)=>BigInt(e>>>0)<<Ir|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:Pr,rotlSL:Or,rotlBH:xr,rotlBL:kr,add:function(e,t,r,s){const n=(t>>>0)+(s>>>0);return{h:e+r+(n/2**32|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,s)=>t+r+s+(e/2**32|0)|0,add4L:(e,t,r,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),add4H:(e,t,r,s,n)=>t+r+s+n+(e/2**32|0)|0,add5H:(e,t,r,s,n,i)=>t+r+s+n+i+(e/2**32|0)|0,add5L:(e,t,r,s,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0)+(n>>>0)},Ur="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Dr=e=>e instanceof Uint8Array,Br=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Lr=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Mr(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Dr(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class jr{clone(){return this._cloneInto()}}function Fr(e){const t=t=>e().update(Mr(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Hr(e=32){if(Ur&&"function"==typeof Ur.getRandomValues)return Ur.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const[$r,Wr,zr]=[[],[],[]],qr=BigInt(0),Vr=BigInt(1),Gr=BigInt(2),Kr=BigInt(7),Jr=BigInt(256),Qr=BigInt(113);for(let e=0,t=Vr,r=1,s=0;e<24;e++){[r,s]=[s,(2*r+3*s)%5],$r.push(2*(5*s+r)),Wr.push((e+1)*(e+2)/2%64);let n=qr;for(let e=0;e<7;e++)t=(t<<Vr^(t>>Kr)*Qr)%Jr,t&Gr&&(n^=Vr<<(Vr<<BigInt(e))-Vr);zr.push(n)}const[Zr,Yr]=Tr(zr,!0),Xr=(e,t,r)=>r>32?xr(e,t,r):Pr(e,t,r),es=(e,t,r)=>r>32?kr(e,t,r):Or(e,t,r);class ts extends jr{constructor(e,t,r,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Er(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(e,t=24){const r=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,n=(t+2)%10,i=r[n],o=r[n+1],a=Xr(i,o,1)^r[s],c=es(i,o,1)^r[s+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){const s=Wr[r],i=Xr(t,n,s),o=es(t,n,s),a=$r[r];t=e[a],n=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)r[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~r[(s+2)%10]&r[(s+4)%10]}e[0]^=Zr[s],e[1]^=Yr[s]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Cr(this);const{blockLen:t,state:r}=this,s=(e=Mr(e)).length;for(let n=0;n<s;){const i=Math.min(t-this.pos,s-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,128&t&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Cr(this,!1),Ar(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,n=e.length;s<n;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,n-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Er(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_r(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:n,enableXOF:i}=this;return e||(e=new ts(t,r,s,i,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const rs=((e,t,r)=>Fr((()=>new ts(t,e,r))))(1,136,32);let ss=!1;const ns=function(e){return rs(e)};let is=ns;function os(e){const t=Bt(e,"data");return Ht(is(t))}os._=ns,os.lock=function(){ss=!0},os.register=function(e){if(ss)throw new TypeError("keccak256 is locked");is=e},Object.freeze(os);const as=BigInt(0),cs=BigInt(36);function ls(e){const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const s=Bt(os(r));for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&s[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const us={};for(let e=0;e<10;e++)us[String(e)]=String(e);for(let e=0;e<26;e++)us[String.fromCharCode(65+e)]=String(10+e);const hs=function(){const e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function ds(e){if(xt("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=ls(e);return xt(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){xt(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>us[e])).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=as;for(let r=0;r<e.length;r++)t=t*cs+hs[e[r]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return ls("0x"+t)}xt(!1,"invalid address","address",e)}const ps={};function fs(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new ys(ps,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function gs(e,t){return new ys(ps,`bytes${t||""}`,e,{size:t})}const ms=Symbol.for("_ethers_typed");class ys{type;value;#u;_typedSymbol;constructor(e,t,r,s){null==s&&(s=null),Ut(ps,e,"Typed"),Nt(this,{_typedSymbol:ms,type:t,value:r}),this.#u=s,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#u}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#u?-1:!1===this.#u?this.value.length:null}static from(e,t){return new ys(ps,e,t)}static uint8(e){return fs(e,8)}static uint16(e){return fs(e,16)}static uint24(e){return fs(e,24)}static uint32(e){return fs(e,32)}static uint40(e){return fs(e,40)}static uint48(e){return fs(e,48)}static uint56(e){return fs(e,56)}static uint64(e){return fs(e,64)}static uint72(e){return fs(e,72)}static uint80(e){return fs(e,80)}static uint88(e){return fs(e,88)}static uint96(e){return fs(e,96)}static uint104(e){return fs(e,104)}static uint112(e){return fs(e,112)}static uint120(e){return fs(e,120)}static uint128(e){return fs(e,128)}static uint136(e){return fs(e,136)}static uint144(e){return fs(e,144)}static uint152(e){return fs(e,152)}static uint160(e){return fs(e,160)}static uint168(e){return fs(e,168)}static uint176(e){return fs(e,176)}static uint184(e){return fs(e,184)}static uint192(e){return fs(e,192)}static uint200(e){return fs(e,200)}static uint208(e){return fs(e,208)}static uint216(e){return fs(e,216)}static uint224(e){return fs(e,224)}static uint232(e){return fs(e,232)}static uint240(e){return fs(e,240)}static uint248(e){return fs(e,248)}static uint256(e){return fs(e,256)}static uint(e){return fs(e,256)}static int8(e){return fs(e,-8)}static int16(e){return fs(e,-16)}static int24(e){return fs(e,-24)}static int32(e){return fs(e,-32)}static int40(e){return fs(e,-40)}static int48(e){return fs(e,-48)}static int56(e){return fs(e,-56)}static int64(e){return fs(e,-64)}static int72(e){return fs(e,-72)}static int80(e){return fs(e,-80)}static int88(e){return fs(e,-88)}static int96(e){return fs(e,-96)}static int104(e){return fs(e,-104)}static int112(e){return fs(e,-112)}static int120(e){return fs(e,-120)}static int128(e){return fs(e,-128)}static int136(e){return fs(e,-136)}static int144(e){return fs(e,-144)}static int152(e){return fs(e,-152)}static int160(e){return fs(e,-160)}static int168(e){return fs(e,-168)}static int176(e){return fs(e,-176)}static int184(e){return fs(e,-184)}static int192(e){return fs(e,-192)}static int200(e){return fs(e,-200)}static int208(e){return fs(e,-208)}static int216(e){return fs(e,-216)}static int224(e){return fs(e,-224)}static int232(e){return fs(e,-232)}static int240(e){return fs(e,-240)}static int248(e){return fs(e,-248)}static int256(e){return fs(e,-256)}static int(e){return fs(e,-256)}static bytes1(e){return gs(e,1)}static bytes2(e){return gs(e,2)}static bytes3(e){return gs(e,3)}static bytes4(e){return gs(e,4)}static bytes5(e){return gs(e,5)}static bytes6(e){return gs(e,6)}static bytes7(e){return gs(e,7)}static bytes8(e){return gs(e,8)}static bytes9(e){return gs(e,9)}static bytes10(e){return gs(e,10)}static bytes11(e){return gs(e,11)}static bytes12(e){return gs(e,12)}static bytes13(e){return gs(e,13)}static bytes14(e){return gs(e,14)}static bytes15(e){return gs(e,15)}static bytes16(e){return gs(e,16)}static bytes17(e){return gs(e,17)}static bytes18(e){return gs(e,18)}static bytes19(e){return gs(e,19)}static bytes20(e){return gs(e,20)}static bytes21(e){return gs(e,21)}static bytes22(e){return gs(e,22)}static bytes23(e){return gs(e,23)}static bytes24(e){return gs(e,24)}static bytes25(e){return gs(e,25)}static bytes26(e){return gs(e,26)}static bytes27(e){return gs(e,27)}static bytes28(e){return gs(e,28)}static bytes29(e){return gs(e,29)}static bytes30(e){return gs(e,30)}static bytes31(e){return gs(e,31)}static bytes32(e){return gs(e,32)}static address(e){return new ys(ps,"address",e)}static bool(e){return new ys(ps,"bool",!!e)}static bytes(e){return new ys(ps,"bytes",e)}static string(e){return new ys(ps,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new ys(ps,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===ms}static dereference(e,t){if(ys.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class ws extends wr{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=ys.dereference(t,"string");try{r=ds(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return ds(nr(e.readValue(),20))}}class bs extends wr{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function vs(e,t,r){let s=[];if(Array.isArray(r))s=r;else if(r&&"object"==typeof r){let e={};s=t.map((t=>{const s=t.localName;return Ot(s,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),Ot(!e[s],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),e[s]=!0,r[s]}))}else xt(!1,"invalid tuple value","tuple",r);xt(t.length===s.length,"types/value length mismatch","tuple",r);let n=new br,i=new br,o=[];t.forEach(((e,t)=>{let r=s[t];if(e.dynamic){let t=i.length;e.encode(i,r);let s=n.writeUpdatableValue();o.push((e=>{s(e+t)}))}else e.encode(n,r)})),o.forEach((e=>{e(n.length)}));let a=e.appendWriter(n);return a+=e.appendWriter(i),a}function Es(e,t){let r=[],s=[],n=e.subReader(0);return t.forEach((t=>{let i=null;if(t.dynamic){let r=e.readIndex(),s=n.subReader(r);try{i=t.decode(s)}catch(e){if(St(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(St(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(null==i)throw new Error("investigate");r.push(i),s.push(t.localName||null)})),mr.fromItems(r,s)}class As extends wr{coder;length;constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),Nt(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){const r=ys.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let s=this.length;-1===s&&(s=r.length,e.writeValue(r.length)),kt(r.length,s,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<r.length;e++)n.push(this.coder);return vs(e,n,r)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),Ot(t*ar<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*ar,length:e.dataLength}));let r=[];for(let e=0;e<t;e++)r.push(new bs(this.coder));return Es(e,r)}}class Cs extends wr{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=ys.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class _s extends wr{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Lt(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Ns extends _s{constructor(e){super("bytes",e)}decode(e){return Ht(super.decode(e))}}class Is extends wr{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),Nt(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=Lt(ys.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return Ht(e.readBytes(this.size))}}const Ss=new Uint8Array([]);class Ts extends wr{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(Ss)}decode(e){return e.readBytes(0),null}}const Ps=BigInt(0),Os=BigInt(1),xs=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class ks extends wr{size;signed;constructor(e,t,r){const s=(t?"int":"uint")+8*e;super(s,s,r,!1),Nt(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=Xt(ys.dereference(t,this.type)),s=Yt(xs,256);if(this.signed){let e=Yt(s,8*this.size-1);(r>e||r<-(e+Os))&&this._throwError("value out-of-bounds",t),r=Zt(r,256)}else(r<Ps||r>Yt(s,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=Yt(e.readValue(),8*this.size);return this.signed&&(t=Qt(t,8*this.size)),t}}function Rs(e,t,r,s,n){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let s=t+1;s<r.length&&r[s]>>6==2;s++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}const Us=Object.freeze({error:function(e,t,r,s,n){xt(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Rs,replace:function(e,t,r,s,n){return"OVERLONG"===e?(xt("number"==typeof n,"invalid bad code point for replacement","badCodepoint",n),s.push(n),0):(s.push(65533),Rs(e,t,r))}});function Ds(e,t){xt("string"==typeof e,"invalid string value","str",e),null!=t&&(function(e){Ot(Rt.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const s=e.charCodeAt(t);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(63&s|128);else if(55296==(64512&s)){t++;const n=e.charCodeAt(t);xt(t<e.length&&56320==(64512&n),"invalid surrogate pair","str",e);const i=65536+((1023&s)<<10)+(1023&n);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(63&s|128)}return new Uint8Array(r)}function Bs(e,t){return function(e,t){null==t&&(t=Us.error);const r=Bt(e,"bytes"),s=[];let n=0;for(;n<r.length;){const e=r[n++];if(!(e>>7)){s.push(e);continue}let i=null,o=null;if(192==(224&e))i=1,o=127;else if(224==(240&e))i=2,o=2047;else{if(240!=(248&e)){n+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",n-1,r,s);continue}i=3,o=65535}if(n-1+i>=r.length){n+=t("OVERRUN",n-1,r,s);continue}let a=e&(1<<8-i-1)-1;for(let e=0;e<i;e++){let e=r[n];if(128!=(192&e)){n+=t("MISSING_CONTINUE",n,r,s),a=null;break}a=a<<6|63&e,n++}null!==a&&(a>1114111?n+=t("OUT_OF_RANGE",n-1-i,r,s,a):a>=55296&&a<=57343?n+=t("UTF16_SURROGATE",n-1-i,r,s,a):a<=o?n+=t("OVERLONG",n-1-i,r,s,a):s.push(a))}return s}(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class Ls extends _s{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Ds(ys.dereference(t,"string")))}decode(e){return Bs(super.decode(e))}}class Ms extends wr{coders;constructor(e,t){let r=!1;const s=[];e.forEach((e=>{e.dynamic&&(r=!0),s.push(e.type)})),super("tuple","tuple("+s.join(",")+")",t,r),Nt(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});return this.coders.forEach(((r,s)=>{let n=r.localName;n&&1===t[n]&&("length"===n&&(n="_length"),null==e[n]&&(e[n]=e[s]))})),Object.freeze(e)}encode(e,t){const r=ys.dereference(t,"tuple");return vs(e,this.coders,r)}decode(e){return Es(e,this.coders)}}function js(e){return os(Ds(e))}function Fs(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const Hs=Fs("external public payable override".split(" ")),$s="constant external internal payable private public pure view override",Ws=Fs($s.split(" ")),zs="constructor error event fallback function receive struct",qs=Fs(zs.split(" ")),Vs="calldata memory storage payable indexed",Gs=Fs(Vs.split(" ")),Ks=Fs([zs,Vs,"tuple returns",$s].join(" ").split(" ")),Js={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Qs=new RegExp("^(\\s*)"),Zs=new RegExp("^([0-9]+)"),Ys=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Xs=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),en=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class tn{#n;#h;get offset(){return this.#n}get length(){return this.#h.length-this.#n}constructor(e){this.#n=0,this.#h=e.slice()}clone(){return new tn(this.#h)}reset(){this.#n=0}#d(e=0,t=0){return new tn(this.#h.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#d(this.#n+1,e.match+1);return this.#n=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#n<e.match-1;){const e=this.peek().linkNext;t.push(this.#d(this.#n+1,e)),this.#n=e}return this.#n=e.match+1,t}peek(){if(this.#n>=this.#h.length)throw new Error("out-of-bounds");return this.#h[this.#n]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#n++,e}toString(){const e=[];for(let t=this.#n;t<this.#h.length;t++){const r=this.#h[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function rn(e){const t=[],r=t=>{const r=i<e.length?JSON.stringify(e[i]):"$EOI";throw new Error(`invalid token ${r} at ${i}: ${t}`)};let s=[],n=[],i=0;for(;i<e.length;){let o=e.substring(i),a=o.match(Qs);a&&(i+=a[1].length,o=e.substring(i));const c={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=Js[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,"OPEN_PAREN"===l)s.push(t.length-1),n.push(t.length-1);else if("CLOSE_PAREN"==l)0===s.length&&r("no matching open bracket"),c.match=s.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=n.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===l)c.linkBack=n.pop(),t[c.linkBack].linkNext=t.length-1,n.push(t.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const r=t.pop().text;e=r+e,t[t.length-1].value=sr(r)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(a=o.match(Ys),a){if(c.text=a[1],i+=c.text.length,Ks.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(en)){c.type="TYPE";continue}c.type="ID"}else{if(a=o.match(Zs),!a)throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`);c.text=a[1],c.type="NUMBER",i+=c.text.length}}return new tn(t.map((e=>Object.freeze(e))))}function sn(e,t){let r=[];for(const s in t.keys())e.has(s)&&r.push(s);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function nn(e,t){if(t.peekKeyword(qs)){const r=t.pop().text;if(r!==e)throw new Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function on(e,t){const r=new Set;for(;;){const s=e.peekType("KEYWORD");if(null==s||t&&!t.has(s))break;if(e.pop(),r.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);r.add(s)}return Object.freeze(r)}function an(e){let t=on(e,Ws);return sn(t,Fs("constant payable nonpayable".split(" "))),sn(t,Fs("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function cn(e,t){return e.popParams().map((e=>An.from(e,t)))}function ln(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return Xt(e.pop().text);throw new Error("invalid gas")}return null}function un(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const hn=new RegExp(/^(.*)\[([0-9]*)\]$/);function dn(e){const t=e.match(en);if(xt(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const r=parseInt(t[2]);xt(0!==r&&r<=32,"invalid bytes length","type",e)}else if(t[3]){const r=parseInt(t[3]);xt(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",e)}return e}const pn={},fn=Symbol.for("_ethers_internal"),gn="_ParamTypeInternal",mn="_ErrorInternal",yn="_EventInternal",wn="_ConstructorInternal",bn="_FallbackInternal",vn="_FunctionInternal",En="_StructInternal";class An{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,s,n,i,o,a){if(Ut(e,pn,"ParamType"),Object.defineProperty(this,fn,{value:gn}),i&&(i=Object.freeze(i.slice())),"array"===s){if(null==o||null==a)throw new Error("")}else if(null!=o||null!=a)throw new Error("");if("tuple"===s){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");Nt(this,{name:t,type:r,baseType:s,indexed:n,components:i,arrayLength:o,arrayChildren:a})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map((e=>r.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map(((e,s)=>r.components[s].walk(e,t)))}return t(this.type,e)}#p(e,t,r,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this.arrayChildren,i=t.slice();return i.forEach(((t,s)=>{n.#p(e,t,r,(e=>{i[s]=e}))})),void s(i)}if(this.isTuple()){const n=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");i=n.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,s)=>{n[s].#p(e,t,r,(e=>{i[s]=e}))})),void s(i)}const n=r(this.type,t);n.then?e.push(async function(){s(await n)}()):s(n)}async walkAsync(e,t){const r=[],s=[e];return this.#p(r,e,t,(e=>{s[0]=e})),r.length&&await Promise.all(r),s[0]}static from(e,t){if(An.isParamType(e))return e;if("string"==typeof e)try{return An.from(rn(e),t)}catch(t){xt(!1,"invalid param type","obj",e)}else if(e instanceof tn){let r="",s="",n=null;on(e,Fs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(s="tuple",n=e.popParams().map((e=>An.from(e))),r=`tuple(${n.map((e=>e.format())).join(",")})`):(r=dn(e.popType("TYPE")),s=r);let i=null,o=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new An(pn,"",r,s,null,n,o,i),o=t.value,r+=t.text,s="array",n=null}let a=null;if(on(e,Gs).has("indexed")){if(!t)throw new Error("");a=!0}const c=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new An(pn,c,r,s,a,n,o,i)}const r=e.name;xt(!r||"string"==typeof r&&r.match(Xs),"invalid name","obj.name",r);let s=e.indexed;null!=s&&(xt(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let n=e.type,i=n.match(hn);if(i){const t=parseInt(i[2]||"-1"),o=An.from({type:i[1],components:e.components});return new An(pn,r||"",n,"array",s,null,t,o)}if("tuple"===n||n.startsWith("tuple(")||n.startsWith("(")){const t=null!=e.components?e.components.map((e=>An.from(e))):null;return new An(pn,r||"",n,"tuple",s,t,null,null)}return n=dn(e.type),new An(pn,r||"",n,n,s,null,null,null)}static isParamType(e){return e&&e[fn]===gn}}class Cn{type;inputs;constructor(e,t,r){Ut(e,pn,"Fragment"),Nt(this,{type:t,inputs:r=Object.freeze(r.slice())})}static from(e){if("string"==typeof e){try{Cn.from(JSON.parse(e))}catch(e){}return Cn.from(rn(e))}if(e instanceof tn)switch(e.peekKeyword(qs)){case"constructor":return Tn.from(e);case"error":return In.from(e);case"event":return Sn.from(e);case"fallback":case"receive":return Pn.from(e);case"function":return On.from(e);case"struct":return xn.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return Tn.from(e);case"error":return In.from(e);case"event":return Sn.from(e);case"fallback":case"receive":return Pn.from(e);case"function":return On.from(e);case"struct":return xn.from(e)}Ot(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}xt(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Tn.isFragment(e)}static isError(e){return In.isFragment(e)}static isEvent(e){return Sn.isFragment(e)}static isFunction(e){return On.isFragment(e)}static isStruct(e){return xn.isFragment(e)}}class _n extends Cn{name;constructor(e,t,r,s){super(e,t,s),xt("string"==typeof r&&r.match(Xs),"invalid identifier","name",r),s=Object.freeze(s.slice()),Nt(this,{name:r})}}function Nn(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class In extends _n{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,fn,{value:mn})}get selector(){return js(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+Nn(e,this.inputs)),t.join(" ")}static from(e){if(In.isFragment(e))return e;if("string"==typeof e)return In.from(rn(e));if(e instanceof tn){const t=nn("error",e),r=cn(e);return un(e),new In(pn,t,r)}return new In(pn,e.name,e.inputs?e.inputs.map(An.from):[])}static isFragment(e){return e&&e[fn]===mn}}class Sn extends _n{anonymous;constructor(e,t,r,s){super(e,"event",t,r),Object.defineProperty(this,fn,{value:yn}),Nt(this,{anonymous:s})}get topicHash(){return js(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+Nn(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map((e=>An.from(e))),new Sn(pn,e,t,!1).topicHash}static from(e){if(Sn.isFragment(e))return e;if("string"==typeof e)try{return Sn.from(rn(e))}catch(t){xt(!1,"invalid event fragment","obj",e)}else if(e instanceof tn){const t=nn("event",e),r=cn(e,!0),s=!!on(e,Fs(["anonymous"])).has("anonymous");return un(e),new Sn(pn,t,r,s)}return new Sn(pn,e.name,e.inputs?e.inputs.map((e=>An.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[fn]===yn}}class Tn extends Cn{payable;gas;constructor(e,t,r,s,n){super(e,t,r),Object.defineProperty(this,fn,{value:wn}),Nt(this,{payable:s,gas:n})}format(e){if(Ot(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${Nn(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(Tn.isFragment(e))return e;if("string"==typeof e)try{return Tn.from(rn(e))}catch(t){xt(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof tn){on(e,Fs(["constructor"]));const t=cn(e),r=!!on(e,Hs).has("payable"),s=ln(e);return un(e),new Tn(pn,"constructor",t,r,s)}return new Tn(pn,"constructor",e.inputs?e.inputs.map(An.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[fn]===wn}}class Pn extends Cn{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,fn,{value:bn}),Nt(this,{payable:r})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(Pn.isFragment(e))return e;if("string"==typeof e)try{return Pn.from(rn(e))}catch(t){xt(!1,"invalid fallback fragment","obj",e)}else if(e instanceof tn){const t=e.toString();if(xt(e.peekKeyword(Fs(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(Fs(["fallback","receive"]))){const t=cn(e);return xt(0===t.length,"receive cannot have arguments","obj.inputs",t),on(e,Fs(["payable"])),un(e),new Pn(pn,[],!0)}let r=cn(e);r.length?xt(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map((e=>e.format("minimal"))).join(", ")):r=[An.from("bytes")];const s=an(e);if(xt("nonpayable"===s||"payable"===s,"fallback cannot be constants","obj.stateMutability",s),on(e,Fs(["returns"])).has("returns")){const t=cn(e);xt(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return un(e),new Pn(pn,r,"payable"===s)}if("receive"===e.type)return new Pn(pn,[],!0);if("fallback"===e.type){const t=[An.from("bytes")],r="payable"===e.stateMutability;return new Pn(pn,t,r)}xt(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[fn]===bn}}class On extends _n{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,s,n,i){super(e,"function",t,s),Object.defineProperty(this,fn,{value:vn}),Nt(this,{constant:"view"===r||"pure"===r,gas:i,outputs:n=Object.freeze(n.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return js(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+Nn(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Nn(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map((e=>An.from(e))),new On(pn,e,"view",t,[],null).selector}static from(e){if(On.isFragment(e))return e;if("string"==typeof e)try{return On.from(rn(e))}catch(t){xt(!1,"invalid function fragment","obj",e)}else if(e instanceof tn){const t=nn("function",e),r=cn(e),s=an(e);let n=[];on(e,Fs(["returns"])).has("returns")&&(n=cn(e));const i=ln(e);return un(e),new On(pn,t,s,r,n,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new On(pn,e.name,t,e.inputs?e.inputs.map(An.from):[],e.outputs?e.outputs.map(An.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[fn]===vn}}class xn extends _n{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,fn,{value:En})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return xn.from(rn(e))}catch(t){xt(!1,"invalid struct fragment","obj",e)}else if(e instanceof tn){const t=nn("struct",e),r=cn(e);return un(e),new xn(pn,t,r)}return new xn(pn,e.name,e.inputs?e.inputs.map(An.from):[])}static isFragment(e){return e&&e[fn]===En}}const kn=new Map;kn.set(0,"GENERIC_PANIC"),kn.set(1,"ASSERT_FALSE"),kn.set(17,"OVERFLOW"),kn.set(18,"DIVIDE_BY_ZERO"),kn.set(33,"ENUM_RANGE_ERROR"),kn.set(34,"BAD_STORAGE_DATA"),kn.set(49,"STACK_UNDERFLOW"),kn.set(50,"ARRAY_RANGE_ERROR"),kn.set(65,"OUT_OF_MEMORY"),kn.set(81,"UNINITIALIZED_FUNCTION_CALL");const Rn=new RegExp(/^bytes([0-9]*)$/),Un=new RegExp(/^(u?int)([0-9]*)$/);let Dn=null,Bn=1024;class Ln{#f(e){if(e.isArray())return new As(this.#f(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Ms(e.components.map((e=>this.#f(e))),e.name);switch(e.baseType){case"address":return new ws(e.name);case"bool":return new Cs(e.name);case"string":return new Ls(e.name);case"bytes":return new Ns(e.name);case"":return new Ts(e.name)}let t=e.type.match(Un);if(t){let r=parseInt(t[2]||"256");return xt(0!==r&&r<=256&&r%8==0,"invalid "+t[1]+" bit length","param",e),new ks(r/8,"int"===t[1],e.name)}if(t=e.type.match(Rn),t){let r=parseInt(t[1]);return xt(0!==r&&r<=32,"invalid bytes length","param",e),new Is(r,e.name)}xt(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#f(An.from(e))));return new Ms(t,"_").defaultValue()}encode(e,t){kt(t.length,e.length,"types/values length mismatch");const r=e.map((e=>this.#f(An.from(e)))),s=new Ms(r,"_"),n=new br;return s.encode(n,t),n.data}decode(e,t,r){const s=e.map((e=>this.#f(An.from(e))));return new Ms(s,"_").decode(new vr(t,r,Bn))}static _setDefaultMaxInflation(e){xt("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Bn=e}static defaultAbiCoder(){return null==Dn&&(Dn=new Ln),Dn}static getBuiltinCallException(e,t,r){return function(e,t,r,s){let n="missing revert data",i=null,o=null;if(r){n="execution reverted";const e=Bt(r);if(r=Ht(r),0===e.length)n+=" (no data present; likely require(false) occurred",i="require(false)";else if(e.length%32!=4)n+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===Ht(e.slice(0,4)))try{i=s.decode(["string"],e.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},n+=`: ${JSON.stringify(i)}`}catch(e){n+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===Ht(e.slice(0,4)))try{const t=Number(s.decode(["uint256"],e.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[t]},i=`Panic due to ${kn.get(t)||"UNKNOWN"}(${t})`,n+=`: ${i}`}catch(e){n+=" (could not decode panic code)"}else n+=" (unknown custom error)"}const a={to:t.to?ds(t.to):null,data:t.data||"0x"};return t.from&&(a.from=ds(t.from)),Pt(n,"CALL_EXCEPTION",{action:e,data:r,reason:i,transaction:a,invocation:null,revert:o})}(e,t,r,Ln.defaultAbiCoder())}}function Mn(e){return e&&"function"==typeof e.getAddress}async function jn(e,t){const r=await t;return null!=r&&"0x0000000000000000000000000000000000000000"!==r||(Ot("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),xt(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),ds(r)}function Fn(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?ds(e):(Ot(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),jn(e,t.resolveName(e))):Mn(e)?jn(e,e.getAddress()):e&&"function"==typeof e.then?jn(e,e):void xt(!1,"unsupported addressable value","target",e)}const Hn=new Uint8Array(32);Hn.fill(0);const $n=BigInt(-1),Wn=BigInt(0),zn=BigInt(1),qn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Vn=nr(zn,32),Gn=nr(Wn,32),Kn={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Jn=["name","version","chainId","verifyingContract","salt"];function Qn(e){return function(t){return xt("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Zn={name:Qn("name"),version:Qn("version"),chainId:function(e){const t=Xt(e,"domain.chainId");return xt(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):or(t)},verifyingContract:function(e){try{return ds(e).toLowerCase()}catch(e){}xt(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=Bt(e,"domain.salt");return xt(32===t.length,'invalid domain value "salt"',"domain.salt",e),Ht(t)}};function Yn(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const r=""===t[1],s=parseInt(t[2]);xt(s%8==0&&0!==s&&s<=256&&t[2]===String(s),"invalid numeric width","type",e);const n=Yt(qn,r?s-1:s),i=r?(n+zn)*$n:Wn;return function(t){const s=Xt(t,"value");return xt(s>=i&&s<=n,`value out-of-bounds for ${e}`,"value",s),nr(r?Zt(s,256):s,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return xt(0!==r&&r<=32&&t[1]===String(r),"invalid bytes width","type",e),function(t){return xt(Bt(t).length===r,`invalid length for ${e}`,"value",t),function(e){const t=Bt(e),r=t.length%32;return r?$t([t,Hn.slice(r)]):Ht(t)}(t)}}}switch(e){case"address":return function(e){return Vt(ds(e),32)};case"bool":return function(e){return e?Vn:Gn};case"bytes":return function(e){return os(e)};case"string":return function(e){return js(e)}}return null}function Xn(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}function ei(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class ti{primaryType;#g;get types(){return JSON.parse(this.#g)}#m;#y;constructor(e){this.#m=new Map,this.#y=new Map;const t=new Map,r=new Map,s=new Map,n={};Object.keys(e).forEach((i=>{n[i]=e[i].map((({name:t,type:r})=>{let{base:s,index:n}=ei(r);return"int"!==s||e.int||(s="int256"),"uint"!==s||e.uint||(s="uint256"),{name:t,type:s+(n||"")}})),t.set(i,new Set),r.set(i,[]),s.set(i,new Set)})),this.#g=JSON.stringify(n);for(const s in n){const i=new Set;for(const o of n[s]){xt(!i.has(o.name),`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(s)}`,"types",e),i.add(o.name);const n=ei(o.type).base;xt(n!==s,`circular type reference to ${JSON.stringify(n)}`,"types",e),Yn(n)||(xt(r.has(n),`unknown type ${JSON.stringify(n)}`,"types",e),r.get(n).push(s),t.get(s).add(n))}}const i=Array.from(r.keys()).filter((e=>0===r.get(e).length));xt(0!==i.length,"missing primary type","types",e),xt(1===i.length,`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),Nt(this,{primaryType:i[0]}),function n(i,o){xt(!o.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e),o.add(i);for(const e of t.get(i))if(r.has(e)){n(e,o);for(const t of o)s.get(t).add(e)}o.delete(i)}(this.primaryType,new Set);for(const[e,t]of s){const r=Array.from(t);r.sort(),this.#m.set(e,Xn(e,n[e])+r.map((e=>Xn(e,n[e]))).join(""))}}getEncoder(e){let t=this.#y.get(e);return t||(t=this.#w(e),this.#y.set(e,t)),t}#w(e){{const t=Yn(e);if(t)return t}const t=ei(e).array;if(t){const e=t.prefix,r=this.getEncoder(e);return s=>{xt(-1===t.count||t.count===s.length,`array length mismatch; expected length ${t.count}`,"value",s);let n=s.map(r);return this.#m.has(e)&&(n=n.map(os)),os($t(n))}}const r=this.types[e];if(r){const t=js(this.#m.get(e));return e=>{const s=r.map((({name:t,type:r})=>{const s=this.getEncoder(r)(e[t]);return this.#m.has(r)?os(s):s}));return s.unshift(t),$t(s)}}xt(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#m.get(e);return xt(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return os(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Yn(e))return r(e,t);const s=ei(e).array;if(s)return xt(-1===s.count||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map((e=>this._visit(s.prefix,e,r)));const n=this.types[e];if(n)return n.reduce(((e,{name:s,type:n})=>(e[s]=this._visit(n,t[s],r),e)),{});xt(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ti(e)}static getPrimaryType(e){return ti.from(e).primaryType}static hashStruct(e,t,r){return ti.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(null==e[r])continue;const s=Kn[r];xt(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:s})}return t.sort(((e,t)=>Jn.indexOf(e.name)-Jn.indexOf(t.name))),ti.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return $t(["0x1901",ti.hashDomain(e),ti.from(t).hash(r)])}static hash(e,t,r){return os(ti.encode(e,t,r))}static async resolveNames(e,t,r,s){e=Object.assign({},e);for(const t in e)null==e[t]&&delete e[t];const n={};e.verifyingContract&&!Mt(e.verifyingContract,20)&&(n[e.verifyingContract]="0x");const i=ti.from(t);i.visit(r,((e,t)=>("address"!==e||Mt(t,20)||(n[t]="0x"),t)));for(const e in n)n[e]=await s(e);return e.verifyingContract&&n[e.verifyingContract]&&(e.verifyingContract=n[e.verifyingContract]),{domain:e,value:r=i.visit(r,((e,t)=>"address"===e&&n[t]?n[t]:t))}}static getPayload(e,t,r){ti.hashDomain(e);const s={},n=[];Jn.forEach((t=>{const r=e[t];null!=r&&(s[t]=Zn[t](r),n.push({name:t,type:Kn[t]}))}));const i=ti.from(t);t=i.types;const o=Object.assign({},t);return xt(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),o.EIP712Domain=n,i.encode(r),{types:o,domain:s,primaryType:i.primaryType,message:i.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/))return Ht(Bt(t));if(e.match(/^u?int/))return Xt(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return xt("string"==typeof t,"invalid string","value",t),t}xt(!1,"unsupported type","type",e)}))}}}function ri(e,t){return{address:ds(e),storageKeys:t.map(((e,t)=>(xt(Mt(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function si(e){if(Array.isArray(e))return e.map(((t,r)=>Array.isArray(t)?(xt(2===t.length,"invalid slot set",`value[${r}]`,t),ri(t[0],t[1])):(xt(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),ri(t.address,t.storageKeys))));xt(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return ri(t,Object.keys(r).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function ni(e){return async function(e,t){Ot(null==t||!t.cancelled,"request cancelled before sending","CANCELLED");const r=e.url.split(":")[0].toLowerCase();Ot("http"===r||"https"===r,`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),Ot("https"===r||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const n=new AbortController,i=setTimeout((()=>{s=Pt("request timeout","TIMEOUT"),n.abort()}),e.timeout);t&&t.addListener((()=>{s=Pt("request cancelled","CANCELLED"),n.abort()}));const o={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:n.signal};let a;try{a=await fetch(e.url,o)}catch(e){if(clearTimeout(i),s)throw s;throw e}clearTimeout(i);const c={};a.headers.forEach(((e,t)=>{c[t.toLowerCase()]=e}));const l=await a.arrayBuffer(),u=null==l?null:new Uint8Array(l);return{statusCode:a.status,statusMessage:a.statusText,headers:c,body:u}}}ni();let ii=ni();const oi=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),ai=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let ci=!1;async function li(e,t){try{const t=e.match(oi);if(!t)throw new Error("invalid data");return new mi(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return Bt(t)}(t[3]):Ds(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new mi(599,"BAD REQUEST (invalid data: URI)",{},null,new gi(e))}}function ui(e){return async function(t,r){try{const r=t.match(ai);if(!r)throw new Error("invalid link");return new gi(`${e}${r[2]}`)}catch(e){return new mi(599,"BAD REQUEST (invalid IPFS URI)",{},null,new gi(t))}}}const hi={data:li,ipfs:ui("https://gateway.ipfs.io/ipfs/")},di=new WeakMap;class pi{#b;#v;constructor(e){this.#b=[],this.#v=!1,di.set(e,(()=>{if(!this.#v){this.#v=!0;for(const e of this.#b)setTimeout((()=>{e()}),0);this.#b=[]}}))}addListener(e){Ot(!this.#v,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#b.push(e)}get cancelled(){return this.#v}checkSignal(){Ot(!this.cancelled,"cancelled","CANCELLED",{})}}function fi(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}class gi{#E;#A;#C;#_;#N;#I;#S;#T;#P;#O;#x;#k;#R;#U;#D;get url(){return this.#I}set url(e){this.#I=String(e)}get body(){return null==this.#S?null:new Uint8Array(this.#S)}set body(e){if(null==e)this.#S=void 0,this.#T=void 0;else if("string"==typeof e)this.#S=Ds(e),this.#T="text/plain";else if(e instanceof Uint8Array)this.#S=e,this.#T="application/octet-stream";else{if("object"!=typeof e)throw new Error("invalid body");this.#S=Ds(JSON.stringify(e)),this.#T="application/json"}}hasBody(){return null!=this.#S}get method(){return this.#_?this.#_:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#_=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#C);return this.#P&&(e.authorization=`Basic ${function(e){const t=Bt(e);let r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(Ds(this.#P))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#T&&(e["content-type"]=this.#T),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#C[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#C={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#P||null}setCredentials(e,t){xt(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#P=`${e}:${t}`}get allowGzip(){return this.#A}set allowGzip(e){this.#A=!!e}get allowInsecureAuthentication(){return!!this.#E}set allowInsecureAuthentication(e){this.#E=!!e}get timeout(){return this.#N}set timeout(e){xt(e>=0,"timeout must be non-zero","timeout",e),this.#N=e}get preflightFunc(){return this.#O||null}set preflightFunc(e){this.#O=e}get processFunc(){return this.#x||null}set processFunc(e){this.#x=e}get retryFunc(){return this.#k||null}set retryFunc(e){this.#k=e}get getUrlFunc(){return this.#D||ii}set getUrlFunc(e){this.#D=e}constructor(e){this.#I=String(e),this.#E=!1,this.#A=!0,this.#C={},this.#_="",this.#N=3e5,this.#U={slotInterval:250,maxAttempts:12},this.#D=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#S?Ht(this.#S):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#U.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#U.maxAttempts=e.maxAttempts)}async#B(e,t,r,s,n){if(e>=this.#U.maxAttempts)return n.makeServerError("exceeded maximum retry limit");Ot(yi()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(r);let i=this.clone();const o=(i.url.split(":")[0]||"").toLowerCase();if(o in hi){const e=await hi[o](i.url,fi(s.#R));if(e instanceof mi){let t=e;if(this.processFunc){fi(s.#R);try{t=await this.processFunc(i,t)}catch(e){null!=e.throttle&&"number"==typeof e.stall||t.makeServerError("error in post-processing function",e).assertOk()}}return t}i=e}this.preflightFunc&&(i=await this.preflightFunc(i));const a=await this.getUrlFunc(i,fi(s.#R));let c=new mi(a.statusCode,a.statusMessage,a.headers,a.body,s);if(301===c.statusCode||302===c.statusCode){try{const r=c.headers.location||"";return i.redirect(r).#B(e+1,t,0,s,c)}catch(e){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,e))){const r=c.headers["retry-after"];let n=this.#U.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(n=parseInt(r)),i.clone().#B(e+1,t,n,s,c)}if(this.processFunc){fi(s.#R);try{c=await this.processFunc(i,c)}catch(r){null!=r.throttle&&"number"==typeof r.stall||c.makeServerError("error in post-processing function",r).assertOk();let n=this.#U.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return r.stall>=0&&(n=r.stall),i.clone().#B(e+1,t,n,s,c)}}return c}send(){return Ot(null==this.#R,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#R=new pi(this),this.#B(0,yi()+this.timeout,0,this,new mi(0,"",{},null,this))}cancel(){Ot(null!=this.#R,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=di.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Ot("GET"===this.method&&("https"!==t||"http"!==r)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new gi(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#C=Object.assign({},this.#C),this.#S&&(s.#S=new Uint8Array(this.#S)),s.#T=this.#T,s}clone(){const e=new gi(this.url);return e.#_=this.#_,this.#S&&(e.#S=this.#S),e.#T=this.#T,e.#C=Object.assign({},this.#C),e.#P=this.#P,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#O=this.#O,e.#x=this.#x,e.#k=this.#k,e.#U=Object.assign({},this.#U),e.#D=this.#D,e}static lockConfig(){ci=!0}static getGateway(e){return hi[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(ci)throw new Error("gateways locked");hi[e]=t}static registerGetUrl(e){if(ci)throw new Error("gateways locked");ii=e}static createGetUrlFunc(e){return ni()}static createDataGateway(){return li}static createIpfsGatewayFunc(e){return ui(e)}}class mi{#L;#M;#C;#S;#j;#F;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#S?Ht(this.#S):"null"}>`}get statusCode(){return this.#L}get statusMessage(){return this.#M}get headers(){return Object.assign({},this.#C)}get body(){return null==this.#S?null:new Uint8Array(this.#S)}get bodyText(){try{return null==this.#S?"":Bs(this.#S)}catch(e){Ot(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){Ot(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const s=t[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,s,n){this.#L=e,this.#M=t,this.#C=Object.keys(r).reduce(((e,t)=>(e[t.toLowerCase()]=String(r[t]),e)),{}),this.#S=null==s?null:new Uint8Array(s),this.#j=n||null,this.#F={message:""}}makeServerError(e,t){let r;r=e?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:`CLIENT ESCALATED SERVER ERROR (${e=`${this.statusCode} ${this.statusMessage}`})`;const s=new mi(599,r,this.headers,this.body,this.#j||void 0);return s.#F={message:e,error:t},s}throwThrottleError(e,t){null==t?t=-1:xt(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw Nt(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#S}get request(){return this.#j}ok(){return""===this.#F.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#F;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{this.#S&&(s=Bs(this.#S))}catch(e){}Ot(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function yi(){return(new Date).getTime()}const wi="0x0000000000000000000000000000000000000000";class bi{fragment;name;signature;topic;args;constructor(e,t,r){const s=e.name,n=e.format();Nt(this,{fragment:e,name:s,signature:n,topic:t,args:r})}}class vi{fragment;name;args;signature;selector;value;constructor(e,t,r,s){const n=e.name,i=e.format();Nt(this,{fragment:e,name:n,args:r,signature:i,selector:t,value:s})}}class Ei{fragment;name;args;signature;selector;constructor(e,t,r){const s=e.name,n=e.format();Nt(this,{fragment:e,name:s,args:r,signature:n,selector:t})}}class Ai{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){Nt(this,{hash:e,_isIndexed:!0})}}const Ci={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},_i={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&Ci[e.toString()]&&(t=Ci[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class Ni{fragments;deploy;fallback;receive;#H;#$;#W;#z;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#W=new Map,this.#H=new Map,this.#$=new Map;const r=[];for(const e of t)try{r.push(Cn.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}Nt(this,{fragments:Object.freeze(r)});let s=null,n=!1;this.#z=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let r;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void Nt(this,{deploy:e});case"fallback":return void(0===e.inputs.length?n=!0:(xt(!s||e.payable!==s.payable,"conflicting fallback fragments",`fragments[${t}]`,e),s=e,n=s.payable));case"function":r=this.#W;break;case"event":r=this.#$;break;case"error":r=this.#H;break;default:return}const i=e.format();r.has(i)||r.set(i,e)})),this.deploy||Nt(this,{deploy:Tn.from("constructor()")}),Nt(this,{fallback:s,receive:n})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return Ln.defaultAbiCoder()}#q(e,t,r){if(Mt(e)){const t=e.toLowerCase();for(const e of this.#W.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,r]of this.#W)t.split("(")[0]===e&&s.push(r);if(t){const e=t.length>0?t[t.length-1]:null;let r=t.length,n=!0;ys.isTyped(e)&&"overrides"===e.type&&(n=!1,r--);for(let e=s.length-1;e>=0;e--){const t=s[e].inputs.length;t===r||n&&t===r-1||s.splice(e,1)}for(let e=s.length-1;e>=0;e--){const r=s[e].inputs;for(let n=0;n<t.length;n++)if(ys.isTyped(t[n])){if(n>=r.length){if("overrides"===t[n].type)continue;s.splice(e,1);break}if(t[n].type!==r[n].baseType){s.splice(e,1);break}}}}if(1===s.length&&t&&t.length!==s[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&s.splice(0,1)}return 0===s.length?null:(s.length>1&&r&&xt(!1,`ambiguous function description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),s[0])}return this.#W.get(On.from(e).format())||null}getFunctionName(e){const t=this.#q(e,null,!1);return xt(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#q(e,null,!1)}getFunction(e,t){return this.#q(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#W.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const s=t[r];e(this.#W.get(s),r)}}#V(e,t,r){if(Mt(e)){const t=e.toLowerCase();for(const e of this.#$.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,r]of this.#$)t.split("(")[0]===e&&s.push(r);if(t){for(let e=s.length-1;e>=0;e--)s[e].inputs.length<t.length&&s.splice(e,1);for(let e=s.length-1;e>=0;e--){const r=s[e].inputs;for(let n=0;n<t.length;n++)if(ys.isTyped(t[n])&&t[n].type!==r[n].baseType){s.splice(e,1);break}}}return 0===s.length?null:(s.length>1&&r&&xt(!1,`ambiguous event description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),s[0])}return this.#$.get(Sn.from(e).format())||null}getEventName(e){const t=this.#V(e,null,!1);return xt(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#V(e,null,!1)}getEvent(e,t){return this.#V(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#$.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const s=t[r];e(this.#$.get(s),r)}}getError(e,t){if(Mt(e)){const t=e.toLowerCase();if(_i[t])return In.from(_i[t].signature);for(const e of this.#H.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[r,s]of this.#H)r.split("(")[0]===e&&t.push(s);return 0===t.length?"Error"===e?In.from("error Error(string)"):"Panic"===e?In.from("error Panic(uint256)"):null:(t.length>1&&xt(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e),t[0])}if("Error(string)"===(e=In.from(e).format()))return In.from("error Error(string)");if("Panic(uint256)"===e)return In.from("error Panic(uint256)");return this.#H.get(e)||null}forEachError(e){const t=Array.from(this.#H.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const s=t[r];e(this.#H.get(s),r)}}_decodeParams(e,t){return this.#z.decode(e,t)}_encodeParams(e,t){return this.#z.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);xt(t,"unknown error","fragment",e),e=t}return xt(zt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,zt(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);xt(t,"unknown error","fragment",e),e=t}return $t([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);xt(t,"unknown function","fragment",e),e=t}return xt(zt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,zt(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);xt(t,"unknown function","fragment",e),e=t}return $t([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);xt(t,"unknown function","fragment",e),e=t}let r="invalid length for result data";const s=Lt(t);if(s.length%32==0)try{return this.#z.decode(e.outputs,s)}catch(e){r="could not decode result data"}Ot(!1,r,"BAD_DATA",{value:Ht(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=Bt(e,"data"),s=Ln.getBuiltinCallException("call",t,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const e=Ht(r.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#z.decode(t.inputs,r.slice(4));s.revert={name:t.name,signature:t.format(),args:e},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch(e){s.message="execution reverted (coult not decode custom error)"}}const n=this.parseTransaction(t);return n&&(s.invocation={method:n.name,signature:n.signature,args:n.args}),s}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);xt(t,"unknown function","fragment",e),e=t}return Ht(this.#z.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);xt(t,"unknown event","eventFragment",e),e=t}Ot(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(e,t)=>"string"===e.type?js(t):"bytes"===e.type?os(Ht(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=nr(t):e.type.match(/^bytes/)?t=qt(t,32,!1):"address"===e.type&&this.#z.encode(["address"],[t]),Vt(Ht(t),32));for(t.forEach(((t,n)=>{const i=e.inputs[n];i.indexed?null==t?r.push(null):"array"===i.baseType||"tuple"===i.baseType?xt(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?r.push(t.map((e=>s(i,e)))):r.push(s(i,t)):xt(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);xt(t,"unknown event","eventFragment",e),e=t}const r=[],s=[],n=[];return e.anonymous||r.push(e.topicHash),xt(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const o=t[i];if(e.indexed)if("string"===e.type)r.push(js(o));else if("bytes"===e.type)r.push(os(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");r.push(this.#z.encode([e.type],[o]))}else s.push(e),n.push(o)})),{data:this.#z.encode(s,n),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e){const t=this.getEvent(e);xt(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){const t=e.topicHash;xt(Mt(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],n=[],i=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(s.push(An.from({type:"bytes32",name:e.name})),i.push(!0)):(s.push(e),i.push(!1)):(n.push(e),i.push(!1))}));const o=null!=r?this.#z.decode(s,$t(r)):null,a=this.#z.decode(n,t,!0),c=[],l=[];let u=0,h=0;return e.inputs.forEach(((e,t)=>{let r=null;if(e.indexed)if(null==o)r=new Ai(null);else if(i[t])r=new Ai(o[h++]);else try{r=o[h++]}catch(e){r=e}else try{r=a[u++]}catch(e){r=e}c.push(r),l.push(e.name||null)})),mr.fromItems(c,l)}parseTransaction(e){const t=Bt(e.data,"tx.data"),r=Xt(null!=e.value?e.value:0,"tx.value"),s=this.getFunction(Ht(t.slice(0,4)));if(!s)return null;const n=this.#z.decode(s.inputs,t.slice(4));return new vi(s,s.selector,n,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new bi(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Ht(e),r=this.getError(zt(t,0,4));if(!r)return null;const s=this.#z.decode(r.inputs,zt(t,4));return new Ei(r,r.selector,s)}static from(e){return e instanceof Ni?e:"string"==typeof e?new Ni(JSON.parse(e)):"function"==typeof e.formatJson?new Ni(e.formatJson()):"function"==typeof e.format?new Ni(e.format("json")):new Ni(e)}}const Ii=BigInt(0);function Si(e){return null==e?null:e}function Ti(e){return null==e?null:e.toString()}class Pi{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){Nt(this,{gasPrice:Si(e),maxFeePerGas:Si(t),maxPriorityFeePerGas:Si(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Ti(e),maxFeePerGas:Ti(t),maxPriorityFeePerGas:Ti(r)}}}function Oi(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=Ht(e.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of r)s in e&&null!=e[s]&&(t[s]=Xt(e[s],`request.${s}`));const s="type,nonce".split(/,/);for(const r of s)r in e&&null!=e[r]&&(t[r]=sr(e[r],`request.${r}`));return e.accessList&&(t.accessList=si(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map((e=>jt(e)?Ht(e):Object.assign({},e)))),t}class xi{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#G;constructor(e,t){this.#G=e.transactions.map((e=>"string"!=typeof e?new Ui(e,t):e)),Nt(this,{provider:t,hash:Si(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Si(e.prevRandao),extraData:e.extraData,baseFeePerGas:Si(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#G.map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=this.#G.slice();return 0===e.length?[]:(Ot("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:s,gasUsed:n,hash:i,miner:o,prevRandao:a,nonce:c,number:l,parentHash:u,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:p,timestamp:f,transactions:g}=this;return{_type:"Block",baseFeePerGas:Ti(e),difficulty:Ti(t),extraData:r,gasLimit:Ti(s),gasUsed:Ti(n),blobGasUsed:Ti(this.blobGasUsed),excessBlobGas:Ti(this.excessBlobGas),hash:i,miner:o,prevRandao:a,nonce:c,number:l,parentHash:u,timestamp:f,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:p,transactions:g}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#G.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#G[e];else{const r=e.toLowerCase();for(const e of this.#G){if("string"==typeof e){if(e!==r)continue;t=e;break}if(e.hash!==r){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;xt(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:this.hash,number:this.number}}}class ki{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const r=Object.freeze(e.topics.slice());Nt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:s,index:n,removed:i,topics:o,transactionHash:a,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:s,index:n,removed:i,topics:o,transactionHash:a,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Ot(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Ot(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Ot(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class Ri{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#K;constructor(e,t){this.#K=Object.freeze(e.logs.map((e=>new ki(e,t))));let r=Ii;null!=e.effectiveGasPrice?r=e.effectiveGasPrice:null!=e.gasPrice&&(r=e.gasPrice),Nt(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#K}toJSON(){const{to:e,from:t,contractAddress:r,hash:s,index:n,blockHash:i,blockNumber:o,logsBloom:a,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:o,contractAddress:r,cumulativeGasUsed:Ti(this.cumulativeGasUsed),from:t,gasPrice:Ti(this.gasPrice),blobGasUsed:Ti(this.blobGasUsed),blobGasPrice:Ti(this.blobGasPrice),gasUsed:Ti(this.gasUsed),hash:s,index:n,logs:c,logsBloom:a,root:u,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Bi(this)}reorderedEvent(e){return Ot(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Di(this,e)}}class Ui{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;#J;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.#J=-1}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:s,type:n,to:i,from:o,nonce:a,data:c,signature:l,accessList:u,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:Ti(this.chainId),data:c,from:o,gasLimit:Ti(this.gasLimit),gasPrice:Ti(this.gasPrice),hash:s,maxFeePerGas:Ti(this.maxFeePerGas),maxPriorityFeePerGas:Ti(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ti(this.maxFeePerBlobGas),nonce:a,signature:l,to:i,index:r,type:n,value:Ti(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await _t({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=null==e?1:e,s=null==t?0:t;let n=this.#J,i=-1,o=-1===n;const a=async()=>{if(o)return null;const{blockNumber:e,nonce:t}=await _t({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(n=e);if(o)return null;const s=await this.getTransaction();if(!s||null==s.blockNumber)for(-1===i&&(i=n-3,i<this.#J&&(i=this.#J));i<=e;){if(o)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let s=0;s<t.length;s++){const i=await t.getTransaction(s);if(i.from===this.from&&i.nonce===this.nonce){if(o)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<r)return;let s="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?s="repriced":"0x"===i.data&&i.from===i.to&&i.value===Ii&&(s="cancelled"),Ot(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:i.replaceableTransaction(n),hash:i.hash,receipt:t})}}i++}},c=e=>{if(null==e||0!==e.status)return e;Ot(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},l=await this.provider.getTransactionReceipt(this.hash);if(0===r)return c(l);if(l){if(await l.confirmations()>=r)return c(l)}else if(await a(),0===r)return null;const u=new Promise(((e,t)=>{const i=[],l=()=>{i.forEach((e=>e()))};if(i.push((()=>{o=!0})),s>0){const e=setTimeout((()=>{l(),t(Pt("wait for transaction timeout","TIMEOUT"))}),s);i.push((()=>{clearTimeout(e)}))}const u=async s=>{if(await s.confirmations()>=r){l();try{e(c(s))}catch(e){t(e)}}};if(i.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),n>=0){const e=async()=>{try{await a()}catch(e){if(St(e,"TRANSACTION_REPLACED"))return l(),void t(e)}o||this.provider.once("block",e)};i.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return Ot(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Bi(this)}reorderedEvent(e){return Ot(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ot(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Di(this,e)}replaceableTransaction(e){xt(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Ui(this,this.provider);return t.#J=e,t}}function Di(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Bi(e){return{orphan:"drop-transaction",tx:e}}class Li{filter;emitter;#Q;constructor(e,t,r){this.#Q=t,Nt(this,{emitter:e,filter:r})}async removeListener(){null!=this.#Q&&await this.emitter.off(this.filter,this.#Q)}}class Mi extends ki{interface;fragment;args;constructor(e,t,r){super(e,e.provider),Nt(this,{args:t.decodeEventLog(r,e.data,e.topics),fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class ji extends ki{error;constructor(e,t){super(e,e.provider),Nt(this,{error:t})}}class Fi extends Ri{#Z;constructor(e,t,r){super(r,t),this.#Z=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#Z.getEvent(e.topics[0]):null;if(t)try{return new Mi(e,this.#Z,t)}catch(t){return new ji(e,t)}return e}))}}class Hi extends Ui{#Z;constructor(e,t,r){super(r,t),this.#Z=e}async wait(e,t){const r=await super.wait(e,t);return null==r?null:new Fi(this.#Z,this.provider,r)}}class $i extends Li{log;constructor(e,t,r,s){super(e,t,r),Nt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Wi extends $i{constructor(e,t,r,s,n){super(e,t,r,new Mi(n,e.interface,s)),Nt(this,{args:e.interface.decodeEventLog(s,this.log.data,this.log.topics),fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const zi=BigInt(0);function qi(e){return e&&"function"==typeof e.call}function Vi(e){return e&&"function"==typeof e.estimateGas}function Gi(e){return e&&"function"==typeof e.resolveName}function Ki(e){return e&&"function"==typeof e.sendTransaction}function Ji(e){if(null!=e){if(Gi(e))return e;if(e.provider)return e.provider}}class Qi{#Y;fragment;constructor(e,t,r){if(Nt(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const s=Zi(e.runner,"resolveName"),n=Gi(s)?s:null;this.#Y=async function(){const s=await Promise.all(t.inputs.map(((e,t)=>null==r[t]?null:e.walkAsync(r[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>Fn(e,n)))):Fn(t,n):t)))));return e.interface.encodeFilterTopics(t,s)}()}getTopicFilter(){return this.#Y}}function Zi(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function Yi(e){return null==e?null:e.provider||null}async function Xi(e,t){const r=ys.dereference(e,"overrides");xt("object"==typeof r,"invalid overrides parameter","overrides",e);const s=Oi(r);return xt(null==s.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),xt(null==s.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}function eo(e){const t=async function(t){const r=await Xi(t,["data"]);r.to=await e.getAddress(),r.from&&(r.from=await Fn(r.from,Ji(e.runner)));const s=e.interface,n=Xt(r.value||zi,"overrides.value")===zi,i="0x"===(r.data||"0x");return!s.fallback||s.fallback.payable||!s.receive||i||n||xt(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),xt(s.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),xt(s.receive||s.fallback&&s.fallback.payable||n,"cannot send value to non-payable fallback","overrides.value",r.value),xt(s.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){const s=e.runner;Ot(Ki(s),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const n=await s.sendTransaction(await t(r)),i=Yi(e.runner);return new Hi(e.interface,i,n)},s=async e=>await r(e);return Nt(s,{_contract:e,estimateGas:async function(r){const s=Zi(e.runner,"estimateGas");return Ot(Vi(s),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await s.estimateGas(await t(r))},populateTransaction:t,send:r,staticCall:async function(r){const s=Zi(e.runner,"call");Ot(qi(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const n=await t(r);try{return await s.call(n)}catch(t){if(Tt(t)&&t.data)throw e.interface.makeError(t.data,n);throw t}}}),s}const to=Symbol.for("_ethersInternal_contract"),ro=new WeakMap;function so(e){return ro.get(e[to])}async function no(e,t){let r,s=null;if(Array.isArray(t)){const s=function(t){if(Mt(t,32))return t;const r=e.interface.getEvent(t);return xt(r,"unknown fragment","name",t),r.topicHash};r=t.map((e=>null==e?null:Array.isArray(e)?e.map(s):s(e)))}else"*"===t?r=[null]:"string"==typeof t?Mt(t,32)?r=[t]:(s=e.interface.getEvent(t),xt(s,"unknown fragment","event",t),r=[s.topicHash]):(n=t)&&"object"==typeof n&&"getTopicFilter"in n&&"function"==typeof n.getTopicFilter&&n.fragment?r=await t.getTopicFilter():"fragment"in t?(s=t.fragment,r=[s.topicHash]):xt(!1,"unknown event name","event",t);var n;return r=r.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})),{fragment:s,tag:r.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:r}}async function io(e,t){const{subs:r}=so(e);return r.get((await no(e,t)).tag)||null}async function oo(e,t,r){const s=Yi(e.runner);Ot(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:n,tag:i,topics:o}=await no(e,r),{addr:a,subs:c}=so(e);let l=c.get(i);if(!l){const t={address:a||e,topics:o},u=t=>{let s=n;if(null==s)try{s=e.interface.getEvent(t.topics[0])}catch(e){}if(s){const i=s,o=n?e.interface.decodeEventLog(n,t.data,t.topics):[];co(e,r,o,(s=>new Wi(e,s,r,i,t)))}else co(e,r,[],(s=>new $i(e,s,r,t)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(s.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),s.off(t,u)}},c.set(i,l)}return l}let ao=Promise.resolve();async function co(e,t,r,s){try{await ao}catch(e){}const n=async function(e,t,r,s){await ao;const n=await io(e,t);if(!n)return!1;const i=n.listeners.length;return n.listeners=n.listeners.filter((({listener:t,once:n})=>{const i=Array.from(r);s&&i.push(s(n?null:t));try{t.call(e,...i)}catch(e){}return!n})),0===n.listeners.length&&(n.stop(),so(e).subs.delete(n.tag)),i>0}(e,t,r,s);return ao=n,await n}const lo=["then"];class uo{target;interface;runner;filters;[to];fallback;constructor(e,t,r,s){xt("string"==typeof e||Mn(e),"invalid value for Contract target","target",e),null==r&&(r=null);const n=Ni.from(t);let i;Nt(this,{target:e,runner:r,interface:n}),Object.defineProperty(this,to,{value:{}});let o=null,a=null;if(s){const e=Yi(r);a=new Hi(this.interface,e,s)}let c=new Map;if("string"==typeof e)if(Mt(e))o=e,i=Promise.resolve(e);else{const t=Zi(r,"resolveName");if(!Gi(t))throw Pt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=t.resolveName(e).then((t=>{if(null==t)throw Pt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return so(this).addr=t,t}))}else i=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return so(this).addr=e,e}));var l;l={addrPromise:i,addr:o,deployTx:a,subs:c},ro.set(this[to],l);const u=new Proxy({},{get:(e,t,r)=>{if("symbol"==typeof t||lo.indexOf(t)>=0)return Reflect.get(e,t,r);try{return this.getEvent(t)}catch(e){if(!St(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>lo.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return Nt(this,{filters:u}),Nt(this,{fallback:n.receive||n.fallback?eo(this):null}),new Proxy(this,{get:(e,t,r)=>{if("symbol"==typeof t||t in e||lo.indexOf(t)>=0)return Reflect.get(e,t,r);try{return e.getFunction(t)}catch(e){if(!St(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||lo.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new uo(this.target,this.interface,e)}attach(e){return new uo(e,this.interface,this.runner)}async getAddress(){return await so(this).addrPromise}async getDeployedCode(){const e=Yi(this.runner);Ot(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=Yi(this.runner);return Ot(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,r)=>{const s=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",s)}catch(e){r(e)}};s()}))}deploymentTransaction(){return so(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const r=function(...r){const s=e.interface.getFunction(t,r);return Ot(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),s},s=async function(...t){const s=r(...t);let n={};if(s.inputs.length+1===t.length&&(n=await Xi(t.pop()),n.from&&(n.from=await Fn(n.from,Ji(e.runner)))),s.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await async function(e,t,r){const s=Zi(e,"resolveName"),n=Gi(s)?s:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(r[t],((e,t)=>(t=ys.dereference(t,e),"address"===e?Fn(t,n):t))))))}(e.runner,s.inputs,t);return Object.assign({},n,await _t({to:e.getAddress(),data:e.interface.encodeFunctionData(s,i)}))},n=async function(...e){const t=await o(...e);return 1===t.length?t[0]:t},i=async function(...t){const r=e.runner;Ot(Ki(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const n=await r.sendTransaction(await s(...t)),i=Yi(e.runner);return new Hi(e.interface,i,n)},o=async function(...t){const n=Zi(e.runner,"call");Ot(qi(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await s(...t);let o="0x";try{o=await n.call(i)}catch(t){if(Tt(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}const a=r(...t);return e.interface.decodeFunctionResult(a,o)},a=async(...e)=>r(...e).constant?await n(...e):await i(...e);return Nt(a,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:async function(...t){const r=Zi(e.runner,"estimateGas");return Ot(Vi(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await s(...t))},populateTransaction:s,send:i,staticCall:n,staticCallResult:o}),Object.defineProperty(a,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=e.interface.getFunction(t);return Ot(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),a}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const r=function(...r){const s=e.interface.getEvent(t,r);return Ot(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),s},s=function(...t){return new Qi(e,r(...t),t)};return Nt(s,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=e.interface.getEvent(t);return Ot(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),s}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){null==t&&(t=0),null==r&&(r="latest");const{addr:s,addrPromise:n}=so(this),i=s||await n,{fragment:o,topics:a}=await no(this,e),c={address:i,topics:a,fromBlock:t,toBlock:r},l=Yi(this.runner);return Ot(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((e=>{let t=o;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new Mi(e,this.interface,t)}catch(t){return new ji(e,t)}return new ki(e,l)}))}async on(e,t){const r=await oo(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await oo(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await co(this,e,t,null)}async listenerCount(e){if(e){const t=await io(this,e);return t?t.listeners.length:0}const{subs:t}=so(this);let r=0;for(const{listeners:e}of t.values())r+=e.length;return r}async listeners(e){if(e){const t=await io(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=so(this);let r=[];for(const{listeners:e}of t.values())r=r.concat(e.map((({listener:e})=>e)));return r}async off(e,t){const r=await io(this,e);if(!r)return this;if(t){const e=r.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&r.listeners.splice(e,1)}return null!=t&&0!==r.listeners.length||(r.stop(),so(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await io(this,e);if(!t)return this;t.stop(),so(this).subs.delete(t.tag)}else{const{subs:e}=so(this);for(const{tag:t,stop:r}of e.values())r(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends uo{constructor(t,r=null){super(t,e,r)}}}static from(e,t,r){return null==r&&(r=null),new this(e,t,r)}}class ho extends(function(){return uo}()){}const po=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function fo(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let s=r(),n=1,i=[0,1];for(let e=1;e<s;e++)i.push(n+=r());let o=r(),a=t;t+=o;let c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const h=2**31,d=h>>>1,p=d>>1,f=h-1;let g=0;for(let e=0;e<31;e++)g=g<<1|u();let m=[],y=0,w=h;for(;;){let e=Math.floor(((g-y+1)*n-1)/w),t=0,r=s;for(;r-t>1;){let s=t+r>>>1;e<i[s]?r=s:t=s}if(0==t)break;m.push(t);let o=y+Math.floor(w*i[t]/n),a=y+Math.floor(w*i[t+1]/n)-1;for(;0==((o^a)&d);)g=g<<1&f|u(),o=o<<1&f,a=a<<1&f|1;for(;o&~a&p;)g=g&d|g<<1&f>>>1|u(),o=o<<1^d,a=(a^d)<<1|d|1;y=o,w=1+a-o}let b=s-4;return m.map((t=>{switch(t-b){case 3:return b+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return b+256+(e[a++]<<8|e[a++]);case 1:return b+e[a++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,r)=>t[e.charCodeAt(0)]=r));let r=e.length,s=new Uint8Array(6*r>>3);for(let n=0,i=0,o=0,a=0;n<r;n++)a=a<<6|t[e.charCodeAt(n)],o+=6,o>=8&&(s[i++]=a>>(o-=8));return s}(e)))}function go(e){return 1&e?~e>>1:e>>1}function mo(e,t){let r=Array(e);for(let s=0,n=0;s<e;s++)r[s]=n+=go(t());return r}function yo(e,t=0){let r=[];for(;;){let s=e(),n=e();if(!n)break;t+=s;for(let e=0;e<n;e++)r.push(t+e);t+=n+1}return r}function wo(e){return vo((()=>{let t=yo(e);if(t.length)return t}))}function bo(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(Ao(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(Co(r,e))}return t.flat()}function vo(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function Eo(e,t,r){let s=Array(e).fill().map((()=>[]));for(let n=0;n<t;n++)mo(e,r).forEach(((e,t)=>s[t].push(e)));return s}function Ao(e,t){let r=1+t(),s=t(),n=vo(t);return Eo(n.length,1+e,t).flatMap(((e,t)=>{let[i,...o]=e;return Array(n[t]).fill().map(((e,t)=>{let n=t*s;return[i+t*r,o.map((e=>e+n))]}))}))}function Co(e,t){return Eo(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function _o(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function No(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let s=0;s<t;)r.push(String.fromCodePoint(...e.slice(s,s+=4096)));return r.join("")}function Io(e,t){let r=e.length,s=r-t.length;for(let n=0;0==s&&n<r;n++)s=e[n]-t[n];return s}const So=44032,To=4352,Po=4449,Oo=4519;function xo(e){return e>>24&255}function ko(e){return 16777215&e}let Ro,Uo,Do,Bo;function Lo(e){return e>=So&&e<55204}function Mo(e,t){if(e>=To&&e<4371&&t>=Po&&t<4470)return So+588*(e-To)+28*(t-Po);if(Lo(e)&&t>Oo&&t<4547&&(e-So)%28==0)return e+(t-Oo);{let r=Bo.get(e);return r&&(r=r.get(t),r)?r:-1}}function jo(e){Ro||function(){let e=fo("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");Ro=new Map(wo(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),Uo=new Set(yo(e)),Do=new Map,Bo=new Map;for(let[t,r]of bo(e)){if(!Uo.has(t)&&2==r.length){let[e,s]=r,n=Bo.get(e);n||(n=new Map,Bo.set(e,n)),n.set(s,t)}Do.set(t,r.reverse())}}();let t=[],r=[],s=!1;function n(e){let r=Ro.get(e);r&&(s=!0,e|=r),t.push(e)}for(let s of e)for(;;){if(s<128)t.push(s);else if(Lo(s)){let e=s-So,t=e%588/28|0,r=e%28;n(To+(e/588|0)),n(Po+t),r>0&&n(Oo+r)}else{let e=Do.get(s);e?r.push(...e):n(s)}if(!r.length)break;s=r.pop()}if(s&&t.length>1){let e=xo(t[0]);for(let r=1;r<t.length;r++){let s=xo(t[r]);if(0==s||e<=s){e=s;continue}let n=r-1;for(;;){let r=t[n+1];if(t[n+1]=t[n],t[n]=r,!n)break;if(e=xo(t[--n]),e<=s)break}e=xo(t[r])}}return t}function Fo(e){return jo(e).map(ko)}function Ho(e){return function(e){let t=[],r=[],s=-1,n=0;for(let i of e){let e=xo(i),o=ko(i);if(-1==s)0==e?s=o:t.push(o);else if(n>0&&n>=e)0==e?(t.push(s,...r),r.length=0,s=o):r.push(o),n=e;else{let i=Mo(s,o);i>=0?s=i:0==n&&0==e?(t.push(s),s=o):(r.push(o),n=e)}}return s>=0&&t.push(s,...r),t}(jo(e))}const $o=e=>Array.from(e);function Wo(e,t){return e.P.has(t)||e.Q.has(t)}class zo extends Array{get is_emoji(){return!0}}let qo,Vo,Go,Ko,Jo,Qo,Zo,Yo,Xo,ea,ta,ra;function sa(){if(qo)return;let e=fo("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI");const t=()=>yo(e),r=()=>new Set(t()),s=(e,t)=>t.forEach((t=>e.add(t)));qo=new Map(bo(e)),Vo=r(),Go=t(),Ko=new Set(t().map((e=>Go[e]))),Go=new Set(Go),Jo=r(),Qo=r();let n=wo(e),i=e();const o=()=>{let e=new Set;return t().forEach((t=>s(e,n[t]))),s(e,t()),e};Zo=vo((t=>{let r=vo(e).map((e=>e+96));if(r.length){let s=t>=i;return r[0]-=32,r=No(r),s&&(r=`Restricted[${r}]`),{N:r,P:o(),Q:o(),M:!e(),R:s}}})),Yo=r(),Xo=new Map;let a=t().concat($o(Yo)).sort(((e,t)=>e-t));a.forEach(((t,r)=>{let s=e(),n=a[r]=s?a[r-s]:{V:[],M:new Map};n.V.push(t),Yo.has(t)||Xo.set(t,n)}));for(let{V:e,M:t}of new Set(Xo.values())){let r=[];for(let t of e){let e=Zo.filter((e=>Wo(e,t))),n=r.find((({G:t})=>e.some((e=>t.has(e)))));n||(n={G:new Set,V:[]},r.push(n)),n.V.push(t),s(n.G,e)}let n=r.flatMap((e=>$o(e.G)));for(let{G:e,V:s}of r){let r=new Set(n.filter((t=>!e.has(t))));for(let e of s)t.set(e,r)}}ea=new Set;let c=new Set;const l=e=>ea.has(e)?c.add(e):ea.add(e);for(let e of Zo){for(let t of e.P)l(t);for(let t of e.Q)l(t)}for(let e of ea)Xo.has(e)||c.has(e)||Xo.set(e,1);s(ea,Fo(ea)),ta=function(e){let t=[],r=yo(e);return function e({S:r,B:s},n,i){if(!(4&r&&i===n[n.length-1])){2&r&&(i=n[n.length-1]),1&r&&t.push(n);for(let t of s)for(let r of t.Q)e(t,[...n,r],i)}}(function t(s){return{S:e(),B:vo((()=>{let s=yo(e).map((e=>r[e]));if(s.length)return t(s)})),Q:s}}([]),[]),t}(e).map((e=>zo.from(e))).sort(Io),ra=new Map;for(let e of ta){let t=[ra];for(let r of e){let e=t.map((e=>{let t=e.get(r);return t||(t=new Map,e.set(r,t)),t}));65039===r?t.push(...e):t=e}for(let r of t)r.V=e}}function na(e){return(aa(e)?"":`${ia(oa([e]))} `)+_o(e)}function ia(e){return`"${e}"`}function oa(e,t=1/0,r=_o){let s=[];var n;n=e[0],sa(),Go.has(n)&&s.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,o=e.length;for(let t=0;t<o;t++){let n=e[t];aa(n)&&(s.push(No(e.slice(i,t))),s.push(r(n)),i=t+1)}return s.push(No(e.slice(i,o))),s.join("")}function aa(e){return sa(),Jo.has(e)}function ca(e,t,r){if(!e)return[];sa();let s=0;return e.split(".").map((e=>{let n=function(e){let t=[];for(let r=0,s=e.length;r<s;){let s=e.codePointAt(r);r+=s<65536?1:2,t.push(s)}return t}(e),i={input:n,offset:s};s+=n.length+1;try{let e,s=i.tokens=function(e,t,r){let s=[],n=[];for(e=e.slice().reverse();e.length;){let i=pa(e);if(i)n.length&&(s.push(t(n)),n=[]),s.push(r(i));else{let t=e.pop();if(ea.has(t))n.push(t);else{let e=qo.get(t);if(e)n.push(...e);else if(!Vo.has(t))throw la(t)}}}return n.length&&s.push(t(n)),s}(n,t,r),o=s.length;if(!o)throw new Error("empty label");let a=i.output=s.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(a),!(i.emoji=o>1||s[0].is_emoji)&&a.every((e=>e<128)))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error(`invalid label extension: "${No(e.slice(0,4))}"`)}(a),e="ASCII";else{let t=s.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(Go.has(a[0]))throw ha("leading combining mark");for(let e=1;e<o;e++){let t=s[e];if(!t.is_emoji&&Go.has(t[0]))throw ha(`emoji + combining mark: "${No(s[e-1])} + ${oa([t[0]])}"`)}!function(e){let t=e[0],r=po.get(t);if(r)throw ha(`leading ${r}`);let s=e.length,n=-1;for(let i=1;i<s;i++){t=e[i];let s=po.get(t);if(s){if(n==i)throw ha(`${r} + ${s}`);n=i+1,r=s}}if(n==s)throw ha(`trailing ${r}`)}(a);let r=$o(new Set(t)),[n]=function(e){let t=Zo;for(let r of e){let e=t.filter((e=>Wo(e,r)));if(!e.length)throw Zo.some((e=>Wo(e,r)))?ua(t[0],r):la(r);if(t=e,1==e.length)break}return t}(r);!function(e,t){for(let r of t)if(!Wo(e,r))throw ua(e,r);if(e.M){let e=Fo(t);for(let t=1,r=e.length;t<r;t++)if(Ko.has(e[t])){let s=t+1;for(let n;s<r&&Ko.has(n=e[s]);s++)for(let r=t;r<s;r++)if(e[r]==n)throw new Error(`duplicate non-spacing marks: ${na(n)}`);if(s-t>4)throw new Error(`excessive non-spacing marks: ${ia(oa(e.slice(t-1,s)))} (${s-t}/4)`);t=s}}}(n,t),function(e,t){let r,s=[];for(let e of t){let t=Xo.get(e);if(1===t)return;if(t){let s=t.M.get(e);if(r=r?r.filter((e=>s.has(e))):$o(s),!r.length)return}else s.push(e)}if(r)for(let t of r)if(s.every((e=>Wo(t,e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(n,r),e=n.N}else e="Emoji"}i.type=e}catch(e){i.error=e}return i}))}function la(e){return new Error(`disallowed character: ${na(e)}`)}function ua(e,t){let r=na(t),s=Zo.find((e=>e.P.has(t)));return s&&(r=`${s.N} ${r}`),new Error(`illegal mixture: ${e.N} + ${r}`)}function ha(e){return new Error(`illegal placement: ${e}`)}function da(e){return e.filter((e=>65039!=e))}function pa(e,t){let r,s=ra,n=e.length;for(;n&&(s=s.get(e[--n]),s);){let{V:i}=s;i&&(r=i,t&&t.push(...e.slice(n).reverse()),e.length=n)}return r}const fa=new Uint8Array(32);function ga(e){return xt(0!==e.length,"invalid ENS name; empty component","comp",e),e}function ma(e){const t=Ds(function(e){try{if(0===e.length)throw new Error("empty label");return function(e){return function(e){return e.map((({input:t,error:r,output:s})=>{if(r){let s=r.message;throw new Error(1==e.length?s:`Invalid label ${ia(oa(t,63))}: ${s}`)}return No(s)})).join(".")}(ca(e,Ho,da))}(e)}catch(t){xt(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),r=[];if(0===e.length)return r;let s=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(ga(t.slice(s,e))),s=e+1);return xt(s<t.length,"invalid ENS name; empty component","name",e),r.push(ga(t.slice(s))),r}function ya(e){xt("string"==typeof e,"invalid ENS name; not a string","name",e),xt(e.length,"invalid ENS name (empty label)","name",e);let t=fa;const r=ma(e);for(;r.length;)t=os($t([t,os(r.pop())]));return Ht(t)}function wa(e,t){const r=null!=t?t:63;return xt(r<=255,"DNS encoded label cannot exceed 255","length",r),Ht($t(ma(e).map((t=>{xt(t.length<=r,`label ${JSON.stringify(e)} exceeds ${r} bytes`,"name",e);const s=new Uint8Array(t.length+1);return s.set(t,1),s[0]=s.length-1,s}))))+"00"}fa.fill(0);class ba extends jr{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Br(this.buffer)}update(e){Cr(this);const{view:t,buffer:r,blockLen:s}=this,n=(e=Mr(e)).length;for(let i=0;i<n;){const o=Math.min(s-this.pos,n-i);if(o!==s)r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=Br(e);for(;s<=n-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Cr(this),_r(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:n}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let e=i;e<s;e++)t[e]=0;!function(e,t,r,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,s);const n=BigInt(32),i=BigInt(4294967295),o=Number(r>>n&i),a=Number(r&i),c=s?4:0,l=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+l,a,s)}(r,s-8,BigInt(8*this.length),n),this.process(r,0);const o=Br(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:n,destroyed:i,pos:o}=this;return e.length=s,e.pos=o,e.finished=n,e.destroyed=i,s%t&&e.buffer.set(r),e}}const va=(e,t,r)=>e&t^~e&r,Ea=(e,t,r)=>e&t^e&r^t&r,Aa=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ca=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_a=new Uint32Array(64);class Na extends ba{constructor(){super(64,32,8,!1),this.A=0|Ca[0],this.B=0|Ca[1],this.C=0|Ca[2],this.D=0|Ca[3],this.E=0|Ca[4],this.F=0|Ca[5],this.G=0|Ca[6],this.H=0|Ca[7]}get(){const{A:e,B:t,C:r,D:s,E:n,F:i,G:o,H:a}=this;return[e,t,r,s,n,i,o,a]}set(e,t,r,s,n,i,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|s,this.E=0|n,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)_a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=_a[e-15],r=_a[e-2],s=Lr(t,7)^Lr(t,18)^t>>>3,n=Lr(r,17)^Lr(r,19)^r>>>10;_a[e]=n+_a[e-7]+s+_a[e-16]|0}let{A:r,B:s,C:n,D:i,E:o,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(Lr(o,6)^Lr(o,11)^Lr(o,25))+va(o,a,c)+Aa[e]+_a[e]|0,u=(Lr(r,2)^Lr(r,13)^Lr(r,22))+Ea(r,s,n)|0;l=c,c=a,a=o,o=i+t|0,i=n,n=s,s=r,r=t+u|0}r=r+this.A|0,s=s+this.B|0,n=n+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,s,n,i,o,a,c,l)}roundClean(){_a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ia=Fr((()=>new Na)),[Sa,Ta]=(()=>Rr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),Pa=new Uint32Array(80),Oa=new Uint32Array(80);class xa extends ba{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:n,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,s,n,i,o,a,c,l,u,h,d,p,f,g]}set(e,t,r,s,n,i,o,a,c,l,u,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|s,this.Ch=0|n,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)Pa[r]=e.getUint32(t),Oa[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Pa[e-15],r=0|Oa[e-15],s=Rr.rotrSH(t,r,1)^Rr.rotrSH(t,r,8)^Rr.shrSH(t,r,7),n=Rr.rotrSL(t,r,1)^Rr.rotrSL(t,r,8)^Rr.shrSL(t,r,7),i=0|Pa[e-2],o=0|Oa[e-2],a=Rr.rotrSH(i,o,19)^Rr.rotrBH(i,o,61)^Rr.shrSH(i,o,6),c=Rr.rotrSL(i,o,19)^Rr.rotrBL(i,o,61)^Rr.shrSL(i,o,6),l=Rr.add4L(n,c,Oa[e-7],Oa[e-16]),u=Rr.add4H(l,s,a,Pa[e-7],Pa[e-16]);Pa[e]=0|u,Oa[e]=0|l}let{Ah:r,Al:s,Bh:n,Bl:i,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:p,Gh:f,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=Rr.rotrSH(u,h,14)^Rr.rotrSH(u,h,18)^Rr.rotrBH(u,h,41),w=Rr.rotrSL(u,h,14)^Rr.rotrSL(u,h,18)^Rr.rotrBL(u,h,41),b=u&d^~u&f,v=h&p^~h&g,E=Rr.add5L(y,w,v,Ta[e],Oa[e]),A=Rr.add5H(E,m,t,b,Sa[e],Pa[e]),C=0|E,_=Rr.rotrSH(r,s,28)^Rr.rotrBH(r,s,34)^Rr.rotrBH(r,s,39),N=Rr.rotrSL(r,s,28)^Rr.rotrBL(r,s,34)^Rr.rotrBL(r,s,39),I=r&n^r&o^n&o,S=s&i^s&a^i&a;m=0|f,y=0|g,f=0|d,g=0|p,d=0|u,p=0|h,({h:u,l:h}=Rr.add(0|c,0|l,0|A,0|C)),c=0|o,l=0|a,o=0|n,a=0|i,n=0|r,i=0|s;const T=Rr.add3L(C,N,S);r=Rr.add3H(T,A,_,I),s=0|T}({h:r,l:s}=Rr.add(0|this.Ah,0|this.Al,0|r,0|s)),({h:n,l:i}=Rr.add(0|this.Bh,0|this.Bl,0|n,0|i)),({h:o,l:a}=Rr.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=Rr.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Rr.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:p}=Rr.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:g}=Rr.add(0|this.Gh,0|this.Gl,0|f,0|g)),({h:m,l:y}=Rr.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,s,n,i,o,a,c,l,u,h,d,p,f,g,m,y)}roundClean(){Pa.fill(0),Oa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ka=Fr((()=>new xa)),Ra=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();function Ua(e){switch(e){case"sha256":return Ia.create();case"sha512":return ka.create()}xt(!1,"invalid hashing algorithm name","algorithm",e)}Ra.crypto||Ra.msCrypto;const Da=function(e){return Ua("sha256").update(e).digest()},Ba=function(e){return Ua("sha512").update(e).digest()};let La=Da,Ma=Ba,ja=!1,Fa=!1;function Ha(e){const t=Bt(e,"data");return Ht(La(t))}function $a(e){const t=Bt(e,"data");return Ht(Ma(t))}Ha._=Da,Ha.lock=function(){ja=!0},Ha.register=function(e){if(ja)throw new Error("sha256 is locked");La=e},Object.freeze(Ha),$a._=Ba,$a.lock=function(){Fa=!0},$a.register=function(e){if(Fa)throw new Error("sha512 is locked");Ma=e},Object.freeze(Ha);const Wa="0x0000000000000000000000000000000000000000000000000000000000000000",za=BigInt(0),qa=BigInt(1),Va=BigInt(2),Ga=BigInt(27),Ka=BigInt(28),Ja=BigInt(35),Qa={};function Za(e){return Vt(ir(e),32)}class Ya{#X;#ee;#te;#re;get r(){return this.#X}set r(e){xt(32===Wt(e),"invalid r","value",e),this.#X=Ht(e)}get s(){return this.#ee}set s(e){xt(32===Wt(e),"invalid s","value",e);const t=Ht(e);xt(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#ee=t}get v(){return this.#te}set v(e){const t=sr(e,"value");xt(27===t||28===t,"invalid v","v",e),this.#te=t}get networkV(){return this.#re}get legacyChainId(){const e=this.networkV;return null==e?null:Ya.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=Bt(this.s);return this.yParity&&(e[0]|=128),Ht(e)}get compactSerialized(){return $t([this.r,this.yParityAndS])}get serialized(){return $t([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,s){Ut(e,Qa,"Signature"),this.#X=t,this.#ee=r,this.#te=s,this.#re=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Ya(Qa,this.r,this.s,this.v);return this.networkV&&(e.#re=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Xt(e,"v");return t==Ga||t==Ka?za:(xt(t>=Ja,"invalid EIP-155 v","v",e),(t-Ja)/Va)}static getChainIdV(e,t){return Xt(e)*Va+BigInt(35+t-27)}static getNormalizedV(e){const t=Xt(e);return t===za||t===Ga?27:t===qa||t===Ka?28:(xt(t>=Ja,"invalid v","v",e),t&qa?27:28)}static from(e){function t(t,r){xt(t,r,"signature",e)}if(null==e)return new Ya(Qa,Wa,Wa,27);if("string"==typeof e){const r=Bt(e,"signature");if(64===r.length){const e=Ht(r.slice(0,32)),t=r.slice(32,64),s=128&t[0]?28:27;return t[0]&=127,new Ya(Qa,e,Ht(t),s)}if(65===r.length){const e=Ht(r.slice(0,32)),s=r.slice(32,64);t(!(128&s[0]),"non-canonical s");const n=Ya.getNormalizedV(r[64]);return new Ya(Qa,e,Ht(s),n)}t(!1,"invalid raw signature length")}if(e instanceof Ya)return e.clone();const r=e.r;t(null!=r,"missing r");const s=Za(r),n=function(e,r){if(null!=e)return Za(e);if(null!=r){t(Mt(r,32),"invalid yParityAndS");const e=Bt(r);return e[0]&=127,Ht(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t(!(128&Bt(n)[0]),"non-canonical s");const{networkV:i,v:o}=function(e,r,s){if(null!=e){const t=Xt(e);return{networkV:t>=Ja?t:void 0,v:Ya.getNormalizedV(t)}}if(null!=r)return t(Mt(r,32),"invalid yParityAndS"),{v:128&Bt(r)[0]?28:27};if(null!=s){switch(sr(s,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),a=new Ya(Qa,s,n,o);return i&&(a.#re=i),t(null==e.yParity||sr(e.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}BigInt(0);const Xa=BigInt(1),ec=BigInt(2),tc=e=>e instanceof Uint8Array,rc=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function sc(e){if(!tc(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=rc[e[r]];return t}function nc(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function ic(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const s=2*t,n=e.slice(s,s+2),i=Number.parseInt(n,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");r[t]=i}return r}function oc(e){return nc(sc(e))}function ac(e){if(!tc(e))throw new Error("Uint8Array expected");return nc(sc(Uint8Array.from(e).reverse()))}function cc(e,t){return ic(e.toString(16).padStart(2*t,"0"))}function lc(e,t){return cc(e,t).reverse()}function uc(e,t,r){let s;if("string"==typeof t)try{s=ic(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!tc(t))throw new Error(`${e} must be hex string or Uint8Array`);s=Uint8Array.from(t)}const n=s.length;if("number"==typeof r&&n!==r)throw new Error(`${e} expected ${r} bytes, got ${n}`);return s}function hc(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!tc(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t}const dc=e=>(ec<<BigInt(e-1))-Xa,pc=e=>new Uint8Array(e),fc=e=>Uint8Array.from(e);function gc(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let s=pc(e),n=pc(e),i=0;const o=()=>{s.fill(1),n.fill(0),i=0},a=(...e)=>r(n,s,...e),c=(e=pc())=>{n=a(fc([0]),e),s=a(),0!==e.length&&(n=a(fc([1]),e),s=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){s=a();const t=s.slice();r.push(t),e+=s.length}return hc(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(l()));)c();return o(),r}}const mc={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function yc(e,t,r={}){const s=(t,r,s)=>{const n=mc[r];if("function"!=typeof n)throw new Error(`Invalid validator "${r}", expected function`);const i=e[t];if(!(s&&void 0===i||n(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${r}`)};for(const[e,r]of Object.entries(t))s(e,r,!1);for(const[e,t]of Object.entries(r))s(e,t,!0);return e}const wc=BigInt(0),bc=BigInt(1),vc=BigInt(2),Ec=BigInt(3),Ac=BigInt(4),Cc=BigInt(5),_c=BigInt(8);function Nc(e,t){const r=e%t;return r>=wc?r:t+r}function Ic(e,t,r){if(r<=wc||t<wc)throw new Error("Expected power/modulo > 0");if(r===bc)return wc;let s=bc;for(;t>wc;)t&bc&&(s=s*e%r),e=e*e%r,t>>=bc;return s}function Sc(e,t,r){let s=e;for(;t-- >wc;)s*=s,s%=r;return s}function Tc(e,t){if(e===wc||t<=wc)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Nc(e,t),s=t,n=wc,i=bc,o=bc,a=wc;for(;r!==wc;){const e=s/r,t=s%r,c=n-o*e,l=i-a*e;s=r,r=t,n=o,i=a,o=c,a=l}if(s!==bc)throw new Error("invert: does not exist");return Nc(n,t)}BigInt(9),BigInt(16);const Pc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Oc(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function xc(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function kc(e){const t=xc(e);return t+Math.ceil(t/2)}class Rc extends jr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Er(e.outputLen),Er(e.blockLen)}(e);const r=Mr(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,n=new Uint8Array(s);n.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return Cr(this),this.iHash.update(e),this}digestInto(e){Cr(this),Ar(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:n,blockLen:i,outputLen:o}=this;return e.finished=s,e.destroyed=n,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Uc=(e,t,r)=>new Rc(e,t).update(r).digest();Uc.create=(e,t)=>new Rc(e,t);const Dc=BigInt(0),Bc=BigInt(1);function Lc(e){return yc(e.Fp,Pc.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),yc(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Oc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{Ph:Mc,aT:jc}=e,Fc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=Fc;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],s=e.subarray(2,r+2);if(!r||s.length!==r)throw new t("Invalid signature integer: wrong length");if(128&s[0])throw new t("Invalid signature integer: negative");if(0===s[0]&&!(128&s[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Mc(s),l:e.subarray(r+2)}},toSig(e){const{Err:t}=Fc,r="string"==typeof e?jc(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let s=r.length;if(s<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:n,l:i}=Fc._parseInt(r.subarray(2)),{d:o,l:a}=Fc._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:n,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},s=t(r(e.s)),n=t(r(e.r)),i=s.length/2,o=n.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${n}02${a}${s}`}},Hc=BigInt(0),$c=BigInt(1),Wc=(BigInt(2),BigInt(3));function zc(e){const t=function(e){const t=Lc(e);return yc(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:s}=t,n=r.BYTES+1,i=2*r.BYTES+1;function o(e){return Nc(e,s)}function a(e){return Tc(e,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(e){const t=function(e){const t=Lc(e);yc(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:s,a:n}=t;if(r){if(!s.eql(n,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,s=t.toBytes||((e,t,s)=>{const n=t.toAffine();return hc(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),n=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function i(e){const{a:s,b:n}=t,i=r.sqr(e),o=r.mul(i,e);return r.add(r.add(o,r.mul(e,s)),n)}if(!r.eql(r.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&Hc<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:r,nByteLength:s,wrapPrivateKey:n,n:i}=t;if(r&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=sc(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}let o;try{o="bigint"==typeof e?e:oc(uc("private key",e,s))}catch(t){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return n&&(o=Nc(o,i)),a(o),o}const l=new Map;function u(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,s){if(this.px=e,this.py=t,this.pz=s,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==s||!r.isValid(s))throw new Error("z required")}static fromAffine(e){const{x:t,y:s}=e||{};if(!e||!r.isValid(t)||!r.isValid(s))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const n=e=>r.eql(e,r.ZERO);return n(t)&&n(s)?h.ZERO:new h(t,s,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(n(uc("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:s}=this.toAffine();if(!r.isValid(e)||!r.isValid(s))throw new Error("bad point: x or y not FE");const n=r.sqr(s),o=i(e);if(!r.eql(n,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:s,pz:n}=this,{px:i,py:o,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(i,n)),l=r.eql(r.mul(s,a),r.mul(o,n));return c&&l}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:s}=t,n=r.mul(s,Wc),{px:i,py:o,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,d=r.mul(i,i),p=r.mul(o,o),f=r.mul(a,a),g=r.mul(i,o);return g=r.add(g,g),u=r.mul(i,a),u=r.add(u,u),c=r.mul(e,u),l=r.mul(n,f),l=r.add(c,l),c=r.sub(p,l),l=r.add(p,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(n,u),f=r.mul(e,f),g=r.sub(d,f),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,f),d=r.mul(d,g),l=r.add(l,d),f=r.mul(o,a),f=r.add(f,f),d=r.mul(f,g),c=r.sub(c,d),u=r.mul(f,p),u=r.add(u,u),u=r.add(u,u),new h(c,l,u)}add(e){u(e);const{px:s,py:n,pz:i}=this,{px:o,py:a,pz:c}=e;let l=r.ZERO,d=r.ZERO,p=r.ZERO;const f=t.a,g=r.mul(t.b,Wc);let m=r.mul(s,o),y=r.mul(n,a),w=r.mul(i,c),b=r.add(s,n),v=r.add(o,a);b=r.mul(b,v),v=r.add(m,y),b=r.sub(b,v),v=r.add(s,i);let E=r.add(o,c);return v=r.mul(v,E),E=r.add(m,w),v=r.sub(v,E),E=r.add(n,i),l=r.add(a,c),E=r.mul(E,l),l=r.add(y,w),E=r.sub(E,l),p=r.mul(f,v),l=r.mul(g,w),p=r.add(l,p),l=r.sub(y,p),p=r.add(y,p),d=r.mul(l,p),y=r.add(m,m),y=r.add(y,m),w=r.mul(f,w),v=r.mul(g,v),y=r.add(y,w),w=r.sub(m,w),w=r.mul(f,w),v=r.add(v,w),m=r.mul(y,v),d=r.add(d,m),m=r.mul(E,v),l=r.mul(b,l),l=r.sub(l,m),m=r.mul(b,y),p=r.mul(E,p),p=r.add(p,m),new h(l,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return p.wNAFCached(this,l,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}))}multiplyUnsafe(e){const s=h.ZERO;if(e===Hc)return s;if(a(e),e===$c)return this;const{endo:n}=t;if(!n)return p.unsafeLadder(this,e);let{k1neg:i,k1:o,k2neg:c,k2:l}=n.splitScalar(e),u=s,d=s,f=this;for(;o>Hc||l>Hc;)o&$c&&(u=u.add(f)),l&$c&&(d=d.add(f)),f=f.double(),o>>=$c,l>>=$c;return i&&(u=u.negate()),c&&(d=d.negate()),d=new h(r.mul(d.px,n.beta),d.py,d.pz),u.add(d)}multiply(e){a(e);let s,n,i=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:c}=o.splitScalar(i);let{p:l,f:u}=this.wNAF(t),{p:d,f}=this.wNAF(c);l=p.constTimeNegate(e,l),d=p.constTimeNegate(a,d),d=new h(r.mul(d.px,o.beta),d.py,d.pz),s=l.add(d),n=u.add(f)}else{const{p:e,f:t}=this.wNAF(i);s=e,n=t}return h.normalizeZ([s,n])[0]}multiplyAndAddUnsafe(e,t,r){const s=h.BASE,n=(e,t)=>t!==Hc&&t!==$c&&e.equals(s)?e.multiply(t):e.multiplyUnsafe(t),i=n(this,t).add(n(e,r));return i.is0()?void 0:i}toAffine(e){const{px:t,py:s,pz:n}=this,i=this.is0();null==e&&(e=i?r.ONE:r.inv(n));const o=r.mul(t,e),a=r.mul(s,e),c=r.mul(n,e);if(i)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===$c)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===$c?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),s(h,this,e)}toHex(e=!0){return sc(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,p=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},s=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let s=e.ZERO,n=t;for(;r>Dc;)r&Bc&&(s=s.add(n)),n=n.double(),r>>=Bc;return s},precomputeWindow(e,t){const{windows:r,windowSize:n}=s(t),i=[];let o=e,a=o;for(let e=0;e<r;e++){a=o,i.push(a);for(let e=1;e<n;e++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(t,n,i){const{windows:o,windowSize:a}=s(t);let c=e.ZERO,l=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let s=Number(i&u);i>>=d,s>a&&(s-=h,i+=Bc);const o=t,p=t+Math.abs(s)-1,f=e%2!=0,g=s<0;0===s?l=l.add(r(f,n[o])):c=c.add(r(g,n[p]))}return{p:c,f:l}},wNAFCached(e,t,r,s){const n=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,n),1!==n&&t.set(e,s(i))),this.wNAF(n,i,r)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}({...t,toBytes(e,t,s){const n=t.toAffine(),i=r.toBytes(n.x),o=hc;return s?o(Uint8Array.from([t.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,r.toBytes(n.y))},fromBytes(e){const t=e.length,s=e[0],o=e.subarray(1);if(t!==n||2!==s&&3!==s){if(t===i&&4===s)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${n} compressed bytes or ${i} uncompressed bytes`)}{const e=oc(o);if(!(Hc<(a=e)&&a<r.ORDER))throw new Error("Point is not on curve");const t=u(e);let n=r.sqrt(t);return!(1&~s)!=((n&$c)===$c)&&(n=r.neg(n)),{x:e,y:n}}var a}}),d=e=>sc(cc(e,t.nByteLength));function p(e){return e>s>>$c}const f=(e,t,r)=>oc(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=uc("compactSignature",e,2*r),new g(f(e,0,r),f(e,r,2*r))}static fromDER(e){const{r:t,s:r}=Fc.toSig(uc("DER",e));return new g(t,r)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:s,s:n,recovery:i}=this,l=b(uc("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?s+t.n:s;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&i?"03":"02",p=c.fromHex(h+d(u)),f=a(u),g=o(-l*f),m=o(n*f),y=c.BASE.multiplyAndAddUnsafe(p,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ic(this.toDERHex())}toDERHex(){return Fc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ic(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=kc(t.n);return function(e,t,r=!1){const s=e.length,n=xc(t),i=kc(t);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const o=Nc(r?oc(e):ac(e),t-bc)+bc;return r?lc(o,n):cc(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=e instanceof Uint8Array,r="string"==typeof e,s=(t||r)&&e.length;return t?s===n||s===i:r?s===2*n||s===2*i:e instanceof c}const w=t.bits2int||function(e){const r=oc(e),s=8*e.length-t.nBitLength;return s>0?r>>BigInt(s):r},b=t.bits2int_modN||function(e){return o(w(e))},v=dc(t.nBitLength);function E(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(Hc<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return cc(e,t.nByteLength)}const A={lowS:t.lowS,prehash:!1},C={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,s,n=A){const{seed:i,k2sig:u}=function(e,s,n=A){if(["recovered","canonical"].some((e=>e in n)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:d,prehash:f,extraEntropy:m}=n;null==d&&(d=!0),e=uc("msgHash",e),f&&(e=uc("prehashed msgHash",i(e)));const y=b(e),v=l(s),C=[E(v),E(y)];if(null!=m){const e=!0===m?u(r.BYTES):m;C.push(uc("extraEntropy",e))}const _=hc(...C),N=y;return{seed:_,k2sig:function(e){const t=w(e);if(!h(t))return;const r=a(t),s=c.BASE.multiply(t).toAffine(),n=o(s.x);if(n===Hc)return;const i=o(r*o(N+n*v));if(i===Hc)return;let l=(s.x===n?0:2)|Number(s.y&$c),u=i;return d&&p(i)&&(u=function(e){return p(e)?o(-e):e}(i),l^=1),new g(n,u,l)}}}(e,s,n),d=t;return gc(d.hash.outputLen,d.nByteLength,d.hmac)(i,u)},verify:function(e,r,s,n=C){const i=e;if(r=uc("msgHash",r),s=uc("publicKey",s),"strict"in n)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=n;let h,d;try{if("string"==typeof i||i instanceof Uint8Array)try{h=g.fromDER(i)}catch(e){if(!(e instanceof Fc.Err))throw e;h=g.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:t}=i;h=new g(e,t)}}d=c.fromHex(s)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(r=t.hash(r));const{r:p,s:f}=h,m=b(r),y=a(f),w=o(m*y),v=o(p*y),E=c.BASE.multiplyAndAddUnsafe(d,w,v)?.toAffine();return!!E&&o(E.x)===p},ProjectivePoint:c,Signature:g,utils:m}}function qc(e){return{hash:e,hmac:(t,...r)=>Uc(e,t,function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!Dr(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t}(...r)),randomBytes:Hr}}BigInt(4);const Vc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Gc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Kc=BigInt(1),Jc=BigInt(2),Qc=(e,t)=>(e+t/Jc)/t;const Zc=function(e,t,r=!1,s={}){if(e<=wc)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:n,nByteLength:i}=Oc(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=function(e){if(e%Ac===Ec){const t=(e+bc)/Ac;return function(e,r){const s=e.pow(r,t);if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}if(e%_c===Cc){const t=(e-Cc)/_c;return function(e,r){const s=e.mul(r,vc),n=e.pow(s,t),i=e.mul(r,n),o=e.mul(e.mul(i,vc),n),a=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-bc)/vc;let r,s,n;for(r=e-bc,s=0;r%vc===wc;r/=vc,s++);for(n=vc;n<e&&Ic(n,t,e)!==e-bc;n++);if(1===s){const t=(e+bc)/Ac;return function(e,r){const s=e.pow(r,t);if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}const i=(r+bc)/vc;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=s,c=e.pow(e.mul(e.ONE,n),r),l=e.pow(o,i),u=e.pow(o,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,bc<<BigInt(a-t-1));c=e.sqr(r),l=e.mul(l,r),u=e.mul(u,c),a=t}return l}}(e)}(e),a=Object.freeze({ORDER:e,BITS:n,BYTES:i,MASK:dc(n),ZERO:wc,ONE:bc,create:t=>Nc(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return wc<=t&&t<e},is0:e=>e===wc,isOdd:e=>(e&bc)===bc,neg:t=>Nc(-t,e),eql:(e,t)=>e===t,sqr:t=>Nc(t*t,e),add:(t,r)=>Nc(t+r,e),sub:(t,r)=>Nc(t-r,e),mul:(t,r)=>Nc(t*r,e),pow:(e,t)=>function(e,t,r){if(r<wc)throw new Error("Expected power > 0");if(r===wc)return e.ONE;if(r===bc)return t;let s=e.ONE,n=t;for(;r>wc;)r&bc&&(s=e.mul(s,n)),n=e.sqr(n),r>>=bc;return s}(a,e,t),div:(t,r)=>Nc(t*Tc(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Tc(t,e),sqrt:s.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),s=t.reduce(((t,s,n)=>e.is0(s)?t:(r[n]=t,e.mul(t,s))),e.ONE),n=e.inv(s);return t.reduceRight(((t,s,n)=>e.is0(s)?t:(r[n]=e.mul(t,r[n]),e.mul(t,s))),n),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?lc(e,i):cc(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return r?ac(e):oc(e)}});return Object.freeze(a)}(Vc,void 0,void 0,{sqrt:function(e){const t=Vc,r=BigInt(3),s=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,h=Sc(u,r,t)*u%t,d=Sc(h,r,t)*u%t,p=Sc(d,Jc,t)*l%t,f=Sc(p,n,t)*p%t,g=Sc(f,i,t)*f%t,m=Sc(g,a,t)*g%t,y=Sc(m,c,t)*m%t,w=Sc(y,a,t)*g%t,b=Sc(w,r,t)*u%t,v=Sc(b,o,t)*f%t,E=Sc(v,s,t)*l%t,A=Sc(E,Jc,t);if(!Zc.eql(Zc.sqr(A),e))throw new Error("Cannot find square root");return A}}),Yc=function(e,t){const r=t=>zc({...e,...qc(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Zc,n:Gc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Gc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-Kc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=Qc(i*e,t),c=Qc(-s*e,t);let l=Nc(e-a*r-c*n,t),u=Nc(-a*s-c*i,t);const h=l>o,d=u>o;if(h&&(l=t-l),d&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},Ia);BigInt(0),Yc.ProjectivePoint;class Xc{#se;constructor(e){xt(32===Wt(e),"invalid private key","privateKey","[REDACTED]"),this.#se=Ht(e)}get privateKey(){return this.#se}get publicKey(){return Xc.computePublicKey(this.#se)}get compressedPublicKey(){return Xc.computePublicKey(this.#se,!0)}sign(e){xt(32===Wt(e),"invalid digest length","digest",e);const t=Yc.sign(Lt(e),Lt(this.#se),{lowS:!0});return Ya.from({r:nr(t.r,32),s:nr(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Xc.computePublicKey(e);return Ht(Yc.getSharedSecret(Lt(this.#se),Bt(t),!1))}static computePublicKey(e,t){let r=Bt(e,"key");if(32===r.length)return Ht(Yc.getPublicKey(r,!!t));if(64===r.length){const e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}return Ht(Yc.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){xt(32===Wt(e),"invalid digest length","digest",e);const r=Ya.from(t);let s=Yc.Signature.fromCompact(Lt($t([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const n=s.recoverPublicKey(Lt(e));return xt(null!=n,"invalid signautre for digest","signature",t),"0x"+n.toHex(!1)}static addPoints(e,t,r){const s=Yc.ProjectivePoint.fromHex(Xc.computePublicKey(e).substring(2)),n=Yc.ProjectivePoint.fromHex(Xc.computePublicKey(t).substring(2));return"0x"+s.add(n).toHex(!!r)}}function el(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function tl(e,t,r){let s=0;for(let n=0;n<r;n++)s=256*s+e[t+n];return s}function rl(e,t,r,s){const n=[];for(;r<t+1+s;){const i=sl(e,r);n.push(i.result),Ot((r+=i.consumed)<=t+1+s,"child data too short","BUFFER_OVERRUN",{buffer:e,length:s,offset:t})}return{consumed:1+s,result:n}}function sl(e,t){Ot(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const r=t=>{Ot(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const s=e[t]-247;r(t+1+s);const n=tl(e,t+1,s);return r(t+1+s+n),rl(e,t,t+1+s,s+n)}if(e[t]>=192){const s=e[t]-192;return r(t+1+s),rl(e,t,t+1,s)}if(e[t]>=184){const s=e[t]-183;r(t+1+s);const n=tl(e,t+1,s);return r(t+1+s+n),{consumed:1+s+n,result:Ht(e.slice(t+1+s,t+1+s+n))}}if(e[t]>=128){const s=e[t]-128;return r(t+1+s),{consumed:1+s,result:Ht(e.slice(t+1,t+1+s))}}return{consumed:1,result:el(e[t])}}function nl(e){const t=Bt(e,"data"),r=sl(t,0);return xt(r.consumed===t.length,"unexpected junk after rlp payload","data",e),r.result}function il(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function ol(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(ol(e))})),t.length<=55)return t.unshift(192+t.length),t;const r=il(t.length);return r.unshift(247+r.length),r.concat(t)}const t=Array.prototype.slice.call(Bt(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=il(t.length);return r.unshift(183+r.length),r.concat(t)}const al="0123456789abcdef";function cl(e){let t="0x";for(const r of ol(e))t+=al[r>>4],t+=al[15&r];return t}const ll=BigInt(0),ul=BigInt(2),hl=BigInt(27),dl=BigInt(28),pl=BigInt(35),fl=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),gl=131072;function ml(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return r+=Ha(t).substring(4),"0x"+r}function yl(e){return"0x"===e?null:ds(e)}function wl(e,t){try{return si(e)}catch(r){xt(!1,r.message,t,e)}}function bl(e,t){return"0x"===e?0:sr(e,t)}function vl(e,t){if("0x"===e)return ll;const r=Xt(e,t);return xt(r<=fl,"value exceeds uint size",t,r),r}function El(e,t){const r=Xt(e,"value"),s=ir(r);return xt(s.length<=32,"value too large",`tx.${t}`,r),s}function Al(e){return si(e).map((e=>[e.address,e.storageKeys]))}function Cl(e,t){xt(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)xt(Mt(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}function _l(e,t){let r;try{if(r=bl(t[0],"yParity"),0!==r&&1!==r)throw new Error("bad yParity")}catch(e){xt(!1,"invalid yParity","yParity",t[0])}const s=Vt(t[1],32),n=Vt(t[2],32),i=Ya.from({r:s,s:n,yParity:r});e.signature=i}class Nl{#ne;#ie;#t;#oe;#ae;#ce;#le;#ue;#he;#de;#pe;#fe;#ge;#me;#ye;#we;get type(){return this.#ne}set type(e){switch(e){case null:this.#ne=null;break;case 0:case"legacy":this.#ne=0;break;case 1:case"berlin":case"eip-2930":this.#ne=1;break;case 2:case"london":case"eip-1559":this.#ne=2;break;case 3:case"cancun":case"eip-4844":this.#ne=3;break;default:xt(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=this.#ie;return null==e&&3===this.type?wi:e}set to(e){this.#ie=null==e?null:ds(e)}get nonce(){return this.#oe}set nonce(e){this.#oe=sr(e,"value")}get gasLimit(){return this.#ae}set gasLimit(e){this.#ae=Xt(e)}get gasPrice(){const e=this.#ce;return null!=e||0!==this.type&&1!==this.type?e:ll}set gasPrice(e){this.#ce=null==e?null:Xt(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#le;return null==e?2===this.type||3===this.type?ll:null:e}set maxPriorityFeePerGas(e){this.#le=null==e?null:Xt(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ue;return null==e?2===this.type||3===this.type?ll:null:e}set maxFeePerGas(e){this.#ue=null==e?null:Xt(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=Ht(e)}get value(){return this.#he}set value(e){this.#he=Xt(e,"value")}get chainId(){return this.#de}set chainId(e){this.#de=Xt(e)}get signature(){return this.#pe||null}set signature(e){this.#pe=null==e?null:Ya.from(e)}get accessList(){const e=this.#fe||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#fe=null==e?null:si(e)}get maxFeePerBlobGas(){const e=this.#ge;return null==e&&3===this.type?ll:e}set maxFeePerBlobGas(e){this.#ge=null==e?null:Xt(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#me;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){xt(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)xt(Mt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#me=e}get blobs(){return null==this.#we?null:this.#we.map((e=>Object.assign({},e)))}set blobs(e){if(null==e)return void(this.#we=null);const t=[],r=[];for(let s=0;s<e.length;s++){const n=e[s];if(jt(n)){Ot(this.#ye,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=Bt(n);if(xt(e.length<=gl,"blob is too large",`blobs[${s}]`,n),e.length!==gl){const t=new Uint8Array(gl);t.set(e),e=t}const i=this.#ye.blobToKzgCommitment(e),o=Ht(this.#ye.computeBlobKzgProof(e,i));t.push({data:Ht(e),commitment:Ht(i),proof:o}),r.push(ml(1,i))}else{const e=Ht(n.commitment);t.push({data:Ht(n.data),commitment:e,proof:Ht(n.proof)}),r.push(ml(1,e))}}this.#we=t,this.#me=r}get kzg(){return this.#ye}set kzg(e){this.#ye=e}constructor(){this.#ne=null,this.#ie=null,this.#oe=0,this.#ae=ll,this.#ce=null,this.#le=null,this.#ue=null,this.#t="0x",this.#he=ll,this.#de=ll,this.#pe=null,this.#fe=null,this.#ge=null,this.#me=null,this.#we=null,this.#ye=null}get hash(){return null==this.signature?null:os(this.#be(!0,!1))}get unsignedHash(){return os(this.unsignedSerialized)}get from(){return null==this.signature?null:(e=this.unsignedHash,t=this.signature,function(e){let t;return t="string"==typeof e?Xc.computePublicKey(e,!1):e.publicKey,ds(os("0x"+t.substring(4)).substring(26))}(Xc.recoverPublicKey(e,t)));var e,t}get fromPublicKey(){return null==this.signature?null:Xc.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#be(e,t){Ot(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){const r=[El(e.nonce,"nonce"),El(e.gasPrice||0,"gasPrice"),El(e.gasLimit,"gasLimit"),e.to||"0x",El(e.value,"value"),e.data];let s=ll;if(e.chainId!=ll)s=Xt(e.chainId,"tx.chainId"),xt(!t||null==t.networkV||t.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(s=t)}if(!t)return s!==ll&&(r.push(ir(s)),r.push("0x"),r.push("0x")),cl(r);let n=BigInt(27+t.yParity);return s!==ll?n=Ya.getChainIdV(s,t.v):BigInt(t.v)!==n&&xt(!1,"tx.chainId/sig.v mismatch","sig",t),r.push(ir(n)),r.push(ir(t.r)),r.push(ir(t.s)),cl(r)}(this,r);case 1:return function(e,t){const r=[El(e.chainId,"chainId"),El(e.nonce,"nonce"),El(e.gasPrice||0,"gasPrice"),El(e.gasLimit,"gasLimit"),e.to||"0x",El(e.value,"value"),e.data,Al(e.accessList||[])];return t&&(r.push(El(t.yParity,"recoveryParam")),r.push(ir(t.r)),r.push(ir(t.s))),$t(["0x01",cl(r)])}(this,r);case 2:return function(e,t){const r=[El(e.chainId,"chainId"),El(e.nonce,"nonce"),El(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),El(e.maxFeePerGas||0,"maxFeePerGas"),El(e.gasLimit,"gasLimit"),e.to||"0x",El(e.value,"value"),e.data,Al(e.accessList||[])];return t&&(r.push(El(t.yParity,"yParity")),r.push(ir(t.r)),r.push(ir(t.s))),$t(["0x02",cl(r)])}(this,r);case 3:return function(e,t,r){const s=[El(e.chainId,"chainId"),El(e.nonce,"nonce"),El(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),El(e.maxFeePerGas||0,"maxFeePerGas"),El(e.gasLimit,"gasLimit"),e.to||wi,El(e.value,"value"),e.data,Al(e.accessList||[]),El(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Cl(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(s.push(El(t.yParity,"yParity")),s.push(ir(t.r)),s.push(ir(t.s)),r)?$t(["0x03",cl([s,r.map((e=>e.data)),r.map((e=>e.commitment)),r.map((e=>e.proof))])]):$t(["0x03",cl(s)])}(this,r,t?this.blobs:null)}Ot(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#be(!0,!0)}get unsignedSerialized(){return this.#be(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,s=null!=this.#ge||this.#me;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&Ot(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ot(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ot(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const n=[];return null!=this.type?n.push(this.type):t?n.push(2):e?(n.push(1),r||n.push(0)):r?(n.push(1),n.push(2)):(s&&this.to||(n.push(0),n.push(1),n.push(2)),n.push(3)),n.sort(),n}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return Nl.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new Nl;if("string"==typeof e){const t=Bt(e);if(t[0]>=127)return Nl.from(function(e){const t=nl(e);xt(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const r={type:0,nonce:bl(t[0],"nonce"),gasPrice:vl(t[1],"gasPrice"),gasLimit:vl(t[2],"gasLimit"),to:yl(t[3]),value:vl(t[4],"value"),data:Ht(t[5]),chainId:ll};if(6===t.length)return r;const s=vl(t[6],"v"),n=vl(t[7],"r"),i=vl(t[8],"s");if(n===ll&&i===ll)r.chainId=s;else{let e=(s-pl)/ul;e<ll&&(e=ll),r.chainId=e,xt(e!==ll||s===hl||s===dl,"non-canonical legacy v","v",t[6]),r.signature=Ya.from({r:Vt(t[7],32),s:Vt(t[8],32),v:s})}return r}(t));switch(t[0]){case 1:return Nl.from(function(e){const t=nl(Bt(e).slice(1));xt(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",Ht(e));const r={type:1,chainId:vl(t[0],"chainId"),nonce:bl(t[1],"nonce"),gasPrice:vl(t[2],"gasPrice"),gasLimit:vl(t[3],"gasLimit"),to:yl(t[4]),value:vl(t[5],"value"),data:Ht(t[6]),accessList:wl(t[7],"accessList")};return 8===t.length||_l(r,t.slice(8)),r}(t));case 2:return Nl.from(function(e){const t=nl(Bt(e).slice(1));xt(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",Ht(e));const r={type:2,chainId:vl(t[0],"chainId"),nonce:bl(t[1],"nonce"),maxPriorityFeePerGas:vl(t[2],"maxPriorityFeePerGas"),maxFeePerGas:vl(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:vl(t[4],"gasLimit"),to:yl(t[5]),value:vl(t[6],"value"),data:Ht(t[7]),accessList:wl(t[8],"accessList")};return 9===t.length||_l(r,t.slice(9)),r}(t));case 3:return Nl.from(function(e){let t=nl(Bt(e).slice(1)),r="3",s=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";const e=t[1],n=t[2],i=t[3];xt(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),xt(Array.isArray(n),"invalid network format: commitments not an array","fields[2]",n),xt(Array.isArray(i),"invalid network format: proofs not an array","fields[3]",i),xt(e.length===n.length,"invalid network format: blobs/commitments length mismatch","fields",t),xt(e.length===i.length,"invalid network format: blobs/proofs length mismatch","fields",t),s=[];for(let r=0;r<t[1].length;r++)s.push({data:e[r],commitment:n[r],proof:i[r]});t=t[0]}xt(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",Ht(e));const n={type:3,chainId:vl(t[0],"chainId"),nonce:bl(t[1],"nonce"),maxPriorityFeePerGas:vl(t[2],"maxPriorityFeePerGas"),maxFeePerGas:vl(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:vl(t[4],"gasLimit"),to:yl(t[5]),value:vl(t[6],"value"),data:Ht(t[7]),accessList:wl(t[8],"accessList"),maxFeePerBlobGas:vl(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};s&&(n.blobs=s),xt(null!=n.to,`invalid address for transaction type: ${r}`,"data",e),xt(Array.isArray(n.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<n.blobVersionedHashes.length;t++)xt(Mt(n.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||_l(n,t.slice(11)),n}(t))}Ot(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Nl;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=Ya.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&(xt(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),xt(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(xt(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),xt(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}const Il="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Sl=BigInt(58);function Tl(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):xt(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class Pl{name;constructor(e){Nt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const Ol=new RegExp("^(ipfs)://(.*)$","i"),xl=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ol,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class kl{provider;address;name;#ve;#Ee;constructor(e,t,r){Nt(this,{provider:e,address:t,name:r}),this.#ve=null,this.#Ee=new ho(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ve&&(this.#ve=(async()=>{try{return await this.#Ee.supportsInterface("0x9061b923")}catch(e){if(St(e,"CALL_EXCEPTION"))return!1;throw this.#ve=null,e}})()),await this.#ve}async#Ae(e,t){t=(t||[]).slice();const r=this.#Ee.interface;t.unshift(ya(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),Ot(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[wa(this.name,255),r.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const n=await this.#Ee[e](...t);return s?r.decodeFunctionResult(s,n)[0]:n}catch(e){if(!St(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await this.#Ae("addr(bytes32)");return null==e||e===wi?null:e}catch(e){if(St(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648;const r=await this.#Ae("addr(bytes32,uint)",[t]);if(Mt(r,20))return ds(r)}let t=null;for(const r of this.provider.plugins)if(r instanceof Pl&&r.supportsCoinType(e)){t=r;break}if(null==t)return null;const r=await this.#Ae("addr(bytes32,uint)",[e]);if(null==r||"0x"===r)return null;const s=await t.decodeAddress(e,r);if(null!=s)return s;Ot(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await this.#Ae("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await this.#Ae("contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",r=parseInt(t[4],16);if(t[5].length===2*r)return`${e}://${function(e){const t=Bt(e);let r=rr(t),s="";for(;r;)s=Il[Number(r%Sl)]+s,r/=Sl;for(let e=0;e<t.length&&!t[e];e++)s=Il[0]+s;return s}("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;Ot(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<xl.length;r++){const s=t.match(xl[r]);if(null==s)continue;const n=s[1].toLowerCase();switch(n){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const r=Tl(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:r}),{linkage:e,url:r}}case"erc721":case"erc1155":{const r="erc721"===n?"tokenURI(uint256)":"uri(uint256)";e.push({type:n,value:t});const i=await this.getAddress();if(null==i)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const o=(s[2]||"").split("/");if(2!==o.length)return e.push({type:`!${n}caip`,value:s[2]||""}),{url:null,linkage:e};const a=o[1],c=new ho(o[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===n){const t=await c.ownerOf(a);if(i!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===n){const t=await c.balanceOf(i,a);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let l=await c[r](a);if(null==l||"0x"===l)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:l}),"erc1155"===n&&(l=l.replace("{id}",nr(a,32).substring(2)),e.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=Tl(l)),e.push({type:"metadata-url",value:l});let u={};const h=await new gi(l).send();h.assertOk();try{u=h.bodyJson}catch(t){try{e.push({type:"!metadata",value:h.bodyText})}catch(t){const r=h.body;return r&&e.push({type:"!metadata",value:Ht(r)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(Ol))return e.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:d}),d=Tl(d)}return e.push({type:"url",value:d}),{linkage:e,url:d}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return Ot(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async#Ce(e,t){const r=await kl.getEnsAddress(e);try{const s=new ho(r,["function resolver(bytes32) view returns (address)"],e),n=await s.resolver(ya(t),{enableCcipRead:!0});return n===wi?null:n}catch(e){throw e}}static async fromName(e,t){let r=t;for(;;){if(""===r||"."===r)return null;if("eth"!==t&&"eth"===r)return null;const s=await kl.#Ce(e,r);if(null!=s){const n=new kl(e,s,t);return r===t||await n.supportsWildcard()?n:null}r=r.split(".").slice(1).join(".")}}}const Rl=BigInt(0);function Ul(e,t){return function(r){return null==r?t:e(r)}}function Dl(e,t){return r=>{if(t&&null==r)return null;if(!Array.isArray(r))throw new Error("not an array");return r.map((t=>e(t)))}}function Bl(e,t){return r=>{const s={};for(const n in e){let i=n;if(t&&n in t&&!(i in r))for(const e of t[n])if(e in r){i=e;break}try{const t=e[n](r[i]);void 0!==t&&(s[n]=t)}catch(e){Ot(!1,`invalid value for value.${n} (${e instanceof Error?e.message:"not-an-error"})`,"BAD_DATA",{value:r})}}return s}}function Ll(e){return xt(Mt(e,!0),"invalid data","value",e),e}function Ml(e){return xt(Mt(e,32),"invalid hash","value",e),e}const jl=Bl({address:ds,blockHash:Ml,blockNumber:sr,data:Ll,index:sr,removed:Ul((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}xt(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:Dl(Ml),transactionHash:Ml,transactionIndex:sr},{index:["logIndex"]}),Fl=Bl({hash:Ul(Ml),parentHash:Ml,parentBeaconBlockRoot:Ul(Ml,null),number:sr,timestamp:sr,nonce:Ul(Ll),difficulty:Xt,gasLimit:Xt,gasUsed:Xt,stateRoot:Ul(Ml,null),receiptsRoot:Ul(Ml,null),blobGasUsed:Ul(Xt,null),excessBlobGas:Ul(Xt,null),miner:Ul(ds),prevRandao:Ul(Ml,null),extraData:Ll,baseFeePerGas:Ul(Xt)},{prevRandao:["mixHash"]}),Hl=Bl({transactionIndex:sr,blockNumber:sr,transactionHash:Ml,address:ds,topics:Dl(Ml),data:Ll,index:sr,blockHash:Ml},{index:["logIndex"]}),$l=Bl({to:Ul(ds,null),from:Ul(ds,null),contractAddress:Ul(ds,null),index:sr,root:Ul(Ht),gasUsed:Xt,blobGasUsed:Ul(Xt,null),logsBloom:Ul(Ll),blockHash:Ml,hash:Ml,logs:Dl((function(e){return Hl(e)})),blockNumber:sr,cumulativeGasUsed:Xt,effectiveGasPrice:Ul(Xt),blobGasPrice:Ul(Xt,null),status:Ul(sr),type:Ul(sr,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Wl(e){e.to&&Xt(e.to)===Rl&&(e.to="0x0000000000000000000000000000000000000000");const t=Bl({hash:Ml,index:Ul(sr,void 0),type:e=>"0x"===e||null==e?0:sr(e),accessList:Ul(si,null),blobVersionedHashes:Ul(Dl(Ml,!0),null),blockHash:Ul(Ml,null),blockNumber:Ul(sr,null),transactionIndex:Ul(sr,null),from:ds,gasPrice:Ul(Xt),maxPriorityFeePerGas:Ul(Xt),maxFeePerGas:Ul(Xt),maxFeePerBlobGas:Ul(Xt,null),gasLimit:Xt,to:Ul(ds,null),value:Xt,nonce:sr,data:Ll,creates:Ul(ds,null),chainId:Ul(Xt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=ds(e.from);let r=Xt(e.nonce,"tx.nonce").toString(16);return r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r,ds(zt(os(cl([t,r])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=Ya.from(e.signature):t.signature=Ya.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&Xt(t.blockHash)===Rl&&(t.blockHash=null),t}class zl{name;constructor(e){Nt(this,{name:e})}clone(){return new zl(this.name)}}class ql extends zl{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function s(e,s){let n=(t||{})[e];null==n&&(n=s),xt("number"==typeof n,`invalud value for ${e}`,"costs",t),r[e]=n}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Nt(this,r)}clone(){return new ql(this.effectiveBlock,this)}}class Vl extends zl{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),Nt(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new Vl(this.address,this.targetNetwork)}}class Gl extends zl{#I;#_e;get url(){return this.#I}get processFunc(){return this.#_e}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#I=e,this.#_e=t}clone(){return this}}const Kl=new Map;class Jl{#Ne;#de;#Ie;constructor(e,t){this.#Ne=e,this.#de=Xt(t),this.#Ie=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#Ne}set name(e){this.#Ne=e}get chainId(){return this.#de}set chainId(e){this.#de=Xt(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===Xt(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===Xt(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===Xt(e.chainId)}catch(e){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(this.#Ie.values())}attachPlugin(e){if(this.#Ie.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#Ie.set(e.name,e.clone()),this}getPlugin(e){return this.#Ie.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new Jl(this.name,this.chainId);return this.plugins.forEach((t=>{e.attachPlugin(t.clone())})),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new ql;let r=t.txBase;if(null==e.to&&(r+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)"00"===e.data.substring(s,s+2)?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const s=si(e.accessList);for(const e in s)r+=t.txAccessListAddress+t.txAccessListStorageKey*s[e].storageKeys.length}return r}static from(e){if(function(){function e(e,t,r){const s=function(){const s=new Jl(e,t);return null!=r.ensNetwork&&s.attachPlugin(new Vl(null,r.ensNetwork)),s.attachPlugin(new ql),(r.plugins||[]).forEach((e=>{s.attachPlugin(e)})),s};Jl.register(e,s),Jl.register(t,s),r.altNames&&r.altNames.forEach((e=>{Jl.register(e,s)}))}Yl||(Yl=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[Zl("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Zl("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1}))}(),null==e)return Jl.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){const t=Kl.get(e);if(t)return t();if("bigint"==typeof e)return new Jl("unknown",e);xt(!1,"unknown network","network",e)}if("function"==typeof e.clone)return e.clone();if("object"==typeof e){xt("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);const t=new Jl(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new Vl(e.ensAddress,e.ensNetwork)),t}xt(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const r=Kl.get(e);r&&xt(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Kl.set(e,t)}}function Ql(e,t){const r=String(e);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const s=r.split(".");if(1===s.length&&s.push(""),2!==s.length)throw new Error(`invalid gwei value: ${e}`);for(;s[1].length<t;)s[1]+="0";if(s[1].length>9){let e=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||e++,s[1]=e.toString()}return BigInt(s[0]+s[1])}function Zl(e){return new Gl(e,(async(e,t,r)=>{let s;r.setHeader("User-Agent","ethers");try{const[t,n]=await Promise.all([r.send(),e()]);s=t;const i=s.bodyJson.standard;return{gasPrice:n.gasPrice,maxFeePerGas:Ql(i.maxFee,9),maxPriorityFeePerGas:Ql(i.maxPriorityFee,9)}}catch(e){Ot(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:e})}}))}let Yl=!1;function Xl(e){return JSON.parse(JSON.stringify(e))}class eu{#Se;#Te;#Pe;#Oe;constructor(e){this.#Se=e,this.#Te=null,this.#Pe=4e3,this.#Oe=-2}get pollingInterval(){return this.#Pe}set pollingInterval(e){this.#Pe=e}async#xe(){try{const e=await this.#Se.getBlockNumber();if(-2===this.#Oe)return void(this.#Oe=e);if(e!==this.#Oe){for(let t=this.#Oe+1;t<=e;t++){if(null==this.#Te)return;await this.#Se.emit("block",t)}this.#Oe=e}}catch(e){}null!=this.#Te&&(this.#Te=this.#Se._setTimeout(this.#xe.bind(this),this.#Pe))}start(){this.#Te||(this.#Te=this.#Se._setTimeout(this.#xe.bind(this),this.#Pe),this.#xe())}stop(){this.#Te&&(this.#Se._clearTimeout(this.#Te),this.#Te=null)}pause(e){this.stop(),e&&(this.#Oe=-2)}resume(){this.start()}}class tu{#Se;#xe;#ke;constructor(e){this.#Se=e,this.#ke=!1,this.#xe=e=>{this._poll(e,this.#Se)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#ke||(this.#ke=!0,this.#xe(-2),this.#Se.on("block",this.#xe))}stop(){this.#ke&&(this.#ke=!1,this.#Se.off("block",this.#xe))}pause(e){this.stop()}resume(){this.start()}}class ru extends tu{#Re;#Ue;constructor(e,t){super(e),this.#Re=t,this.#Ue=-2}pause(e){e&&(this.#Ue=-2),super.pause(e)}async _poll(e,t){const r=await t.getBlock(this.#Re);null!=r&&(-2===this.#Ue?this.#Ue=r.number:r.number>this.#Ue&&(t.emit(this.#Re,r.number),this.#Ue=r.number))}}class su extends tu{#Y;constructor(e,t){super(e),this.#Y=Xl(t)}async _poll(e,t){throw new Error("@TODO")}}class nu extends tu{#De;constructor(e,t){super(e),this.#De=t}async _poll(e,t){const r=await t.getTransactionReceipt(this.#De);r&&t.emit(this.#De,r)}}class iu{#Se;#Y;#Te;#ke;#Oe;constructor(e,t){this.#Se=e,this.#Y=Xl(t),this.#Te=this.#xe.bind(this),this.#ke=!1,this.#Oe=-2}async#xe(e){if(-2===this.#Oe)return;const t=Xl(this.#Y);t.fromBlock=this.#Oe+1,t.toBlock=e;const r=await this.#Se.getLogs(t);if(0!==r.length)for(const e of r)this.#Se.emit(this.#Y,e),this.#Oe=e.blockNumber;else this.#Oe<e-60&&(this.#Oe=e-60)}start(){this.#ke||(this.#ke=!0,-2===this.#Oe&&this.#Se.getBlockNumber().then((e=>{this.#Oe=e})),this.#Se.on("block",this.#Te))}stop(){this.#ke&&(this.#ke=!1,this.#Se.off("block",this.#Te))}pause(e){this.stop(),e&&(this.#Oe=-2)}resume(){this.start()}}const ou=BigInt(2);function au(e){return e&&"function"==typeof e.then}function cu(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,r)=>(e[r]=t[r],e)),{})}return t}))}class lu{name;constructor(e){Nt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function uu(e){return(e=Array.from(new Set(e).values())).sort(),e}async function hu(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(Mt(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:cu("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:cu("orphan",t),filter:(r=t,JSON.parse(JSON.stringify(r)))}}var r;if(e.address||e.topics){const r=e,s={topics:(r.topics||[]).map((e=>null==e?null:Array.isArray(e)?uu(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(r.address){const e=[],n=[],i=r=>{Mt(r)?e.push(r):n.push((async()=>{e.push(await Fn(r,t))})())};Array.isArray(r.address)?r.address.forEach(i):i(r.address),n.length&&await Promise.all(n),s.address=uu(e.map((e=>e.toLowerCase())))}return{filter:s,tag:cu("event",s),type:"event"}}xt(!1,"unknown ProviderEvent","event",e)}function du(){return(new Date).getTime()}const pu={cacheTimeout:250,pollingInterval:4e3};class fu{#Be;#Ie;#Le;#Me;#je;#Fe;#He;#$e;#We;#ze;#qe;#u;constructor(e,t){if(this.#u=Object.assign({},pu,t||{}),"any"===e)this.#Fe=!0,this.#je=null;else if(e){const t=Jl.from(e);this.#Fe=!1,this.#je=Promise.resolve(t),setTimeout((()=>{this.emit("network",t,null)}),0)}else this.#Fe=!1,this.#je=null;this.#$e=-1,this.#He=new Map,this.#Be=new Map,this.#Ie=new Map,this.#Le=null,this.#Me=!1,this.#We=1,this.#ze=new Map,this.#qe=!1}get pollingInterval(){return this.#u.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#Ie.values())}attachPlugin(e){if(this.#Ie.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#Ie.set(e.name,e.connect(this)),this}getPlugin(e){return this.#Ie.get(e)||null}get disableCcipRead(){return this.#qe}set disableCcipRead(e){this.#qe=!!e}async#Ve(e){const t=this.#u.cacheTimeout;if(t<0)return await this._perform(e);const r=cu(e.method,e);let s=this.#He.get(r);return s||(s=this._perform(e),this.#He.set(r,s),setTimeout((()=>{this.#He.get(r)===s&&this.#He.delete(r)}),t)),await s}async ccipReadFetch(e,t,r){if(this.disableCcipRead||0===r.length||null==e.to)return null;const s=e.to.toLowerCase(),n=t.toLowerCase(),i=[];for(let t=0;t<r.length;t++){const o=r[t],a=o.replace("{sender}",s).replace("{data}",n),c=new gi(a);-1===o.indexOf("{data}")&&(c.body={data:n,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:t,urls:r});let l="unknown error";const u=await c.send();try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(l=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(e){}Ot(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:o,errorMessage:l}}),i.push(l)}Ot(!1,`error encountered during CCIP fetch: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:i}})}_wrapBlock(e,t){return new xi(function(e){const t=Fl(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:Wl(e))),t}(e),this)}_wrapLog(e,t){return new ki(function(e){return jl(e)}(e),this)}_wrapTransactionReceipt(e,t){return new Ri(function(e){return $l(e)}(e),this)}_wrapTransactionResponse(e,t){return new Ui(Wl(e),this)}_detectNetwork(){Ot(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Ot(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=sr(await this.#Ve({method:"getBlockNumber"}),"%response");return this.#$e>=0&&(this.#$e=e),e}_getAddress(e){return Fn(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return Mt(e)?Mt(e,32)?e:or(e):("bigint"==typeof e&&(e=sr(e,"blockTag")),"number"==typeof e?e>=0?or(e):this.#$e>=0?or(this.#$e+e):this.getBlockNumber().then((t=>or(t+e))):void xt(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?uu(e.map((e=>e.toLowerCase()))):e.toLowerCase())),r="blockHash"in e?e.blockHash:void 0,s=(e,s,n)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(r&&(null!=s||null!=n))throw new Error("invalid filter");const o={};return i&&(o.address=i),t.length&&(o.topics=t),s&&(o.fromBlock=s),n&&(o.toBlock=n),r&&(o.blockHash=r),o};let n,i,o=[];if(e.address)if(Array.isArray(e.address))for(const t of e.address)o.push(this._getAddress(t));else o.push(this._getAddress(e.address));return"fromBlock"in e&&(n=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),o.filter((e=>"string"!=typeof e)).length||null!=n&&"string"!=typeof n||null!=i&&"string"!=typeof i?Promise.all([Promise.all(o),n,i]).then((e=>s(e[0],e[1],e[2]))):s(o,n,i)}_getTransactionRequest(e){const t=Oi(e),r=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const s=Fn(t[e],this);au(s)?r.push(async function(){t[e]=await s}()):t[e]=s})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);au(e)?r.push(async function(){t.blockTag=await e}()):t.blockTag=e}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(null==this.#je){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#je===e&&(this.#je=null),t}})();return this.#je=e,(await e).clone()}const e=this.#je,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#Fe?(this.emit("network",r,t),this.#je===e&&(this.#je=Promise.resolve(r))):Ot(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:r,priorityFee:s}=await _t({_block:this.#Ge("latest",!1),gasPrice:(async()=>{try{return Xt(await this.#Ve({method:"getGasPrice"}),"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{return Xt(await this.#Ve({method:"getPriorityFee"}),"%response")}catch(e){}return null})()});let n=null,i=null;const o=this._wrapBlock(t,e);return o&&o.baseFeePerGas&&(i=null!=s?s:BigInt("1000000000"),n=o.baseFeePerGas*ou+i),new Pi(r,n,i)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const e=new gi(r.url),s=await r.processFunc(t,this,e);return new Pi(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return au(t)&&(t=await t),Xt(await this.#Ve({method:"estimateGas",transaction:t}),"%response")}async#Ke(e,t,r){Ot(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=Oi(e);try{return Ht(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(e){if(!this.disableCcipRead&&Tt(e)&&e.data&&r>=0&&"latest"===t&&null!=s.to&&"0x556f1830"===zt(e.data,0,4)){const n=e.data,i=await Fn(s.to,this);let o;try{o=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ot(Wt(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=zt(e,0,32);Ot(zt(r,0,12)===zt(Eu,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=zt(r,12);try{const r=[],s=sr(zt(e,32,64)),n=sr(zt(e,s,s+32)),i=zt(e,s+32);for(let e=0;e<n;e++){const t=gu(i,32*e);if(null==t)throw new Error("abort");r.push(t)}t.urls=r}catch(e){Ot(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=mu(e,64);if(null==r)throw new Error("abort");t.calldata=r}catch(e){Ot(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ot(zt(e,100,128)===zt(Eu,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=zt(e,96,100);try{const r=mu(e,128);if(null==r)throw new Error("abort");t.extraData=r}catch(e){Ot(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(zt(e.data,4))}catch(e){Ot(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:n}})}Ot(o.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:n,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});const a=await this.ccipReadFetch(s,o.calldata,o.urls);Ot(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:e.data,errorArgs:o.errorArgs}});const c={to:i,data:$t([o.selector,vu([a,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await this.#Ke(c,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:e}),e}}throw e}}async#Je(e){const{value:t}=await _t({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:r}=await _t({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#Je(this.#Ke(t,r,e.enableCcipRead?0:-1))}async#Qe(e,t,r){let s=this._getAddress(t),n=this._getBlockTag(r);return"string"==typeof s&&"string"==typeof n||([s,n]=await Promise.all([s,n])),await this.#Je(this.#Ve(Object.assign(e,{address:s,blockTag:n})))}async getBalance(e,t){return Xt(await this.#Qe({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return sr(await this.#Qe({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Ht(await this.#Qe({method:"getCode"},e,t))}async getStorage(e,t,r){const s=Xt(t,"position");return Ht(await this.#Qe({method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:s}=await _t({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),n=Nl.from(e);if(n.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(n,s).replaceableTransaction(t)}async#Ge(e,t){if(Mt(e,32))return await this.#Ve({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return"string"!=typeof r&&(r=await r),await this.#Ve({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){const{network:r,params:s}=await _t({network:this.getNetwork(),params:this.#Ge(e,!!t)});return null==s?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:t,params:r}=await _t({network:this.getNetwork(),params:this.#Ve({method:"getTransaction",hash:e})});return null==r?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await _t({network:this.getNetwork(),params:this.#Ve({method:"getTransactionReceipt",hash:e})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){const t=await this.#Ve({method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await _t({network:this.getNetwork(),result:this.#Ve({method:"getTransactionResult",hash:e})});return null==t?null:Ht(t)}async getLogs(e){let t=this._getFilter(e);au(t)&&(t=await t);const{network:r,params:s}=await _t({network:this.getNetwork(),params:this.#Ve({method:"getLogs",filter:t})});return s.map((e=>this._wrapLog(e,r)))}_getProvider(e){Ot(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await kl.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=ya((e=ds(e)).substring(2).toLowerCase()+".addr.reverse");try{const r=await kl.getEnsAddress(this),s=new ho(r,["function resolver(bytes32) view returns (address)"],this),n=await s.resolver(t);if(null==n||n===wi)return null;const i=new ho(n,["function name(bytes32) view returns (string)"],this),o=await i.name(t);return await this.resolveName(o)!==e?null:o}catch(e){if(St(e,"BAD_DATA")&&"0x"===e.value)return null;if(St(e,"CALL_EXCEPTION"))return null;throw e}}async waitForTransaction(e,t,r){const s=null!=t?t:1;return 0===s?this.getTransactionReceipt(e):new Promise((async(t,n)=>{let i=null;const o=async r=>{try{const n=await this.getTransactionReceipt(e);if(null!=n&&r-n.blockNumber+1>=s)return t(n),void(i&&(clearTimeout(i),i=null))}catch(e){console.log("EEE",e)}this.once("block",o)};null!=r&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",o),n(Pt("timeout","TIMEOUT",{reason:"timeout"})))}),r)),o(await this.getBlockNumber())}))}async waitForBlock(e){Ot(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#ze.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#ze.delete(e))}_setTimeout(e,t){null==t&&(t=0);const r=this.#We++,s=()=>{this.#ze.delete(r),e()};if(this.paused)this.#ze.set(r,{timer:null,func:s,time:t});else{const e=setTimeout(s,t);this.#ze.set(r,{timer:e,func:s,time:du()})}return r}_forEachSubscriber(e){for(const t of this.#Be.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new lu(e.type);case"block":{const e=new eu(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new ru(this,e.type);case"event":return new iu(this,e.filter);case"transaction":return new nu(this,e.hash);case"orphan":return new su(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of this.#Be.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),null!=this.#Le&&t.pause(this.#Le);break}}async#Ze(e,t){let r=await hu(e,this);return"event"===r.type&&t&&t.length>0&&!0===t[0].removed&&(r=await hu({orphan:"drop-log",log:t[0]},this)),this.#Be.get(r.tag)||null}async#Ye(e){const t=await hu(e,this),r=t.tag;let s=this.#Be.get(r);return s||(s={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#Be.set(r,s)),s}async on(e,t){const r=await this.#Ye(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#Le&&r.subscriber.pause(this.#Le)),this}async once(e,t){const r=await this.#Ye(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#Le&&r.subscriber.pause(this.#Le)),this}async emit(e,...t){const r=await this.#Ze(e,t);if(!r||0===r.listeners.length)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter((({listener:r,once:s})=>{const n=new Li(this,s?null:r,e);try{r.call(this,...t,n)}catch(e){}return!s})),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#Be.delete(r.tag)),s>0}async listenerCount(e){if(e){const t=await this.#Ze(e);return t?t.listeners.length:0}let t=0;for(const{listeners:e}of this.#Be.values())t+=e.length;return t}async listeners(e){if(e){const t=await this.#Ze(e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:e}of this.#Be.values())t=t.concat(e.map((({listener:e})=>e)));return t}async off(e,t){const r=await this.#Ze(e);if(!r)return this;if(t){const e=r.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&r.listeners.splice(e,1)}return t&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#Be.delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:s}=await this.#Ye(e);r&&s.stop(),this.#Be.delete(t)}else for(const[e,{started:t,subscriber:r}]of this.#Be)t&&r.stop(),this.#Be.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Me}destroy(){this.removeAllListeners();for(const e of this.#ze.keys())this._clearTimeout(e);this.#Me=!0}get paused(){return null!=this.#Le}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#$e=-1,null!=this.#Le){if(this.#Le==!!e)return;Ot(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),this.#Le=!!e;for(const e of this.#ze.values())e.timer&&clearTimeout(e.timer),e.time=du()-e.time}resume(){if(null!=this.#Le){this._forEachSubscriber((e=>e.resume())),this.#Le=null;for(const e of this.#ze.values()){let t=e.time;t<0&&(t=0),e.time=du(),setTimeout(e.func,t)}}}}function gu(e,t){try{const r=mu(e,t);if(r)return Bs(r)}catch(e){}return null}function mu(e,t){if("0x"===e)return null;try{const r=sr(zt(e,t,t+32)),s=sr(zt(e,r,r+32));return zt(e,r+32,r+32+s)}catch(e){}return null}function yu(e){const t=ir(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function wu(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const bu=new Uint8Array([]);function vu(e){const t=[];let r=0;for(let s=0;s<e.length;s++)t.push(bu),r+=32;for(let s=0;s<e.length;s++){const n=Bt(e[s]);t[s]=yu(r),t.push(yu(n.length)),t.push(wu(n)),r+=32+32*Math.ceil(n.length/32)}return $t(t)}const Eu="0x0000000000000000000000000000000000000000000000000000000000000000";function Au(e,t){if(e.provider)return e.provider;Ot(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Cu(e,t){let r=Oi(t);if(null!=r.to&&(r.to=Fn(r.to,e)),null!=r.from){const t=r.from;r.from=Promise.all([e.getAddress(),Fn(t,e)]).then((([e,t])=>(xt(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else r.from=e.getAddress();return await _t(r)}class _u{provider;constructor(e){Nt(this,{provider:e||null})}async getNonce(e){return Au(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Cu(this,e)}async populateTransaction(e){const t=Au(this,"populateTransaction"),r=await Cu(this,e);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();null!=r.chainId?xt(Xt(r.chainId)===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):r.chainId=s.chainId;const n=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null==r.gasPrice||2!==r.type&&!n?0!==r.type&&1!==r.type||!n||xt(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):xt(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas)if(0===r.type||1===r.type){const e=await t.getFeeData();Ot(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==r.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(r.type=2,null!=r.gasPrice){const e=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=e,r.maxPriorityFeePerGas=e}else null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(Ot(!n,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice),r.type=0):Ot(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==r.type&&3!==r.type||(null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else r.type=2;return await _t(r)}async estimateGas(e){return Au(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Au(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Au(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Au(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=Nl.from(r);return await t.broadcastTransaction(await this.signTransaction(s))}}class Nu{#Se;#Xe;#Te;#ke;#et;#tt;constructor(e){this.#Se=e,this.#Xe=null,this.#Te=this.#xe.bind(this),this.#ke=!1,this.#et=null,this.#tt=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#xe(e){try{null==this.#Xe&&(this.#Xe=this._subscribe(this.#Se));let e=null;try{e=await this.#Xe}catch(e){if(!St(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e)return this.#Xe=null,void this.#Se._recoverSubscriber(this,this._recover(this.#Se));const t=await this.#Se.getNetwork();if(this.#et||(this.#et=t),this.#et.chainId!==t.chainId)throw new Error("chaid changed");if(this.#tt)return;const r=await this.#Se.send("eth_getFilterChanges",[e]);await this._emitResults(this.#Se,r)}catch(e){console.log("@TODO",e)}this.#Se.once("block",this.#Te)}#rt(){const e=this.#Xe;e&&(this.#Xe=null,e.then((e=>{this.#Se.destroyed||this.#Se.send("eth_uninstallFilter",[e])})))}start(){this.#ke||(this.#ke=!0,this.#xe(-2))}stop(){this.#ke&&(this.#ke=!1,this.#tt=!0,this.#rt(),this.#Se.off("block",this.#Te))}pause(e){e&&this.#rt(),this.#Se.off("block",this.#Te)}resume(){this.start()}}class Iu extends Nu{#st;constructor(e,t){var r;super(e),this.#st=(r=t,JSON.parse(JSON.stringify(r)))}_recover(e){return new iu(e,this.#st)}async _subscribe(e){return await e.send("eth_newFilter",[this.#st])}async _emitResults(e,t){for(const r of t)e.emit(this.#st,e._wrapLog(r,e._network))}}class Su extends Nu{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const Tu="bigint,boolean,function,number,string,symbol".split(/,/g);function Pu(e){if(null==e||Tu.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(Pu);if("object"==typeof e)return Object.keys(e).reduce(((t,r)=>(t[r]=e[r],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function Ou(e){return new Promise((t=>{setTimeout(t,e)}))}function xu(e){return e?e.toLowerCase():e}function ku(e){return e&&"number"==typeof e.pollingInterval}const Ru={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Uu extends _u{address;constructor(e,t){super(e),Nt(this,{address:t=ds(t)})}connect(e){Ot(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Pu(e),r=[];if(t.from){const s=t.from;r.push((async()=>{const r=await Fn(s,this.provider);xt(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r})())}else t.from=this.address;if(null==t.gasLimit&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;r.push((async()=>{t.to=await Fn(e,this.provider)})())}r.length&&await Promise.all(r);const s=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise(((e,s)=>{const n=[1e3,100];let i=0;const o=async()=>{try{const s=await this.provider.getTransaction(r);if(null!=s)return void e(s.replaceableTransaction(t))}catch(e){if(St(e,"CANCELLED")||St(e,"BAD_DATA")||St(e,"NETWORK_ERROR"))return null==e.info&&(e.info={}),e.info.sendTransactionHash=r,void s(e);if(St(e,"INVALID_ARGUMENT")&&(i++,null==e.info&&(e.info={}),e.info.sendTransactionHash=r,i>10))return void s(e);this.provider.emit("error",Pt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout((()=>{o()}),n.pop()||4e3)};o()}))}async signTransaction(e){const t=Pu(e);if(t.from){const r=await Fn(t.from,this.provider);xt(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;const r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const t="string"==typeof e?Ds(e):e;return await this.provider.send("personal_sign",[Ht(t),this.address.toLowerCase()])}async signTypedData(e,t,r){const s=Pu(r),n=await ti.resolveNames(e,t,s,(async e=>{const t=await Fn(e);return xt(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ti.getPayload(n.domain,t,n.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?Ds(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ht(t)])}}class Du extends fu{#u;#nt;#it;#ot;#at;#et;#ct;#lt(){if(this.#ot)return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#ot=setTimeout((()=>{this.#ot=null;const e=this.#it;for(this.#it=[];e.length;){const t=[e.shift()];for(;e.length&&t.length!==this.#u.batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map((e=>e.payload))).length>this.#u.batchMaxSize){e.unshift(t.pop());break}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const r=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:r});for(const{resolve:e,reject:s,payload:n}of t){if(this.destroyed){s(Pt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));continue}const t=r.filter((e=>e.id===n.id))[0];if(null!=t)"error"in t?s(this.getRpcError(n,t)):e(t.result);else{const e=Pt("missing response for request","BAD_DATA",{value:r,info:{payload:n}});this.emit("error",e),s(e)}}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:r}of t)r(e)}})()}}),e)}constructor(e,t){super(e,t),this.#nt=1,this.#u=Object.assign({},Ru,t||{}),this.#it=[],this.#ot=null,this.#et=null,this.#ct=null;{let e=null;const t=new Promise((t=>{e=t}));this.#at={promise:t,resolve:e}}const r=this._getOption("staticNetwork");"boolean"==typeof r?(xt(!r||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),r&&null!=e&&(this.#et=Jl.from(e))):r&&(xt(null==e||r.matches(e),"staticNetwork MUST match network object","options",t),this.#et=r)}_getOption(e){return this.#u[e]}get _network(){return Ot(this.#et,"network is not available yet","NETWORK_ERROR"),this.#et}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&Xt(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#et)return this.#et}return this.#ct?await this.#ct:this.ready?(this.#ct=(async()=>{try{const e=Jl.from(Xt(await this.send("eth_chainId",[])));return this.#ct=null,e}catch(e){throw this.#ct=null,e}})(),await this.#ct):(this.#ct=(async()=>{const e={id:this.#nt++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let t;this.emit("debug",{action:"sendRpcPayload",payload:e});try{t=(await this._send(e))[0],this.#ct=null}catch(e){throw this.#ct=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:t}),"result"in t)return Jl.from(Xt(t.result));throw this.getRpcError(e,t)})(),await this.#ct)}_start(){null!=this.#at&&null!=this.#at.resolve&&(this.#at.resolve(),this.#at=null,(async()=>{for(;null==this.#et&&!this.destroyed;)try{this.#et=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Pt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Ou(1e3)}this.#lt()})())}async _waitUntilReady(){if(null!=this.#at)return await this.#at.promise}_getSubscriber(e){return"pending"===e.type?new Su(this):"event"===e.type?this._getOption("polling")?new iu(this,e.filter):new Iu(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new lu("orphan"):super._getSubscriber(e)}get ready(){return null==this.#at}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((r=>{if(null==e[r])return;let s=r;"gasLimit"===r&&(s="gas"),t[s]=or(Xt(e[r],`tx.${r}`))})),["from","to","data"].forEach((r=>{null!=e[r]&&(t[r]=Ht(e[r]))})),e.accessList&&(t.accessList=si(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map((e=>e.toLowerCase()))),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[xu(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[xu(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[xu(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[xu(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(xu):e.filter.address=xu(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:r}=e,{error:s}=t;if("eth_estimateGas"===r&&s.message){const t=s.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return Pt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}})}if("eth_call"===r||"eth_estimateGas"===r){const t=Mu(s),n=Ln.getBuiltinCallException("eth_call"===r?"call":"estimateGas",e.params[0],t?t.data:null);return n.info={error:s,payload:e},n}const n=JSON.stringify(function(e){const t=[];return ju(e,t),t}(s));if("string"==typeof s.message&&s.message.match(/user denied|ethers-user-denied/i))return Pt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:s}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){const t=e.params[0];if(n.match(/insufficient funds|base fee exceeds gas limit/i))return Pt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:s}});if(n.match(/nonce/i)&&n.match(/too low/i))return Pt("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:s}});if(n.match(/replacement transaction/i)&&n.match(/underpriced/i))return Pt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:s}});if(n.match(/only replay-protected/i))return Pt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:t,info:{error:s}}})}let i=!!n.match(/the method .* does not exist/i);return i||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(i=!0),i?Pt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):Pt("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(Pt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=this.#nt++,s=new Promise(((s,n)=>{this.#it.push({resolve:s,reject:n,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})}));return this.#lt(),s}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const r=await t;if(e>=r.length)throw new Error("no such account");return new Uu(this,r[e])}const{accounts:r}=await _t({network:this.getNetwork(),accounts:t});e=ds(e);for(const t of r)if(ds(t)===e)return new Uu(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new Uu(this,e)))}destroy(){this.#ot&&(clearTimeout(this.#ot),this.#ot=null);for(const{payload:e,reject:t}of this.#it)t(Pt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#it=[],super.destroy()}}class Bu extends Du{#ut;constructor(e,t){super(e,t);let r=this._getOption("pollingInterval");null==r&&(r=Ru.pollingInterval),this.#ut=r}_getSubscriber(e){const t=super._getSubscriber(e);return ku(t)&&(t.pollingInterval=this.#ut),t}get pollingInterval(){return this.#ut}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#ut=e,this._forEachSubscriber((e=>{ku(e)&&(e.pollingInterval=this.#ut)}))}}class Lu extends Bu{#ht;constructor(e,t,r){null==e&&(e="http://localhost:8545"),super(t,r),this.#ht="string"==typeof e?new gi(e):e.clone()}_getConnection(){return this.#ht.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");const r=await t.send();r.assertOk();let s=r.bodyJson;return Array.isArray(s)||(s=[s]),s}}function Mu(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&Mt(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const r=Mu(e[t]);if(r)return r}return null}if("string"==typeof e)try{return Mu(JSON.parse(e))}catch(e){}return null}function ju(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const r in e)ju(e[r],t);if("string"==typeof e)try{return ju(JSON.parse(e),t)}catch(e){}}}const Fu=BigInt(-1),Hu=BigInt(0),$u=BigInt(1),Wu=BigInt(5),zu={};let qu="0000";for(;qu.length<80;)qu+=qu;function Vu(e){let t=qu;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function Gu(e,t,r){const s=BigInt(t.width);if(t.signed){const t=$u<<s-$u;Ot(null==r||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=e>Hu?Qt(Yt(e,s),s):-Qt(Yt(-e,s),s)}else{const t=$u<<s;Ot(null==r||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=(e%t+t)%t&t-$u}return e}function Ku(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,s=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const n=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);xt(n,"invalid fixed format","format",e),t="u"!==n[1],r=parseInt(n[2]),s=parseInt(n[3])}else if(e){const n=e,i=(e,t,r)=>null==n[e]?r:(xt(typeof n[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,n[e]),n[e]);t=i("signed","boolean",t),r=i("width","number",r),s=i("decimals","number",s)}return xt(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r),xt(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s),{signed:t,width:r,decimals:s,name:(t?"":"u")+"fixed"+String(r)+"x"+String(s)}}class Ju{format;#dt;#pt;#ft;_value;constructor(e,t,r){Ut(e,zu,"FixedNumber"),this.#pt=t,this.#dt=r;const s=function(e,t){let r="";e<Hu&&(r="-",e*=Fu);let s=e.toString();if(0===t)return r+s;for(;s.length<=t;)s=qu+s;const n=s.length-t;for(s=s.substring(0,n)+"."+s.substring(n);"0"===s[0]&&"."!==s[1];)s=s.substring(1);for(;"0"===s[s.length-1]&&"."!==s[s.length-2];)s=s.substring(0,s.length-1);return r+s}(t,r.decimals);Nt(this,{format:r.name,_value:s}),this.#ft=Vu(r.decimals)}get signed(){return this.#dt.signed}get width(){return this.#dt.width}get decimals(){return this.#dt.decimals}get value(){return this.#pt}#gt(e){xt(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#mt(e,t){return e=Gu(e,this.#dt,t),new Ju(zu,e,this.#dt)}#yt(e,t){return this.#gt(e),this.#mt(this.#pt+e.#pt,t)}addUnsafe(e){return this.#yt(e)}add(e){return this.#yt(e,"add")}#wt(e,t){return this.#gt(e),this.#mt(this.#pt-e.#pt,t)}subUnsafe(e){return this.#wt(e)}sub(e){return this.#wt(e,"sub")}#bt(e,t){return this.#gt(e),this.#mt(this.#pt*e.#pt/this.#ft,t)}mulUnsafe(e){return this.#bt(e)}mul(e){return this.#bt(e,"mul")}mulSignal(e){this.#gt(e);const t=this.#pt*e.#pt;return Ot(t%this.#ft===Hu,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#mt(t/this.#ft,"mulSignal")}#vt(e,t){return Ot(e.#pt!==Hu,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#gt(e),this.#mt(this.#pt*this.#ft/e.#pt,t)}divUnsafe(e){return this.#vt(e)}div(e){return this.#vt(e,"div")}divSignal(e){Ot(e.#pt!==Hu,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#gt(e);const t=this.#pt*this.#ft;return Ot(t%e.#pt===Hu,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#mt(t/e.#pt,"divSignal")}cmp(e){let t=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=Vu(s):s<0&&(t*=Vu(-s)),t<r?-1:t>r?1:0}eq(e){return 0===this.cmp(e)}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#pt;return this.#pt<Hu&&(e-=this.#ft-$u),e=this.#pt/this.#ft*this.#ft,this.#mt(e,"floor")}ceiling(){let e=this.#pt;return this.#pt>Hu&&(e+=this.#ft-$u),e=this.#pt/this.#ft*this.#ft,this.#mt(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=Wu*Vu(t-1);let s=this.value+r;const n=Vu(t);return s=s/n*n,Gu(s,this.#dt,"round"),new Ju(zu,s,this.#dt)}isZero(){return this.#pt===Hu}isNegative(){return this.#pt<Hu}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ju.fromString(this.toString(),e)}static fromValue(e,t,r){const s=null==t?0:sr(t),n=Ku(r);let i=Xt(e,"value");const o=s-n.decimals;if(o>0){const t=Vu(o);Ot(i%t===Hu,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else o<0&&(i*=Vu(-o));return Gu(i,n,"fromValue"),new Ju(zu,i,n)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);xt(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=Ku(t);let n=r[2]||"0",i=r[3]||"";for(;i.length<s.decimals;)i+=qu;Ot(i.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,s.decimals);const o=BigInt(r[1]+n+i);return Gu(o,s,"fromString"),new Ju(zu,o,s)}static fromBytes(e,t){let r=rr(Bt(e,"value"));const s=Ku(t);return s.signed&&(r=Qt(r,s.width)),Gu(r,s,"fromBytes"),new Ju(zu,r,s)}}const Qu=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Zu(e,t){let r=18;if("string"==typeof t){const e=Qu.indexOf(t);xt(e>=0,"invalid unit","unit",t),r=3*e}else null!=t&&(r=sr(t,"unit"));return Ju.fromValue(e,r,{decimals:r,width:512}).toString()}const Yu={hexStringToNumber(e){const t=e.startsWith("0x")?e.slice(2):e;return parseInt(t,16)},numberToHexString:e=>`0x${e.toString(16)}`,async getUserInfo(e){const[t,r]=await Promise.all([Yu.getAddresses(e),Yu.getChainId(e)]);return{chainId:r,addresses:t}},async getChainId(e){const t=await e.request({method:"eth_chainId"});return Number(t)},async getAddress(e){const[t]=await e.request({method:"eth_accounts"});return t},getAddresses:async e=>await e.request({method:"eth_accounts"}),async addEthereumChain(e,t){const r=t.rpcUrls.chainDefault?.http||[];await e.request({method:"wallet_addEthereumChain",params:[{chainId:Yu.numberToHexString(t.id),rpcUrls:[...r],chainName:t.name,nativeCurrency:{name:t.nativeCurrency.name,decimals:t.nativeCurrency.decimals,symbol:t.nativeCurrency.symbol},blockExplorerUrls:[t.blockExplorers?.default.url],iconUrls:[rt.NetworkImageIds[t.id]]}]})}};class Xu extends Bu{#j;constructor(e,t,r){const s=Object.assign({},null!=r?r:{},{batchMaxCount:1});xt(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,s),this.#j=async(t,r)=>{const s={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:s});try{const t=await e.request(s);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(e){const t=new Error(e.message);throw t.code=e.code,t.data=e.data,t.payload=s,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){xt(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#j(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#j("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}return await super.getSigner(e)}}const eh={signMessage:async(e,t,r)=>{if(!t)throw new Error("signMessage - provider is undefined");const s=Mt(e)?e:Ht(Ds(e));return await t.request({method:"personal_sign",params:[s,r]})},estimateGas:async(e,t,r,s)=>{if(!t)throw new Error("estimateGas - provider is undefined");if(!r)throw new Error("estimateGas - address is undefined");if(e.chainNamespace&&"eip155"!==e.chainNamespace)throw new Error("estimateGas - chainNamespace is not eip155");const n={from:e.address,to:e.to,data:e.data,type:0},i=new Xu(t,s),o=new Uu(i,r);return await o.estimateGas(n)},sendTransaction:async(e,t,r,s)=>{if(!t)throw new Error("sendTransaction - provider is undefined");if(!r)throw new Error("sendTransaction - address is undefined");if(e.chainNamespace&&"eip155"!==e.chainNamespace)throw new Error("sendTransaction - chainNamespace is not eip155");const n={to:e.to,value:e.value,gasLimit:e.gas,gasPrice:e.gasPrice,data:e.data,type:0},i=new Xu(t,s),o=new Uu(i,r),a=await o.sendTransaction(n),c=await a.wait();return c?.hash||null},writeContract:async(e,t,r,s)=>{if(!t)throw new Error("writeContract - provider is undefined");if(!r)throw new Error("writeContract - address is undefined");const n=new Xu(t,s),i=new Uu(n,r),o=new ho(e.tokenAddress,e.abi,i);if(!o||!e.method)throw new Error("Contract method is undefined");const a=o[e.method];if(a)return await a(...e.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:e=>{try{return JSON.parse(e)}catch(e){throw new Error("Error parsing wallet capabilities")}},parseUnits:function(e,t){xt("string"==typeof e,"value must be a string","value",e);let r=18;if("string"==typeof t){const e=Qu.indexOf(t);xt(e>=0,"invalid unit","unit",t),r=3*e}else null!=t&&(r=sr(t,"unit"));return Ju.fromString(e,{decimals:r,width:512}).value},formatUnits:Zu},th=reownConnectConfig.projectId||"fa97e14c699abfd6280c54dd6829c614";if(!th)throw new Error("VITE_PROJECT_ID is not set");const rh=(sh={adapters:[new class extends mt{constructor(){super({adapterType:u.o.ADAPTER_TYPES.ETHERS,namespace:u.o.CHAIN.EVM}),this.balancePromises={},this.providerHandlers=null}async createEthersConfig(e){if(!e.metadata)return;let t;const r={metadata:e.metadata};if(!1!==e.enableInjected&&(r.injected=t||("undefined"!=typeof window&&window.ethereum?(t=window.ethereum,t):void 0)),!1!==e.enableCoinbase){const t=await async function(){try{const{createCoinbaseWalletSDK:t}=await n.e(3168).then(n.bind(n,3168));if("undefined"==typeof window)return;return t({appName:e?.metadata?.name,appLogoUrl:e?.metadata?.icons[0],appChainIds:e.networks?.map((e=>e.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(e){return void console.error("Failed to import Coinbase Wallet SDK:",e)}}();t&&(r.coinbase=t)}return r.EIP6963=!1!==e.enableEIP6963,r}async signMessage(e){const{message:t,address:r,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await eh.signMessage(t,s,r)}}catch(e){throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){if(!e.provider)throw new Error("Provider is undefined");return{hash:await eh.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:w.U.state.address},e.provider,w.U.state.address,Number(e.caipNetwork?.id))}}async writeContract(e){if(!e.provider)throw new Error("Provider is undefined");const{address:t}=R.C.parseCaipAddress(e.caipAddress);return{hash:await eh.writeContract(e,e.provider,t,Number(e.caipNetwork?.id))}}async estimateGas(e){const{provider:t,caipNetwork:r,address:s}=e;if(!t)throw new Error("Provider is undefined");try{return{gas:await eh.estimateGas({data:e.data,to:e.to,address:s},t,s,Number(r?.id))}}catch(e){throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return eh.parseUnits(e.value,e.decimals)}formatUnits(e){return eh.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:t,chainId:r}=e,s=this.connectors.find((e=>e.id===t)),n=s?.provider;if(!n)throw new Error("Provider not found");const i=await n.request({method:"eth_requestAccounts"}),o=await n.request({method:"eth_chainId"});if(this.listenProviderEvents(n),!i[0])throw new Error("No accounts found");if(!s?.type)throw new Error("Connector type not found");return{address:i[0],chainId:Number(o)||Number(r),provider:n,type:s.type,id:t}}async syncConnectors(e){this.ethersConfig=await this.createEthersConfig(e),this.ethersConfig?.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter((e=>"metadata"!==e&&"EIP6963"!==e)).forEach((t=>{const r="coinbase"===t?"coinbaseWalletSDK":t,s=t===u.o.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:r,explorerId:rt.ConnectorExplorerIds[r],imageUrl:e?.connectorImages?.[r],name:rt.ConnectorNamesMap[r]||"Unknown",imageId:rt.ConnectorImageIds[r],type:rt.ConnectorTypesMap[r]??"EXTERNAL",info:s?void 0:{rdns:r},chain:this.namespace,chains:[],provider:this.ethersConfig?.[t]})}))}setUniversalProvider(e){this.addConnector(new ft({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}eip6963EventHandler(e){if(e.detail){const{info:t,provider:r}=e.detail,s=this.connectors?.find((e=>e.name===t?.name));if(!s){const e=rt.ConnectorTypesMap[u.o.CONNECTOR_ID.EIP6963],s=t?.rdns||t?.name||t?.uuid;e&&this.namespace&&s&&this.addConnector({id:s,type:e,imageUrl:t?.icon,name:t?.name||"Unknown",provider:r,info:t,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if("undefined"!=typeof window&&e){const e=this.eip6963EventHandler.bind(this);window.addEventListener(N.o.EIP6963_ANNOUNCE_EVENT,e),window.dispatchEvent(new Event(N.o.EIP6963_REQUEST_EVENT))}}async connect({id:e,type:t,chainId:r,socialUri:s}){const n=this.connectors.find((t=>t.id===e)),i=n?.provider;if(!i)throw new Error("Provider not found");let o,a=[];if("AUTH"===t){const{address:e}=await i.connect({chainId:r,socialUri:s,preferredAccountType:w.U.state.preferredAccountTypes?.eip155});a=[e],this.emit("accountChanged",{address:a[0],chainId:Number(r)})}else{if(a=await i.request({method:"eth_requestAccounts"}),o=await i.request({method:"eth_chainId"}),o!==r){const e=this.getCaipNetworks().find((e=>e.id===r));if(!e)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:e,provider:i,providerType:t})}catch(e){throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:a[0],chainId:Number(r)}),this.listenProviderEvents(i)}return{address:a[0],chainId:Number(r),provider:i,type:t,id:e}}async reconnect(e){const{id:t,chainId:r}=e,s=this.connectors.find((e=>e.id===t));s&&"AUTH"===s.type&&r&&await s.provider.connect({chainId:r,preferredAccountType:w.U.state.preferredAccountTypes?.eip155})}async getAccounts(e){const t=this.connectors.find((t=>t.id===e.id)),r=t?.provider;if(!r||!t)throw new Error("Provider not found");if(e.id===u.o.CONNECTOR_ID.AUTH){const e=t.provider;if(!e.user)return{accounts:[]};const{accounts:r,address:s}=e.user;return Promise.resolve({accounts:(r||[{address:s,type:"eoa"}]).map((e=>l.w.createAccount("eip155",e.address,e.type)))})}return{accounts:(await r.request({method:"eth_requestAccounts"})).map((e=>l.w.createAccount("eip155",e,"eoa")))}}async disconnect(e){if(!e.provider||!e.providerType)throw new Error("Provider or providerType not provided");switch(e.providerType){case"WALLET_CONNECT":e.provider.session&&e.provider.disconnect();break;case"AUTH":await e.provider.disconnect();break;case"ANNOUNCED":case"EXTERNAL":await this.revokeProviderPermissions(e.provider);break;default:throw new Error("Unsupported provider type")}}async getBalance(e){const t=e.address,r=this.getCaipNetworks().find((t=>t.id===e.chainId));if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&"eip155"===r.chainNamespace){const e=`${r.caipNetworkId}:${t}`,s=this.balancePromises[e];if(s)return s;const n=A.i.getNativeBalanceCacheForCaipAddress(e);if(n)return{balance:n.balance,symbol:n.symbol};const i=new Lu(r.rpcUrls.default.http[0],{chainId:r.id,name:r.name});if(i)try{return this.balancePromises[e]=new Promise((async s=>{const n=Zu(await i.getBalance(t),18);A.i.updateNativeBalanceCache({caipAddress:e,balance:n,symbol:r.nativeCurrency.symbol,timestamp:Date.now()}),s({balance:n,symbol:r.nativeCurrency.symbol})})).finally((()=>{delete this.balancePromises[e]})),this.balancePromises[e]||{balance:"0.00",symbol:"ETH"}}catch(e){return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}listenProviderEvents(e){const t=()=>{this.removeProviderListeners(e),this.emit("disconnect")},r=e=>{e.length>0?this.emit("accountChanged",{address:e[0]}):t()},s=e=>{const t="string"==typeof e?Yu.hexStringToNumber(e):Number(e);this.emit("switchNetwork",{chainId:t})};e.on("disconnect",t),e.on("accountsChanged",r),e.on("chainChanged",s),this.providerHandlers={disconnect:t,accountsChanged:r,chainChanged:s}}removeProviderListeners(e){this.providerHandlers&&(e.removeListener("disconnect",this.providerHandlers.disconnect),e.removeListener("accountsChanged",this.providerHandlers.accountsChanged),e.removeListener("chainChanged",this.providerHandlers.chainChanged),this.providerHandlers=null)}async switchNetwork(e){const{caipNetwork:t,provider:r,providerType:s}=e;if("AUTH"!==s)try{await r.request({method:"wallet_switchEthereumChain",params:[{chainId:Yu.numberToHexString(t.id)}]})}catch(e){if(e.code===ut||32603===e.code||5e3===e.code||e?.data?.originalError?.code===ut)await Yu.addEthereumChain(r,t);else if("ANNOUNCED"===s||"EXTERNAL"===s||"INJECTED"===s)throw new Error("Chain is not supported")}else await super.switchNetwork(e)}getWalletConnectProvider(){return this.connectors.find((e=>"WALLET_CONNECT"===e.type))?.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find((e=>"eth_accounts"===e.parentCapability))&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(e){console.info("Could not revoke permissions from wallet. Disconnecting...",e)}}async getCapabilities(e){const t=S.A.getProvider(u.o.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");const r=t.session?.sessionProperties?.capabilities;if(r){const t=eh.parseWalletCapabilities(r)[e];if(t)return t}return await t.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const t=S.A.getProvider(u.o.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const t=S.A.getProvider(u.o.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const t=S.A.getProvider(u.o.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return await t.request({method:"wallet_getAssets",params:[e]})}}],networks:[s,r,i],projectId:th,themeMode:"dark",themeVariables:{"--w3m-accent":"#9577fd","--w3m-background":"#121212","--w3m-font-family":"Inter"},allowUnsupportedChain:!1,allWallets:"HIDE",features:{emailShowWallets:!1,analytics:!1,email:!1,socials:!1,swaps:!1,onramp:!1,history:!1}},new class extends Et{setupAuthConnectorListeners(e){e.onRpcRequest((t=>{T.Q.checkIfRequestExists(t)?T.Q.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(P.Vl.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout((()=>{this.showErrorMessage(P.Vl.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)}),300),e.rejectRpcRequests())})),e.onRpcError((()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))})),e.onRpcSuccess(((e,t)=>{const r=T.Q.checkIfRequestIsSafe(t),s=w.U.state.address,n=b.W.state.activeCaipNetwork;r||(s&&n?.id&&this.updateNativeBalance(s,n.id,n.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))})),e.onNotConnected((()=>{const e=b.W.state.activeChain;d.a.getConnectorId(e)===u.o.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,e),this.setLoading(!1,e))})),e.onConnect((e=>{const t=b.W.state.activeChain,r=t===u.o.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=v.H.state.defaultAccountTypes[t],n=w.U.state.preferredAccountTypes?.[t],i=e.preferredAccountType||n||s;_.y.isLowerCaseMatch(e.address,w.U.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:t}),this.setCaipAddress(r,t),this.setUser({...w.U.state.user||{},...e},t),this.setSmartAccountDeployed(Boolean(e.smartAccountDeployed),t),this.setPreferredAccountType(i,t);const o=e.accounts?.map((e=>l.w.createAccount(t,e.address,e.type||n||s)));this.setAllAccounts(o||[l.w.createAccount(t,e.address,e.preferredAccountType||i)],t),this.setLoading(!1,t)})),e.onSocialConnected((({userName:e})=>{this.setUser({...w.U.state.user||{},username:e},b.W.state.activeChain)})),e.onGetSmartAccountEnabledNetworks((e=>{this.setSmartAccountEnabledNetworks(e,b.W.state.activeChain)})),e.onSetPreferredAccount((({address:e,type:t})=>{e&&this.setPreferredAccountType(t,b.W.state.activeChain)}))}async syncAuthConnector(e,t){const r=u.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!r)return;this.setLoading(!0,t);const s=e.getLoginEmailUsed();this.setLoading(s,t),s&&this.setStatus("connecting",t);const n=e.getEmail(),i=e.getUsername();this.setUser({...w.U.state?.user||{},username:i,email:n},b.W.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:o}=await e.isConnected(),a=E.W.getSnapshot(),c=v.H.getSnapshot();await Promise.all([e.syncDappData({metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType}),e.syncTheme({themeMode:a.themeMode,themeVariables:a.themeVariables,w3mThemeVariables:(0,h.o)(a.themeVariables,a.themeMode)})]),await e.getSmartAccountEnabledNetworks(),t&&r&&(o&&this.connectionControllerClient?.connectExternal?(await(this.connectionControllerClient?.connectExternal({id:u.o.CONNECTOR_ID.AUTH,info:{name:u.o.CONNECTOR_ID.AUTH},type:N.o.CONNECTOR_TYPE_AUTH,provider:e,chainId:b.W.state.activeCaipNetwork?.id,chain:t})),this.setStatus("connected",t)):d.a.getConnectorId(t)===u.o.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),A.i.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!l.w.isTelegram())return;const t=A.i.getTelegramSocialProvider();if(!t)return;if(!l.w.isClient())return;const r=new URL(window.location.href).searchParams.get("result_uri");if(!r)return;w.U.setSocialProvider(t,e),await(this.authProvider?.init());const s=d.a.getAuthConnector();t&&s&&(this.setLoading(!0,e),await p.x.connectExternal({id:s.id,type:s.type,socialUri:r},s.chain),A.i.setConnectedSocialProvider(t),A.i.removeTelegramSocialProvider(),f.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{const e=new URL(window.location.href);e.searchParams.delete("result_uri"),window.history.replaceState({},document.title,e.toString())}catch(e){console.error("tma social login failed",e)}}createAuthProvider(e){if(!u.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const t=this.remoteFeatures?.email,r=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,s=t||r;!this.authProvider&&this.options?.projectId&&s&&(this.authProvider=x.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,abortController:I.R.EmbeddedWalletAbortController,onTimeout:e=>{"iframe_load_failed"===e?C.h.open(I.R.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):"iframe_request_timeout"===e?C.h.open(I.R.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):"unverified_domain"===e&&C.h.open(I.R.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),g.z.subscribeOpen((e=>{!e&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()})),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&m.Np.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const t=b.W.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===t&&s){const t=this.getAdapter(r),s=S.A.getProvider(r),n=S.A.getProviderId(r);await(t?.switchNetwork({caipNetwork:e,provider:s,providerType:n})),this.setCaipNetwork(e)}else{const n=S.A.getProviderId(t)===N.o.CONNECTOR_TYPE_AUTH,i=S.A.getProviderId(r),o=i===N.o.CONNECTOR_TYPE_AUTH,a=u.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((n&&void 0===i||o)&&a)try{if(b.W.state.activeChain=e.chainNamespace,s){const t=this.getAdapter(r);await(t?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:i}))}else await(this.connectionControllerClient?.connectExternal?.({id:u.o.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:N.o.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch(t){const s=this.getAdapter(r);await(s?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:i}))}else i===N.o.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach((e=>{this.createAuthProviderForAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this)})),await this.injectModalUi(),g.z.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:r}){const s=`${r}:${t}`,n=this.caipNetworks?.find((e=>e.caipNetworkId===s));if(r!==u.o.CHAIN.EVM||n?.testnet)return this.setProfileName(null,r),void this.setProfileImage(null,r);try{const{name:t,avatar:n}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(t,r),this.setProfileImage(n,r)}catch{await this.syncReownName(e,r),1!==t&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const t=S.A.getProviderId(e);if(t===N.o.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=A.i.getConnectedSocialProvider()??"email",n=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:n,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(l.w.isClient()&&!At)try{const e={...y.oU.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),l.w.isClient()&&!document.querySelector("w3m-modal")){const e=document.createElement("w3m-modal");v.H.state.disableAppend||v.H.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",e)}At=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!l.w.isClient())return;const r=[];(t.email||t.socials&&t.socials.length>0)&&r.push(Promise.all([n.e(6554),n.e(9922),n.e(3796)]).then(n.bind(n,3796))),t.email&&r.push(Promise.all([n.e(6554),n.e(9922),n.e(8831)]).then(n.bind(n,8831))),t.socials&&r.push(Promise.all([n.e(6554),n.e(6283),n.e(1786),n.e(3573)]).then(n.bind(n,3302))),t.swaps&&t.swaps.length>0&&r.push(Promise.all([n.e(6554),n.e(9922),n.e(239),n.e(2280)]).then(n.bind(n,2280))),e.send&&r.push(Promise.all([n.e(6554),n.e(9922),n.e(239),n.e(6323)]).then(n.bind(n,6323))),e.receive&&r.push(Promise.all([n.e(6554),n.e(6283),n.e(9567)]).then(n.bind(n,9567))),t.onramp&&t.onramp.length>0&&r.push(Promise.all([n.e(6554),n.e(9922),n.e(1786),n.e(564),n.e(7173)]).then(n.bind(n,9554))),t.activity&&r.push(Promise.all([n.e(6554),n.e(9874),n.e(6406)]).then(n.bind(n,4951))),e.pay&&r.push(Promise.all([n.e(6554),n.e(6056)]).then(n.bind(n,6056))),await Promise.all([...r,Promise.all([n.e(6554),n.e(9922),n.e(6283),n.e(1786),n.e(564),n.e(9874),n.e(5201),n.e(305)]).then(n.bind(n,305)),Promise.all([n.e(6554),n.e(5201),n.e(2005)]).then(n.bind(n,124))])}}({...sh,sdkVersion:l.w.generateSdkVersion(sh.adapters??[],"html","1.7.7")}));var sh;window.walletConnect={connect:()=>rh.open(),disconnect:()=>rh.disconnect(),onConnect:e=>{rh.subscribeProviders((t=>{const r=rh.getAccount("eip155");e(r.address,t.eip155)}))},onDisconnect:e=>{rh.subscribeAccount((t=>{null===t.address&&e()}))},switchToBinanceNetwork:async e=>{await rh.switchNetwork(r),e()},switchToEthereumNetwork:async e=>{await rh.switchNetwork(i),console.log("switched to mainnet"),e()},onAccountsChanged:e=>{rh.subscribeAccount((t=>{e(t.address)}))}}})()})();